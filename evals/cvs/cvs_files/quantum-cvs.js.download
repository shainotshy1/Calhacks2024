/* Copyright 2015-2022 Quantum Metric, Inc. All rights reserved. For US patents see https://www.quantummetric.com/legal/patents/. For EULA see https://www.quantummetric.com/legal/eula release-candidate f70fce60311821568343f3bda7ccf10422e72f90 */
(function() {'use strict';function u(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var y=u(this),z="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function A(a,b){if(b){var c=y;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&z(c,a,{configurable:!0,writable:!0,value:b})}}function B(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})}
A("Promise.prototype.finally",function(a){return a?a:function(b){return this.then(function(c){return Promise.resolve(b()).then(function(){return c})},function(c){return Promise.resolve(b()).then(function(){throw c;})})}});
function C(a){a.b||(window.fetch=function(b,c){{const e=(new Date).getTime();let f,g=null,k=null,l=null;try{if(f=b instanceof Request?b:new Request(b,c),"string"===typeof b)"object"===typeof c?(k=c.body,g=c.method,l=D(f.headers)):g="GET";else if("object"===typeof b&&b.constructor&&"Request"===b.constructor.name&&"function"===typeof b.clone){g=c&&c.method||b.method;var d=b.clone();c&&c.body&&"string"==typeof c.body&&c.body.length?k=c.body:window.ReadableStream&&d.body instanceof window.ReadableStream?
E(d.body).then(m=>k=m):d.text().then(function(m){k=m});l=D(c&&c.headers||d.headers)}}catch(m){}let n=!1,h=!1,p=!1,q,r=c&&c.signal&&c.signal instanceof AbortSignal;try{r&&(q=new AbortController,c.signal.addEventListener("abort",function(){h=!0;v()}),c.signal=q.signal)}catch(m){}let w=!1;const v=()=>{w||!h||n&&!p||(q.abort(),w=!0)};a.h();d=a.g.apply(this,arguments);try{d.then(function(m){try{a.i&&(n=!0),m.qmre_f||(m.qmre_f=1,F(a,m.clone(),g,k,e,l).finally(()=>{p=!0;v()}))}catch(t){}r&&["arrayBuffer",
"blob","formData","json","text"].forEach((t=>x=>{const H=t[x];t[x]=function(){n=!0;return H.call(this,arguments)}})(m));return m}).catch(m=>{"AbortError"===m.name&&f&&(m={response:"",getAllResponseHeaders:function(){return""}},l&&(m.m=l),m.response=a.c,a.a({type:a.type,args:[-1,f.url,e,g,k,m]}))})}catch(m){}return d}},a.b=!0)}
function D(a){var b="";try{if(a)if(b="","function"==typeof a.entries){const c=a.entries();let d=c.next();for(a=0;!d.done&&1E3>a;)b+=`${d.value[0]}: ${d.value[1]}\r\n`,d=c.next(),a++}else for(let c in a)a.hasOwnProperty(c)&&(b+=`${c}: ${a.get?a.get(c):a[c]}\r\n`)}catch(c){}return b}
function F(a,b,c,d,e,f){c=void 0===c?"":c;d=void 0===d?null:d;e=void 0===e?0:e;f=void 0===f?null:f;return new Promise((g,k)=>{try{if("object"==typeof b&&b.constructor&&"Response"===b.constructor.name&&!b.f){let l={response:"",qend:(new Date).getTime(),getAllResponseHeaders:function(){let n="";if(b.headers&&"function"==typeof b.headers.entries){const h=b.headers.entries();let p=0,q=h.next();for(;!q.done&&1E3>p;)n+=`${q.value[0]}: ${q.value[1]}\r\n`,q=h.next(),p++}return n}};f&&(l.reqHeaders=f);if(b.text&&
"function"===typeof b.clone){const n=b.clone();n.text().then(function(h){l.response=h;a.a({type:a.type,args:[n.status,n.url,e,c,d,l]})}).catch(h=>{"AbortError"===h.name&&(l.response=a.c,a.a({type:a.type,args:[n.status,n.url,e,c,d,l]}))}).finally(g)}b.f=1}}catch(l){k(l)}})}
function E(a){return B(function*(){let b="";const c=window.TextDecoder&&new window.TextDecoder;try{const d=a.getReader();for(;;){const {value:e,done:f}=yield d.read();if(f)break;let g="";if(c)g=c.decode(e);else for(let k=0;k<e.length;k++)g+=String.fromCharCode(parseInt(e[k],10));b+=g}}catch(d){}return b}())}
class G{constructor(a,b,c){this.type="fetch";this.b=!1;a&&b&&c?(this.g=a,this.a=b,this.h=c,this.c="QM: fetch aborted.",this.i=!1,C(this)):console.warn("Unable to setup QM: Fetch Interceptor")}};function I(a){function b(h,p){try{var q=J(f,this);q.method=h;q.url=p}catch(r){}return g.apply(this,arguments)}function c(h){var p=this;try{setTimeout(function(){K(f,p,h)},0)}catch(q){}return k.apply(this,arguments)}function d(h,p){try{this.reqHeaders=(this.reqHeaders||"")+(h+": "+p+"\r\n")}catch(q){}return l.apply(this,arguments)}function e(){try{this.qaborted=!0}catch(h){}return n.apply(this,arguments)}const f=a;a=f.c.prototype;var g=a.open,k=a.send,l=a.setRequestHeader,n=a.abort;if(g&&k&&l&&(a.open=
b,a.send=c,a.setRequestHeader=d,a.abort=e,a.open!=b))try{Object.defineProperty(a,"open",{value:b,writable:!0,enumerable:!0,configurable:!0}),Object.defineProperty(a,"send",{value:c,writable:!0,enumerable:!0,configurable:!0}),Object.defineProperty(a,"setRequestHeader",{value:d,writable:!0,enumerable:!0,configurable:!0}),Object.defineProperty(a,"abort",{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(h){}}function J(a,b){a.data.has(b)||a.data.set(b,{});return a.data.get(b)}
function K(a,b,c){var d=J(a,b),e=d.url,f=d.method,g=(new Date).getTime();a.b();if(4===b.readyState)b.qend=(new Date).getTime(),a.a({type:"xhr",args:[b.status,e,g,f,c,b]});else{var k=function(){try{e=e||b.responseURL,4==b.readyState&&(b.qaborted||(b.qend=(new Date).getTime(),b.qresponse=b.response,a.a({type:"xhr",args:[b.status,e,g,f,c,b]})),b.removeEventListener&&b.removeEventListener("readystatechange",k))}catch(l){}};b.addEventListener&&b.addEventListener("readystatechange",k,!1)}}
class L{constructor(a,b,c){a&&b&&c?(this.c=a,this.a=b,this.b=c,this.data=new window.WeakMap,I(this)):console.warn("Unable to setup QM: XHR Interceptor")}};(function(a){function b(){k&&k()}function c(h){g&&f.length<n.j&&f.push(h);for(const p of l)p.call(this,h)}let d=a._o_Fetch||a.fetch,e=a.XMLHttpRequest,f=[],g=!0,k=null;const l=[];let n=Object.assign({j:100,l:1E4},a.a||{});window.QuantumMetricNetworkInterceptor||(window.QuantumMetricNetworkInterceptor={getRootFetch:()=>d,getRootXHR:()=>e,getEntries:()=>f,preRequest:h=>{k=h},onAPI:h=>{l.push(h)}});new G(d,c,b);new L(e,c,b);a.setTimeout(()=>{g=!1;f=[]},n.l)})(window);})();
