!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r,n,i,o,a,s,l,u,c,d,f,p,h,v,g,y,E,m,_,I,b,O,A,N,T,R,S,L,w,C,k,U,D,x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},P={},M={},V=x.parcelRequire66dd;null==V&&((V=function(e){if(e in P)return P[e].exports;if(e in M){var t=M[e];delete M[e];var r={id:e,exports:{}};return P[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){M[e]=t},x.parcelRequire66dd=V);var F=V.register;F("iZqNx",function(e,t){var r=V("hXfjp").default;function n(){e.exports=n=function(){return i},e.exports.__esModule=!0,e.exports.default=e.exports;var t,i={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},l="function"==typeof Symbol?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function p(e,r,n,i){var o,a,l=Object.create((r&&r.prototype instanceof m?r:m).prototype);return s(l,"_invoke",{value:(o=new w(i||[]),a=v,function(r,i){if(a===g)throw Error("Generator is already running");if(a===y){if("throw"===r)throw i;return{value:t,done:!0}}for(o.method=r,o.arg=i;;){var s=o.delegate;if(s){var l=function e(r,n){var i=n.method,o=r.iterator[i];if(o===t)return n.delegate=null,"throw"===i&&r.iterator.return&&(n.method="return",n.arg=t,e(r,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+i+"' method")),E;var a=h(o,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,E;var s=a.arg;return s?s.done?(n[r.resultName]=s.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,E):s:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,E)}(s,o);if(l){if(l===E)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===v)throw a=y,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=g;var u=h(e,n,o);if("normal"===u.type){if(a=o.done?y:"suspendedYield",u.arg===E)continue;return{value:u.arg,done:o.done}}"throw"===u.type&&(a=y,o.method="throw",o.arg=u.arg)}})}),l}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}i.wrap=p;var v="suspendedStart",g="executing",y="completed",E={};function m(){}function _(){}function I(){}var b={};f(b,u,function(){return this});var O=Object.getPrototypeOf,A=O&&O(O(C([])));A&&A!==o&&a.call(A,u)&&(b=A);var N=I.prototype=m.prototype=Object.create(b);function T(e){["next","throw","return"].forEach(function(t){f(e,t,function(e){return this._invoke(t,e)})})}function R(e,t){var n;s(this,"_invoke",{value:function(i,o){function s(){return new t(function(n,s){!function n(i,o,s,l){var u=h(e[i],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==r(d)&&a.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,s,l)},function(e){n("throw",e,s,l)}):t.resolve(d).then(function(e){c.value=e,s(c)},function(e){return n("throw",e,s,l)})}l(u.arg)}(i,o,n,s)})}return n=n?n.then(s,s):s()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(a.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw TypeError(r(e)+" is not iterable")}return _.prototype=I,s(N,"constructor",{value:I,configurable:!0}),s(I,"constructor",{value:_,configurable:!0}),_.displayName=f(I,d,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,I):(e.__proto__=I,f(e,d,"GeneratorFunction")),e.prototype=Object.create(N),e},i.awrap=function(e){return{__await:e}},T(R.prototype),f(R.prototype,c,function(){return this}),i.AsyncIterator=R,i.async=function(e,t,r,n,o){void 0===o&&(o=Promise);var a=new R(p(e,t,r,n),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},T(N),f(N,d,"Generator"),f(N,u,function(){return this}),f(N,"toString",function(){return"[object Generator]"}),i.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},i.values=C,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),E}},i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),F("hXfjp",function(e,t){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}),F("ls3Pm",function(e,t){var r,n=V("9tWsh");function i(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var o=V("1jkOa"),a=V("iRgby"),s=i(V("8XDCe")),l=i(V("kqgDK")),u=V("xO6AD"),c=function(){return(c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function d(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function f(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!e)return{};if("function"==typeof Object.assign)return Object.assign.apply(Object,d([e],t));for(var n=Object(e),i=0;i<t.length;i++){var o=t[i];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n}function p(e,t){return e?y(e,function(e){return e[t]}):{}}function h(e){return Object.keys(e).map(function(t){return e[t]})}function v(e){return Object.keys(e).map(function(t){return[t,e[t]]})}function g(e,t){for(var r,n=0;n<e.length;n++){var i=e[n];if(t(i)){r=i;break}}return r}function y(e,t){var r={};return e.forEach(function(e){r[t(e)]=e}),r}function E(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=0;return e.replace(/%s/g,function(){var e=t[i++],r=void 0===e?"undefined":(0,n._)(e);return"function"===r?e():"string"===r?e:String(e)})}var m,_={assign:f,currentTimestamp:function(){return Math.round((new Date).getTime())},isSafeInteger:function(e){return"number"==typeof e&&9007199254740992>=Math.abs(e)},keyBy:p,uuid:function(){return s()},isNumber:function(e){return"number"==typeof e},getTimestamp:function(){return(new Date).getTime()},isValidEnum:function(e,t){for(var r=!1,n=Object.keys(e),i=0;i<n.length;i++)if(t===e[n[i]]){r=!0;break}return r},groupBy:function(e,t){var r={};return e.forEach(function(e){var n=t(e);r[n]=r[n]||[],r[n].push(e)}),h(r)},objectValues:h,objectEntries:v,find:g,keyByUtil:y,sprintf:E},I={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4},b={CONDITION_EVALUATOR_ERROR:"%s: Error evaluating audience condition of type %s: %s",DATAFILE_AND_SDK_KEY_MISSING:"%s: You must provide at least one of sdkKey or datafile. Cannot start Optimizely",EXPERIMENT_KEY_NOT_IN_DATAFILE:"%s: Experiment key %s is not in datafile.",FEATURE_NOT_IN_DATAFILE:"%s: Feature key %s is not in datafile.",IMPROPERLY_FORMATTED_EXPERIMENT:"%s: Experiment key %s is improperly formatted.",INVALID_ATTRIBUTES:"%s: Provided attributes are in an invalid format.",INVALID_BUCKETING_ID:"%s: Unable to generate hash for bucketing ID %s: %s",INVALID_DATAFILE:"%s: Datafile is invalid - property %s: %s",INVALID_DATAFILE_MALFORMED:"%s: Datafile is invalid because it is malformed.",INVALID_CONFIG:"%s: Provided Optimizely config is in an invalid format.",INVALID_JSON:"%s: JSON object is not valid.",INVALID_ERROR_HANDLER:'%s: Provided "errorHandler" is in an invalid format.',INVALID_EVENT_DISPATCHER:'%s: Provided "eventDispatcher" is in an invalid format.',INVALID_EVENT_TAGS:"%s: Provided event tags are in an invalid format.",INVALID_EXPERIMENT_KEY:"%s: Experiment key %s is not in datafile. It is either invalid, paused, or archived.",INVALID_EXPERIMENT_ID:"%s: Experiment ID %s is not in datafile.",INVALID_GROUP_ID:"%s: Group ID %s is not in datafile.",INVALID_LOGGER:'%s: Provided "logger" is in an invalid format.',INVALID_ROLLOUT_ID:"%s: Invalid rollout ID %s attached to feature %s",INVALID_USER_ID:"%s: Provided user ID is in an invalid format.",INVALID_USER_PROFILE_SERVICE:"%s: Provided user profile service instance is in an invalid format: %s.",NO_DATAFILE_SPECIFIED:"%s: No datafile specified. Cannot start optimizely.",NO_JSON_PROVIDED:"%s: No JSON object to validate against schema.",NO_VARIATION_FOR_EXPERIMENT_KEY:"%s: No variation key %s defined in datafile for experiment %s.",UNDEFINED_ATTRIBUTE:"%s: Provided attribute: %s has an undefined value.",UNRECOGNIZED_ATTRIBUTE:"%s: Unrecognized attribute %s provided. Pruning before sending event to Optimizely.",UNABLE_TO_CAST_VALUE:"%s: Unable to cast value %s to type %s, returning null.",USER_NOT_IN_FORCED_VARIATION:"%s: User %s is not in the forced variation map. Cannot remove their forced variation.",USER_PROFILE_LOOKUP_ERROR:'%s: Error while looking up user profile for user ID "%s": %s.',USER_PROFILE_SAVE_ERROR:'%s: Error while saving user profile for user ID "%s": %s.',VARIABLE_KEY_NOT_IN_DATAFILE:'%s: Variable with key "%s" associated with feature with key "%s" is not in datafile.',VARIATION_ID_NOT_IN_DATAFILE:"%s: No variation ID %s defined in datafile for experiment %s.",VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT:"%s: Variation ID %s is not in the datafile.",INVALID_INPUT_FORMAT:"%s: Provided %s is in an invalid format.",INVALID_DATAFILE_VERSION:"%s: This version of the JavaScript SDK does not support the given datafile version: %s",INVALID_VARIATION_KEY:"%s: Provided variation key is in an invalid format."},O={ACTIVATE_USER:"%s: Activating user %s in experiment %s.",DISPATCH_CONVERSION_EVENT:"%s: Dispatching conversion event to URL %s with params %s.",DISPATCH_IMPRESSION_EVENT:"%s: Dispatching impression event to URL %s with params %s.",DEPRECATED_EVENT_VALUE:"%s: Event value is deprecated in %s call.",EVENT_KEY_NOT_FOUND:"%s: Event key %s is not in datafile.",EXPERIMENT_NOT_RUNNING:"%s: Experiment %s is not running.",FEATURE_ENABLED_FOR_USER:"%s: Feature %s is enabled for user %s.",FEATURE_NOT_ENABLED_FOR_USER:"%s: Feature %s is not enabled for user %s.",FEATURE_HAS_NO_EXPERIMENTS:"%s: Feature %s is not attached to any experiments.",FAILED_TO_PARSE_VALUE:'%s: Failed to parse event value "%s" from event tags.',FAILED_TO_PARSE_REVENUE:'%s: Failed to parse revenue value "%s" from event tags.',FORCED_BUCKETING_FAILED:"%s: Variation key %s is not in datafile. Not activating user %s.",INVALID_OBJECT:"%s: Optimizely object is not valid. Failing %s.",INVALID_CLIENT_ENGINE:"%s: Invalid client engine passed: %s. Defaulting to node-sdk.",INVALID_DEFAULT_DECIDE_OPTIONS:"%s: Provided default decide options is not an array.",INVALID_DECIDE_OPTIONS:"%s: Provided decide options is not an array. Using default decide options.",INVALID_VARIATION_ID:"%s: Bucketed into an invalid variation ID. Returning null.",NOTIFICATION_LISTENER_EXCEPTION:"%s: Notification listener for (%s) threw exception: %s",NO_ROLLOUT_EXISTS:"%s: There is no rollout of feature %s.",NOT_ACTIVATING_USER:"%s: Not activating user %s for experiment %s.",NOT_TRACKING_USER:"%s: Not tracking user %s.",PARSED_REVENUE_VALUE:'%s: Parsed revenue value "%s" from event tags.',PARSED_NUMERIC_VALUE:'%s: Parsed event value "%s" from event tags.',RETURNING_STORED_VARIATION:'%s: Returning previously activated variation "%s" of experiment "%s" for user "%s" from user profile.',ROLLOUT_HAS_NO_EXPERIMENTS:"%s: Rollout of feature %s has no experiments",SAVED_VARIATION:'%s: Saved variation "%s" of experiment "%s" for user "%s".',SAVED_VARIATION_NOT_FOUND:"%s: User %s was previously bucketed into variation with ID %s for experiment %s, but no matching variation was found.",SHOULD_NOT_DISPATCH_ACTIVATE:'%s: Experiment %s is not in "Running" state. Not activating user.',SKIPPING_JSON_VALIDATION:"%s: Skipping JSON schema validation.",TRACK_EVENT:"%s: Tracking event %s for user %s.",UNRECOGNIZED_DECIDE_OPTION:"%s: Unrecognized decide option %s provided.",USER_ASSIGNED_TO_EXPERIMENT_BUCKET:"%s: Assigned bucket %s to user with bucketing ID %s.",USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is in experiment %s of group %s.",USER_BUCKETED_INTO_TARGETING_RULE:"%s: User %s bucketed into targeting rule %s.",USER_IN_FEATURE_EXPERIMENT:"%s: User %s is in variation %s of experiment %s on the feature %s.",USER_IN_ROLLOUT:"%s: User %s is in rollout of feature %s.",USER_NOT_BUCKETED_INTO_EVERYONE_TARGETING_RULE:"%s: User %s not bucketed into everyone targeting rule due to traffic allocation.",USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is not in experiment %s of group %s.",USER_NOT_BUCKETED_INTO_ANY_EXPERIMENT_IN_GROUP:"%s: User %s is not in any experiment of group %s.",USER_NOT_BUCKETED_INTO_TARGETING_RULE:"%s User %s not bucketed into targeting rule %s due to traffic allocation. Trying everyone rule.",USER_NOT_IN_FEATURE_EXPERIMENT:"%s: User %s is not in any experiment on the feature %s.",USER_NOT_IN_ROLLOUT:"%s: User %s is not in rollout of feature %s.",USER_FORCED_IN_VARIATION:"%s: User %s is forced in variation %s.",USER_MAPPED_TO_FORCED_VARIATION:"%s: Set variation %s for experiment %s and user %s in the forced variation map.",USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s does not meet conditions for targeting rule %s.",USER_MEETS_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s meets conditions for targeting rule %s.",USER_HAS_VARIATION:"%s: User %s is in variation %s of experiment %s.",USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED:"Variation (%s) is mapped to flag (%s), rule (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED:"Variation (%s) is mapped to flag (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID:"Invalid variation is mapped to flag (%s), rule (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID:"Invalid variation is mapped to flag (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_VARIATION:"%s: Variation %s is mapped to experiment %s and user %s in the forced variation map.",USER_HAS_NO_VARIATION:"%s: User %s is in no variation of experiment %s.",USER_HAS_NO_FORCED_VARIATION:"%s: User %s is not in the forced variation map.",USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT:"%s: No experiment %s mapped to user %s in the forced variation map.",USER_NOT_IN_ANY_EXPERIMENT:"%s: User %s is not in any experiment of group %s.",USER_NOT_IN_EXPERIMENT:"%s: User %s does not meet conditions to be in experiment %s.",USER_RECEIVED_DEFAULT_VARIABLE_VALUE:'%s: User "%s" is not in any variation or rollout rule. Returning default value for variable "%s" of feature flag "%s".',FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE:'%s: Feature "%s" is not enabled for user %s. Returning the default variable value "%s".',VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE:'%s: Variable "%s" is not used in variation "%s". Returning default value.',USER_RECEIVED_VARIABLE_VALUE:'%s: Got variable value "%s" for variable "%s" of feature flag "%s"',VALID_DATAFILE:"%s: Datafile is valid.",VALID_USER_PROFILE_SERVICE:"%s: Valid user profile service provided.",VARIATION_REMOVED_FOR_USER:"%s: Variation mapped to experiment %s has been removed for user %s.",VARIABLE_REQUESTED_WITH_WRONG_TYPE:'%s: Requested variable type "%s", but variable is of type "%s". Use correct API to retrieve value. Returning None.',VALID_BUCKETING_ID:'%s: BucketingId is valid: "%s"',BUCKETING_ID_NOT_STRING:"%s: BucketingID attribute is not a string. Defaulted to userId",EVALUATING_AUDIENCE:'%s: Starting to evaluate audience "%s" with conditions: %s.',EVALUATING_AUDIENCES_COMBINED:'%s: Evaluating audiences for %s "%s": %s.',AUDIENCE_EVALUATION_RESULT:'%s: Audience "%s" evaluated to %s.',AUDIENCE_EVALUATION_RESULT_COMBINED:"%s: Audiences for %s %s collectively evaluated to %s.",MISSING_ATTRIBUTE_VALUE:'%s: Audience condition %s evaluated to UNKNOWN because no value was passed for user attribute "%s".',UNEXPECTED_CONDITION_VALUE:"%s: Audience condition %s evaluated to UNKNOWN because the condition value is not supported.",UNEXPECTED_TYPE:'%s: Audience condition %s evaluated to UNKNOWN because a value of type "%s" was passed for user attribute "%s".',UNEXPECTED_TYPE_NULL:'%s: Audience condition %s evaluated to UNKNOWN because a null value was passed for user attribute "%s".',UNKNOWN_CONDITION_TYPE:"%s: Audience condition %s has an unknown condition type. You may need to upgrade to a newer release of the Optimizely SDK.",UNKNOWN_MATCH_TYPE:"%s: Audience condition %s uses an unknown match type. You may need to upgrade to a newer release of the Optimizely SDK.",UPDATED_OPTIMIZELY_CONFIG:"%s: Updated Optimizely config to revision %s (project id %s)",OUT_OF_BOUNDS:'%s: Audience condition %s evaluated to UNKNOWN because the number value for user attribute "%s" is not in the range [-2^53, +2^53].',UNABLE_TO_ATTACH_UNLOAD:'%s: unable to bind optimizely.close() to page unload event: "%s"'},A={BOT_FILTERING:"$opt_bot_filtering",BUCKETING_ID:"$opt_bucketing_id",STICKY_BUCKETING_KEY:"$opt_experiment_bucket_map",USER_AGENT:"$opt_user_agent",FORCED_DECISION_NULL_RULE_KEY:"$opt_null_rule_key"},N={AB_TEST:"ab-test",FEATURE:"feature",FEATURE_TEST:"feature-test",FEATURE_VARIABLE:"feature-variable",ALL_FEATURE_VARIABLES:"all-feature-variables",FLAG:"flag"},T={FEATURE_TEST:"feature-test",ROLLOUT:"rollout",EXPERIMENT:"experiment"},R={RULE:"rule",EXPERIMENT:"experiment"},S={BOOLEAN:"boolean",DOUBLE:"double",INTEGER:"integer",STRING:"string",JSON:"json"},L={V2:"2",V3:"3",V4:"4"},w={SDK_NOT_READY:"Optimizely SDK not configured properly yet.",FLAG_KEY_INVALID:'No flag was found for key "%s".',VARIABLE_VALUE_INVALID:'Variable value for key "%s" is invalid or wrong type.'};(K=m||(m={})).ACTIVATE="ACTIVATE:experiment, user_id,attributes, variation, event",K.DECISION="DECISION:type, userId, attributes, decisionInfo",K.LOG_EVENT="LOG_EVENT:logEvent",K.OPTIMIZELY_CONFIG_UPDATE="OPTIMIZELY_CONFIG_UPDATE",K.TRACK="TRACK:event_key, user_id, attributes, event_tags, event";var C=Object.freeze({__proto__:null,LOG_LEVEL:I,ERROR_MESSAGES:b,LOG_MESSAGES:O,CONTROL_ATTRIBUTES:A,JAVASCRIPT_CLIENT_ENGINE:"javascript-sdk",NODE_CLIENT_ENGINE:"node-sdk",REACT_CLIENT_ENGINE:"react-sdk",REACT_NATIVE_CLIENT_ENGINE:"react-native-sdk",REACT_NATIVE_JS_CLIENT_ENGINE:"react-native-js-sdk",BROWSER_CLIENT_VERSION:"4.10.0",NODE_CLIENT_VERSION:"4.10.0",DECISION_NOTIFICATION_TYPES:N,DECISION_SOURCES:T,AUDIENCE_EVALUATION_TYPES:R,FEATURE_VARIABLE_TYPES:S,DATAFILE_VERSIONS:L,DECISION_MESSAGES:w,get NOTIFICATION_TYPES(){return m}}),k="CONFIG_VALIDATOR",U=[L.V2,L.V3,L.V4],D=function(e){if("object"==typeof e&&null!==e){var t=e.errorHandler,r=e.eventDispatcher,n=e.logger;if(t&&"function"!=typeof t.handleError)throw Error(E(b.INVALID_ERROR_HANDLER,k));if(r&&"function"!=typeof r.dispatchEvent)throw Error(E(b.INVALID_EVENT_DISPATCHER,k));if(n&&"function"!=typeof n.log)throw Error(E(b.INVALID_LOGGER,k));return!0}throw Error(E(b.INVALID_CONFIG,k))},x=function(e){if(!e)throw Error(E(b.NO_DATAFILE_SPECIFIED,k));if("string"==typeof e)try{e=JSON.parse(e)}catch(e){throw Error(E(b.INVALID_DATAFILE_MALFORMED,k))}if("object"==typeof e&&!Array.isArray(e)&&null!==e&&-1===U.indexOf(e.version))throw Error(E(b.INVALID_DATAFILE_VERSION,k,e.version));return e},P={handleError:function(){}},M={dispatchEvent:function(e,t){var r,n=e.params,i=e.url;"POST"===e.httpVerb?((r=new XMLHttpRequest).open("POST",i,!0),r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=function(){if(4===r.readyState&&t&&"function"==typeof t)try{t({statusCode:r.status})}catch(e){}},r.send(JSON.stringify(n))):(i+="?wxhr=true",n&&(i+="&"+Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&")),(r=new XMLHttpRequest).open("GET",i,!0),r.onreadystatechange=function(){if(4===r.readyState&&t&&"function"==typeof t)try{t({statusCode:r.status})}catch(e){}},r.send())}},F={dispatchEvent:function(e,t){var r=e.params,n=e.url,i=new Blob([JSON.stringify(r)],{type:"application/json"});t({statusCode:navigator.sendBeacon(n,i)?200:500})}},B=function(){function e(){}return e.prototype.log=function(){},e}();function j(e){return new o.ConsoleLogHandler(e)}var K,H,G,$=Object.freeze({__proto__:null,NoOpLogger:B,createLogger:j,createNoOpLogger:function(){return new B}});function z(e,t,r){return{variationKey:null,enabled:!1,variables:{},ruleKey:null,flagKey:e,userContext:t,reasons:r}}(r=H||(H={})).BOOLEAN="boolean",r.DOUBLE="double",r.INTEGER="integer",r.STRING="string",r.JSON="json",(G=t.OptimizelyDecideOption||(t.OptimizelyDecideOption={})).DISABLE_DECISION_EVENT="DISABLE_DECISION_EVENT",G.ENABLED_FLAGS_ONLY="ENABLED_FLAGS_ONLY",G.IGNORE_USER_PROFILE_SERVICE="IGNORE_USER_PROFILE_SERVICE",G.INCLUDE_REASONS="INCLUDE_REASONS",G.EXCLUDE_VARIABLES="EXCLUDE_VARIABLES";var q=function(){function e(e){var t,r=e.optimizely,n=e.userId,i=e.attributes;this.optimizely=r,this.userId=n,this.attributes=null!==(t=c({},i))&&void 0!==t?t:{},this.forcedDecisionsMap={}}return e.prototype.setAttribute=function(e,t){this.attributes[e]=t},e.prototype.getUserId=function(){return this.userId},e.prototype.getAttributes=function(){return c({},this.attributes)},e.prototype.getOptimizely=function(){return this.optimizely},e.prototype.decide=function(e,t){return void 0===t&&(t=[]),this.optimizely.decide(this.cloneUserContext(),e,t)},e.prototype.decideForKeys=function(e,t){return void 0===t&&(t=[]),this.optimizely.decideForKeys(this.cloneUserContext(),e,t)},e.prototype.decideAll=function(e){return void 0===e&&(e=[]),this.optimizely.decideAll(this.cloneUserContext(),e)},e.prototype.trackEvent=function(e,t){this.optimizely.track(e,this.userId,this.attributes,t)},e.prototype.setForcedDecision=function(e,t){var r,n=e.flagKey,i=null!==(r=e.ruleKey)&&void 0!==r?r:A.FORCED_DECISION_NULL_RULE_KEY,o={variationKey:t.variationKey};return this.forcedDecisionsMap[n]||(this.forcedDecisionsMap[n]={}),this.forcedDecisionsMap[n][i]=o,!0},e.prototype.getForcedDecision=function(e){return this.findForcedDecision(e)},e.prototype.removeForcedDecision=function(e){var t,r=null!==(t=e.ruleKey)&&void 0!==t?t:A.FORCED_DECISION_NULL_RULE_KEY,n=e.flagKey,i=!1;return this.forcedDecisionsMap.hasOwnProperty(n)&&(this.forcedDecisionsMap[n].hasOwnProperty(r)&&(delete this.forcedDecisionsMap[n][r],i=!0),0===Object.keys(this.forcedDecisionsMap[n]).length&&delete this.forcedDecisionsMap[n]),i},e.prototype.removeAllForcedDecisions=function(){return this.forcedDecisionsMap={},!0},e.prototype.findForcedDecision=function(e){var t,r=null!==(t=e.ruleKey)&&void 0!==t?t:A.FORCED_DECISION_NULL_RULE_KEY,n=e.flagKey;if(this.forcedDecisionsMap.hasOwnProperty(e.flagKey)){var i=this.forcedDecisionsMap[n];if(i.hasOwnProperty(r))return{variationKey:i[r].variationKey}}return null},e.prototype.cloneUserContext=function(){var t=new e({optimizely:this.getOptimizely(),userId:this.getUserId(),attributes:this.getAttributes()});return Object.keys(this.forcedDecisionsMap).length>0&&(t.forcedDecisionsMap=c({},this.forcedDecisionsMap)),t},e}(),Y=["and","or","not"];function W(e,t){if(Array.isArray(e)){var r=e[0],n=e.slice(1);switch("string"==typeof r&&-1===Y.indexOf(r)&&(r="or",n=e),r){case"and":return function(e,t){var r=!1;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var i=W(e[n],t);if(!1===i)return!1;null===i&&(r=!0)}return!r||null}return null}(n,t);case"not":return function(e,t){if(Array.isArray(e)&&e.length>0){var r=W(e[0],t);return null===r?null:!r}return null}(n,t);default:return function(e,t){var r=!1;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var i=W(e[n],t);if(!0===i)return!0;null===i&&(r=!0)}return!!r&&null}return null}(n,t)}}return t(e)}var X=function(){function e(t,r){this.sdkKey=null!==(n=t.sdkKey)&&void 0!==n?n:"",this.environmentKey=null!==(i=t.environmentKey)&&void 0!==i?i:"",this.attributes=t.attributes,this.audiences=e.getAudiences(t),this.events=t.events,this.revision=t.revision;var n,i,o=(t.featureFlags||[]).reduce(function(e,t){return e[t.id]=t.variables,e},{}),a=e.getVariableIdMap(t),s=e.getExperimentsMapById(t,o,a);this.experimentsMap=e.getExperimentsKeyMap(s),this.featuresMap=e.getFeaturesMap(t,o,s,a),this.datafile=r}return e.prototype.getDatafile=function(){return this.datafile},e.getAudiences=function(e){var t=[],r=[];return(e.typedAudiences||[]).forEach(function(e){t.push({id:e.id,conditions:JSON.stringify(e.conditions),name:e.name}),r.push(e.id)}),(e.audiences||[]).forEach(function(e){-1===r.indexOf(e.id)&&"$opt_dummy_audience"!=e.id&&t.push({id:e.id,conditions:JSON.stringify(e.conditions),name:e.name})}),t},e.getSerializedAudiences=function(t,r){var n="";if(t){var i="";t.forEach(function(t){var o="";if(t instanceof Array)o="("+(o=e.getSerializedAudiences(t,r))+")";else if(Y.indexOf(t)>-1)i=t.toUpperCase();else{var a=r[t]?r[t].name:t;n||"NOT"===i?(i=""===i?"OR":i,n=""===n?i+' "'+r[t].name+'"':n.concat(" "+i+' "'+a+'"')):n='"'+a+'"'}""!==o&&(""!==n||"NOT"===i?(i=""===i?"OR":i,n=""===n?i+" "+o:n.concat(" "+i+" "+o)):n=n.concat(o))})}return n},e.getExperimentAudiences=function(t,r){return t.audienceConditions?e.getSerializedAudiences(t.audienceConditions,r.audiencesById):""},e.mergeFeatureVariables=function(e,t,r,n,i){var o=(e[r]||[]).reduce(function(e,t){return e[t.key]={id:t.id,key:t.key,type:t.type,value:t.defaultValue},e},{});return(n||[]).forEach(function(e){var r=t[e.id],n={id:e.id,key:r.key,type:r.type,value:i?e.value:r.defaultValue};o[r.key]=n}),o},e.getVariationsMap=function(t,r,n,i){return t.reduce(function(t,o){var a=e.mergeFeatureVariables(r,n,i,o.variables,o.featureEnabled);return t[o.key]={id:o.id,key:o.key,featureEnabled:o.featureEnabled,variablesMap:a},t},{})},e.getVariableIdMap=function(e){return(e.featureFlags||[]).reduce(function(e,t){return t.variables.forEach(function(t){e[t.id]=t}),e},{})},e.getDeliveryRules=function(t,r,n,i,o){return i.map(function(i){return{id:i.id,key:i.key,audiences:e.getExperimentAudiences(i,t),variationsMap:e.getVariationsMap(i.variations,r,o,n)}})},e.getRolloutExperimentIds=function(e){var t=[];return(e||[]).forEach(function(e){e.experiments.forEach(function(e){t.push(e.id)})}),t},e.getExperimentsMapById=function(t,r,n){var i=this.getRolloutExperimentIds(t.rollouts);return(t.experiments||[]).reduce(function(o,a){if(-1===i.indexOf(a.id)){var s=t.experimentFeatureMap[a.id],l="";s&&s.length>0&&(l=s[0]);var u=e.getVariationsMap(a.variations,r,n,l.toString());o[a.id]={id:a.id,key:a.key,audiences:e.getExperimentAudiences(a,t),variationsMap:u}}return o},{})},e.getExperimentsKeyMap=function(e){var t={};for(var r in e){var n=e[r];t[n.key]=n}return t},e.getFeaturesMap=function(t,r,n,i){var o={};return t.featureFlags.forEach(function(a){var s={},l=[];a.experimentIds.forEach(function(e){var t=n[e];t&&(s[t.key]=t),l.push(n[e])});var u=(a.variables||[]).reduce(function(e,t){return e[t.key]={id:t.id,key:t.key,type:t.type,value:t.defaultValue},e},{}),c=[],d=t.rolloutIdMap[a.rolloutId];d&&(c=e.getDeliveryRules(t,r,a.id,d.experiments,i)),o[a.key]={id:a.id,key:a.key,experimentRules:l,deliveryRules:c,experimentsMap:s,variablesMap:u}}),o},e}(),Z="PROJECT_CONFIG",J=function(e,t){void 0===t&&(t=null);var r,n,i,o=((i=f({},e)).audiences=(e.audiences||[]).map(function(e){return f({},e)}),i.experiments=(e.experiments||[]).map(function(e){return f({},e)}),i.featureFlags=(e.featureFlags||[]).map(function(e){return f({},e)}),i.groups=(e.groups||[]).map(function(e){var t=f({},e);return t.experiments=(e.experiments||[]).map(function(e){return f({},e)}),t}),i.rollouts=(e.rollouts||[]).map(function(e){var t=f({},e);return t.experiments=(e.experiments||[]).map(function(e){return f({},e)}),t}),i.environmentKey=null!==(r=e.environmentKey)&&void 0!==r?r:"",i.sdkKey=null!==(n=e.sdkKey)&&void 0!==n?n:"",i);return o.__datafileStr=null===t?JSON.stringify(e):t,(o.audiences||[]).forEach(function(e){e.conditions=JSON.parse(e.conditions)}),o.audiencesById=p(o.audiences,"id"),f(o.audiencesById,p(o.typedAudiences,"id")),o.attributeKeyMap=p(o.attributes,"key"),o.eventKeyMap=p(o.events,"key"),o.groupIdMap=p(o.groups,"id"),Object.keys(o.groupIdMap||{}).forEach(function(e){(o.groupIdMap[e].experiments||[]).forEach(function(t){o.experiments.push(f(t,{groupId:e}))})}),o.rolloutIdMap=p(o.rollouts||[],"id"),h(o.rolloutIdMap||{}).forEach(function(e){(e.experiments||[]).forEach(function(e){o.experiments.push(e),e.variationKeyMap=p(e.variations,"key")})}),o.experimentKeyMap=p(o.experiments,"key"),o.experimentIdMap=p(o.experiments,"id"),o.variationIdMap={},o.variationVariableUsageMap={},(o.experiments||[]).forEach(function(e){e.variationKeyMap=p(e.variations,"key"),f(o.variationIdMap,p(e.variations,"id")),h(e.variationKeyMap||{}).forEach(function(e){e.variables&&(o.variationVariableUsageMap[e.id]=p(e.variables,"id"))})}),o.experimentFeatureMap={},o.featureKeyMap=p(o.featureFlags||[],"key"),h(o.featureKeyMap||{}).forEach(function(e){e.variables.forEach(function(e){e.type===S.STRING&&e.subType===S.JSON&&(e.type=S.JSON,delete e.subType)}),e.variableKeyMap=p(e.variables,"key"),(e.experimentIds||[]).forEach(function(t){o.experimentFeatureMap[t]?o.experimentFeatureMap[t].push(e.id):o.experimentFeatureMap[t]=[e.id]})}),o.flagRulesMap={},(o.featureFlags||[]).forEach(function(e){var t=[];e.experimentIds.forEach(function(e){var r=o.experimentIdMap[e];r&&t.push(r)});var r=o.rolloutIdMap[e.rolloutId];r&&t.push.apply(t,r.experiments),o.flagRulesMap[e.key]=t}),o.flagVariationsMap={},v(o.flagRulesMap||{}).forEach(function(e){var t=e[0],r=e[1],n=[];r.forEach(function(e){e.variations.forEach(function(e){g(n,function(t){return t.id===e.id})||n.push(e)})}),o.flagVariationsMap[t]=n}),o},Q=function(e,t){var r=e.experimentIdMap[t];if(!r)throw Error(E(b.INVALID_EXPERIMENT_ID,Z,t));return r.layerId},ee=function(e,t,r){var n=e.attributeKeyMap[t],i=0===t.indexOf("$opt_");return n?(i&&r.log(I.WARNING,"Attribute %s unexpectedly has reserved prefix %s; using attribute ID instead of reserved attribute name.",t,"$opt_"),n.id):i?t:(r.log(I.DEBUG,b.UNRECOGNIZED_ATTRIBUTE,Z,t),null)},et=function(e,t){var r=e.eventKeyMap[t];return r?r.id:null},er=function(e,t){var r=e.experimentKeyMap[t];if(!r)throw Error(E(b.INVALID_EXPERIMENT_KEY,Z,t));return r.status},en=function(e,t){return e.variationIdMap.hasOwnProperty(t)?e.variationIdMap[t].key:null},ei=function(e,t){if(e.experimentKeyMap.hasOwnProperty(t)){var r=e.experimentKeyMap[t];if(r)return r}throw Error(E(b.EXPERIMENT_KEY_NOT_IN_DATAFILE,Z,t))},eo=function(e,t){var r=e.experimentIdMap[t];if(!r)throw Error(E(b.INVALID_EXPERIMENT_ID,Z,t));return r.trafficAllocation},ea=function(e,t,r){if(e.experimentIdMap.hasOwnProperty(t)){var n=e.experimentIdMap[t];if(n)return n}return r.log(I.ERROR,b.INVALID_EXPERIMENT_ID,Z,t),null},es=function(e,t,r){return e&&g(e.flagVariationsMap[t],function(e){return e.key===r})||null},el=function(e,t,r){if(e.featureKeyMap.hasOwnProperty(t)){var n=e.featureKeyMap[t];if(n)return n}return r.log(I.ERROR,b.FEATURE_NOT_IN_DATAFILE,Z,t),null},eu=function(e){return e.__datafileStr},ec=function(e){try{t=x(e.datafile)}catch(e){return{configObj:null,error:e}}if(e.jsonSchemaValidator)try{e.jsonSchemaValidator.validate(t),e.logger.log(I.INFO,O.VALID_DATAFILE,Z)}catch(e){return{configObj:null,error:e}}else e.logger.log(I.INFO,O.SKIPPING_JSON_VALIDATION,Z);var t,r=[t];return"string"==typeof e.datafile&&r.push(e.datafile),{configObj:J.apply(void 0,r),error:null}},ed=function(e){return!!e.sendFlagDecisions},ef=o.getLogger();function ep(e,t){return e instanceof Error?e.message:t||"Unknown error"}var eh=function(){function e(e){this.updateListeners=[],this.configObj=null,this.optimizelyConfigObj=null,this.datafileManager=null;try{if(this.jsonSchemaValidator=e.jsonSchemaValidator,!e.datafile&&!e.sdkKey){var t=Error(E(b.DATAFILE_AND_SDK_KEY_MISSING,"PROJECT_CONFIG_MANAGER"));return this.readyPromise=Promise.resolve({success:!1,reason:ep(t)}),void ef.error(t)}var r=null;e.datafile&&(r=this.handleNewDatafile(e.datafile)),e.sdkKey&&e.datafileManager?(this.datafileManager=e.datafileManager,this.datafileManager.start(),this.readyPromise=this.datafileManager.onReady().then(this.onDatafileManagerReadyFulfill.bind(this),this.onDatafileManagerReadyReject.bind(this)),this.datafileManager.on("update",this.onDatafileManagerUpdate.bind(this))):this.configObj?this.readyPromise=Promise.resolve({success:!0}):this.readyPromise=Promise.resolve({success:!1,reason:ep(r,"Invalid datafile")})}catch(e){ef.error(e),this.readyPromise=Promise.resolve({success:!1,reason:ep(e,"Error in initialize")})}}return e.prototype.onDatafileManagerReadyFulfill=function(){if(this.datafileManager){var e=this.handleNewDatafile(this.datafileManager.get());return e?{success:!1,reason:ep(e)}:{success:!0}}return{success:!1,reason:ep(null,"Datafile manager is not provided")}},e.prototype.onDatafileManagerReadyReject=function(e){return{success:!1,reason:ep(e,"Failed to become ready")}},e.prototype.onDatafileManagerUpdate=function(){this.datafileManager&&this.handleNewDatafile(this.datafileManager.get())},e.prototype.handleNewDatafile=function(e){var t=ec({datafile:e,jsonSchemaValidator:this.jsonSchemaValidator,logger:ef}),r=t.configObj,n=t.error;if(n)ef.error(n);else{var i=this.configObj?this.configObj.revision:"null";r&&i!==r.revision&&(this.configObj=r,this.optimizelyConfigObj=null,this.updateListeners.forEach(function(e){return e(r)}))}return n},e.prototype.getConfig=function(){return this.configObj},e.prototype.getOptimizelyConfig=function(){return!this.optimizelyConfigObj&&this.configObj&&(this.optimizelyConfigObj=new X(this.configObj,eu(this.configObj))),this.optimizelyConfigObj},e.prototype.onReady=function(){return this.readyPromise},e.prototype.onUpdate=function(e){var t=this;return this.updateListeners.push(e),function(){var r=t.updateListeners.indexOf(e);r>-1&&t.updateListeners.splice(r,1)}},e.prototype.stop=function(){this.datafileManager&&this.datafileManager.stop(),this.updateListeners=[]},e}(),ev=function(e){var t=[],r=e.experimentIdMap[e.experimentId].groupId;if(r){var n=e.groupIdMap[r];if(!n)throw Error(E(b.INVALID_GROUP_ID,"BUCKETER",r));if("random"===n.policy){var i=eg(n,e.bucketingId,e.userId,e.logger);if(null===i)return e.logger.log(I.INFO,O.USER_NOT_IN_ANY_EXPERIMENT,"BUCKETER",e.userId,r),t.push([O.USER_NOT_IN_ANY_EXPERIMENT,"BUCKETER",e.userId,r]),{result:null,reasons:t};if(i!==e.experimentId)return e.logger.log(I.INFO,O.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",e.userId,e.experimentKey,r),t.push([O.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",e.userId,e.experimentKey,r]),{result:null,reasons:t};e.logger.log(I.INFO,O.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",e.userId,e.experimentKey,r),t.push([O.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",e.userId,e.experimentKey,r])}}var o=eE(""+e.bucketingId+e.experimentId);e.logger.log(I.DEBUG,O.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,"BUCKETER",o,e.userId),t.push([O.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,"BUCKETER",o,e.userId]);var a=ey(o,e.trafficAllocationConfig);return null===a||e.variationIdMap[a]?{result:a,reasons:t}:(a&&(e.logger.log(I.WARNING,O.INVALID_VARIATION_ID,"BUCKETER"),t.push([O.INVALID_VARIATION_ID,"BUCKETER"])),{result:null,reasons:t})},eg=function(e,t,r,n){var i=eE(""+t+e.id);return n.log(I.DEBUG,O.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,"BUCKETER",i,r),ey(i,e.trafficAllocation)},ey=function(e,t){for(var r=0;r<t.length;r++)if(e<t[r].endOfRange)return t[r].entityId;return null},eE=function(e){try{var t=l.v3(e,1)/4294967296;return Math.floor(1e4*t)}catch(t){throw Error(E(b.INVALID_BUCKETING_ID,"BUCKETER",e,t.message))}},em=o.getLogger();function e_(e){return/^\d+$/.test(e)}function eI(e){var t=e.indexOf("-"),r=e.indexOf("+");return!(t<0)&&(r<0||t<r)}function eb(e){var t=e.indexOf("-"),r=e.indexOf("+");return!(r<0)&&(t<0||r<t)}function eO(e){var t=e,r="";if(/\s/.test(e))return em.warn(O.UNKNOWN_MATCH_TYPE,"SEMANTIC VERSION",e),null;if(eI(e)?(t=e.substring(0,e.indexOf("-")),r=e.substring(e.indexOf("-")+1)):eb(e)&&(t=e.substring(0,e.indexOf("+")),r=e.substring(e.indexOf("+")+1)),"string"!=typeof t||"string"!=typeof r)return null;var n=t.split(".").length-1;if(n>2)return em.warn(O.UNKNOWN_MATCH_TYPE,"SEMANTIC VERSION",e),null;var i=t.split(".");if(i.length!=n+1)return em.warn(O.UNKNOWN_MATCH_TYPE,"SEMANTIC VERSION",e),null;for(var o=0;o<i.length;o++)if(!e_(i[o]))return em.warn(O.UNKNOWN_MATCH_TYPE,"SEMANTIC VERSION",e),null;return r&&i.push(r),i}var eA="CUSTOM_ATTRIBUTE_CONDITION_EVALUATOR",eN=o.getLogger(),eT=["exact","exists","gt","ge","lt","le","substring","semver_eq","semver_lt","semver_le","semver_gt","semver_ge"],eR={};function eS(e){return"string"==typeof e||"boolean"==typeof e||_.isNumber(e)}function eL(e,t){var r=e.value,i=void 0===r?"undefined":(0,n._)(r),o=e.name,a=t[o],s=void 0===a?"undefined":(0,n._)(a);return!eS(r)||_.isNumber(r)&&!_.isSafeInteger(r)?(eN.warn(O.UNEXPECTED_CONDITION_VALUE,eA,JSON.stringify(e)),null):null===a?(eN.debug(O.UNEXPECTED_TYPE_NULL,eA,JSON.stringify(e),o),null):eS(a)&&i===s?_.isNumber(a)&&!_.isSafeInteger(a)?(eN.warn(O.OUT_OF_BOUNDS,eA,JSON.stringify(e),o),null):r===a:(eN.warn(O.UNEXPECTED_TYPE,eA,JSON.stringify(e),s,o),null)}function ew(e,t){var r=e.name,i=t[r],o=void 0===i?"undefined":(0,n._)(i),a=e.value;return null!==a&&_.isSafeInteger(a)?null===i?(eN.debug(O.UNEXPECTED_TYPE_NULL,eA,JSON.stringify(e),r),!1):_.isNumber(i)?!!_.isSafeInteger(i)||(eN.warn(O.OUT_OF_BOUNDS,eA,JSON.stringify(e),r),!1):(eN.warn(O.UNEXPECTED_TYPE,eA,JSON.stringify(e),o,r),!1):(eN.warn(O.UNEXPECTED_CONDITION_VALUE,eA,JSON.stringify(e)),!1)}function eC(e,t){var r=e.name,i=t[r],o=void 0===i?"undefined":(0,n._)(i),a=e.value;return"string"!=typeof a?(eN.warn(O.UNEXPECTED_CONDITION_VALUE,eA,JSON.stringify(e)),null):null===i?(eN.debug(O.UNEXPECTED_TYPE_NULL,eA,JSON.stringify(e),r),null):"string"!=typeof i?(eN.warn(O.UNEXPECTED_TYPE,eA,JSON.stringify(e),o,r),null):function(e,t){var r=eO(t),n=eO(e);if(!r||!n)return null;for(var i=r.length,o=0;o<n.length;o++){if(i<=o)return eI(e)||eb(e)?1:-1;if(e_(r[o])){var a=parseInt(r[o]),s=parseInt(n[o]);if(a>s)return 1;if(a<s)return -1}else{if(r[o]<n[o])return eI(e)&&!eI(t)?1:-1;if(r[o]>n[o])return!eI(e)&&eI(t)?-1:1}}return eI(t)&&!eI(e)?-1:0}(a,i)}eR.exact=eL,eR.exists=function(e,t){return null!=t[e.name]},eR.gt=function(e,t){var r=t[e.name],n=e.value;return ew(e,t)&&null!==n?r>n:null},eR.ge=function(e,t){var r=t[e.name],n=e.value;return ew(e,t)&&null!==n?r>=n:null},eR.lt=function(e,t){var r=t[e.name],n=e.value;return ew(e,t)&&null!==n?r<n:null},eR.le=function(e,t){var r=t[e.name],n=e.value;return ew(e,t)&&null!==n?r<=n:null},eR.substring=function(e,t){var r=e.name,i=t[e.name],o=void 0===i?"undefined":(0,n._)(i),a=e.value;return"string"!=typeof a?(eN.warn(O.UNEXPECTED_CONDITION_VALUE,eA,JSON.stringify(e)),null):null===i?(eN.debug(O.UNEXPECTED_TYPE_NULL,eA,JSON.stringify(e),r),null):"string"!=typeof i?(eN.warn(O.UNEXPECTED_TYPE,eA,JSON.stringify(e),o,r),null):-1!==i.indexOf(a)},eR.semver_eq=function(e,t){var r=eC(e,t);return null===r?null:0===r},eR.semver_gt=function(e,t){var r=eC(e,t);return null===r?null:r>0},eR.semver_ge=function(e,t){var r=eC(e,t);return null===r?null:r>=0},eR.semver_lt=function(e,t){var r=eC(e,t);return null===r?null:r<0},eR.semver_le=function(e,t){var r=eC(e,t);return null===r?null:r<=0};var ek=Object.freeze({__proto__:null,evaluate:function(e,t){var r=e.match;if(void 0!==r&&-1===eT.indexOf(r))return eN.warn(O.UNKNOWN_MATCH_TYPE,eA,JSON.stringify(e)),null;var n=e.name;return t.hasOwnProperty(n)||"exists"==r?(r&&eR[r]||eL)(e,t):(eN.debug(O.MISSING_ATTRIBUTE_VALUE,eA,JSON.stringify(e),n),null)}}),eU=o.getLogger(),eD=function(){function e(e){this.typeToEvaluatorMap=_.assign({},e,{custom_attribute:ek})}return e.prototype.evaluate=function(e,t,r){var n=this;return void 0===r&&(r={}),!e||0===e.length||!!W(e,function(e){var i=t[e];if(i){eU.log(I.DEBUG,O.EVALUATING_AUDIENCE,"AUDIENCE_EVALUATOR",e,JSON.stringify(i.conditions));var o=W(i.conditions,n.evaluateConditionWithUserAttributes.bind(n,r)),a=null===o?"UNKNOWN":o.toString().toUpperCase();return eU.log(I.DEBUG,O.AUDIENCE_EVALUATION_RESULT,"AUDIENCE_EVALUATOR",e,a),o}return null})},e.prototype.evaluateConditionWithUserAttributes=function(e,t){var r=this.typeToEvaluatorMap[t.type];if(!r)return eU.log(I.WARNING,O.UNKNOWN_CONDITION_TYPE,"AUDIENCE_EVALUATOR",JSON.stringify(t)),null;try{return r.evaluate(t,e)}catch(e){eU.log(I.ERROR,b.CONDITION_EVALUATOR_ERROR,"AUDIENCE_EVALUATOR",t.type,e.message)}return null},e}();function ex(e){return"string"==typeof e&&""!==e}var eP="DECISION_SERVICE",eM=function(){function e(e){this.audienceEvaluator=new eD(e.UNSTABLE_conditionEvaluators),this.forcedVariationMap={},this.logger=e.logger,this.userProfileService=e.userProfileService||null}return e.prototype.getVariation=function(e,r,n,i){void 0===i&&(i={});var o=n.getUserId(),a=n.getAttributes(),s=this.getBucketingId(o,a),l=[],u=r.key;if(!this.checkIfExperimentIsActive(e,u))return this.logger.log(I.INFO,O.EXPERIMENT_NOT_RUNNING,eP,u),l.push([O.EXPERIMENT_NOT_RUNNING,eP,u]),{result:null,reasons:l};var c=this.getForcedVariation(e,u,o);l.push.apply(l,c.reasons);var d=c.result;if(d)return{result:d,reasons:l};var f=this.getWhitelistedVariation(r,o);l.push.apply(l,f.reasons);var p=f.result;if(p)return{result:p.key,reasons:l};var h=i[t.OptimizelyDecideOption.IGNORE_USER_PROFILE_SERVICE],v=this.resolveExperimentBucketMap(o,a);if(!h&&(p=this.getStoredVariation(e,r,o,v)))return this.logger.log(I.INFO,O.RETURNING_STORED_VARIATION,eP,p.key,u,o),l.push([O.RETURNING_STORED_VARIATION,eP,p.key,u,o]),{result:p.key,reasons:l};var g=this.checkIfUserIsInAudience(e,r,R.EXPERIMENT,a,"");if(l.push.apply(l,g.reasons),!g.result)return this.logger.log(I.INFO,O.USER_NOT_IN_EXPERIMENT,eP,o,u),l.push([O.USER_NOT_IN_EXPERIMENT,eP,o,u]),{result:null,reasons:l};var y=ev(this.buildBucketerParams(e,r,s,o));l.push.apply(l,y.reasons);var E=y.result;return E&&(p=e.variationIdMap[E]),p?(this.logger.log(I.INFO,O.USER_HAS_VARIATION,eP,o,p.key,u),l.push([O.USER_HAS_VARIATION,eP,o,p.key,u]),h||this.saveUserProfile(r,p,o,v),{result:p.key,reasons:l}):(this.logger.log(I.DEBUG,O.USER_HAS_NO_VARIATION,eP,o,u),l.push([O.USER_HAS_NO_VARIATION,eP,o,u]),{result:null,reasons:l})},e.prototype.resolveExperimentBucketMap=function(e,t){t=t||{};var r=this.getUserProfile(e)||{},n=t[A.STICKY_BUCKETING_KEY];return _.assign({},r.experiment_bucket_map,n)},e.prototype.checkIfExperimentIsActive=function(e,t){return"Running"===er(e,t)},e.prototype.getWhitelistedVariation=function(e,t){var r=[];if(e.forcedVariations&&e.forcedVariations.hasOwnProperty(t)){var n=e.forcedVariations[t];return e.variationKeyMap.hasOwnProperty(n)?(this.logger.log(I.INFO,O.USER_FORCED_IN_VARIATION,eP,t,n),r.push([O.USER_FORCED_IN_VARIATION,eP,t,n]),{result:e.variationKeyMap[n],reasons:r}):(this.logger.log(I.ERROR,O.FORCED_BUCKETING_FAILED,eP,n,t),r.push([O.FORCED_BUCKETING_FAILED,eP,n,t]),{result:null,reasons:r})}return{result:null,reasons:r}},e.prototype.checkIfUserIsInAudience=function(e,t,r,n,i){var o=[],a=function(e,t){var r=e.experimentIdMap[t];if(!r)throw Error(E(b.INVALID_EXPERIMENT_ID,Z,t));return r.audienceConditions||r.audienceIds}(e,t.id),s=e.audiencesById;this.logger.log(I.DEBUG,O.EVALUATING_AUDIENCES_COMBINED,eP,r,i||t.key,JSON.stringify(a)),o.push([O.EVALUATING_AUDIENCES_COMBINED,eP,r,i||t.key,JSON.stringify(a)]);var l=this.audienceEvaluator.evaluate(a,s,n);return this.logger.log(I.INFO,O.AUDIENCE_EVALUATION_RESULT_COMBINED,eP,r,i||t.key,l.toString().toUpperCase()),o.push([O.AUDIENCE_EVALUATION_RESULT_COMBINED,eP,r,i||t.key,l.toString().toUpperCase()]),{result:l,reasons:o}},e.prototype.buildBucketerParams=function(e,t,r,n){return{bucketingId:r,experimentId:t.id,experimentKey:t.key,experimentIdMap:e.experimentIdMap,experimentKeyMap:e.experimentKeyMap,groupIdMap:e.groupIdMap,logger:this.logger,trafficAllocationConfig:eo(e,t.id),userId:n,variationIdMap:e.variationIdMap}},e.prototype.getStoredVariation=function(e,t,r,n){if(n.hasOwnProperty(t.id)){var i=n[t.id],o=i.variation_id;if(e.variationIdMap.hasOwnProperty(o))return e.variationIdMap[i.variation_id];this.logger.log(I.INFO,O.SAVED_VARIATION_NOT_FOUND,eP,r,o,t.key)}return null},e.prototype.getUserProfile=function(e){if(!this.userProfileService)return{user_id:e,experiment_bucket_map:{}};try{return this.userProfileService.lookup(e)}catch(t){this.logger.log(I.ERROR,b.USER_PROFILE_LOOKUP_ERROR,eP,e,t.message)}return null},e.prototype.saveUserProfile=function(e,t,r,n){if(this.userProfileService)try{n[e.id]={variation_id:t.id},this.userProfileService.save({user_id:r,experiment_bucket_map:n}),this.logger.log(I.INFO,O.SAVED_VARIATION,eP,t.key,e.key,r)}catch(e){this.logger.log(I.ERROR,b.USER_PROFILE_SAVE_ERROR,eP,r,e.message)}},e.prototype.getVariationForFeature=function(e,t,r,n){void 0===n&&(n={});var i=[],o=this.getVariationForFeatureExperiment(e,t,r,n);i.push.apply(i,o.reasons);var a=o.result;if(null!==a.variation)return{result:a,reasons:i};var s=this.getVariationForRollout(e,t,r);i.push.apply(i,s.reasons);var l=s.result,u=r.getUserId();return l.variation?(this.logger.log(I.DEBUG,O.USER_IN_ROLLOUT,eP,u,t.key),i.push([O.USER_IN_ROLLOUT,eP,u,t.key])):(this.logger.log(I.DEBUG,O.USER_NOT_IN_ROLLOUT,eP,u,t.key),i.push([O.USER_NOT_IN_ROLLOUT,eP,u,t.key])),{result:l,reasons:i}},e.prototype.getVariationForFeatureExperiment=function(e,t,r,n){void 0===n&&(n={});var i,o,a=[],s=null;if(t.experimentIds.length>0)for(o=0;o<t.experimentIds.length;o++){var l=ea(e,t.experimentIds[o],this.logger);if(l&&(i=this.getVariationFromExperimentRule(e,t.key,l,r,n),a.push.apply(a,i.reasons),s=i.result)){var u=null;return(u=l.variationKeyMap[s])||(u=es(e,t.key,s)),{result:{experiment:l,variation:u,decisionSource:T.FEATURE_TEST},reasons:a}}}else this.logger.log(I.DEBUG,O.FEATURE_HAS_NO_EXPERIMENTS,eP,t.key),a.push([O.FEATURE_HAS_NO_EXPERIMENTS,eP,t.key]);return{result:{experiment:null,variation:null,decisionSource:T.FEATURE_TEST},reasons:a}},e.prototype.getVariationForRollout=function(e,t,r){var n=[];if(!t.rolloutId)return this.logger.log(I.DEBUG,O.NO_ROLLOUT_EXISTS,eP,t.key),n.push([O.NO_ROLLOUT_EXISTS,eP,t.key]),{result:{experiment:null,variation:null,decisionSource:T.ROLLOUT},reasons:n};var i=e.rolloutIdMap[t.rolloutId];if(!i)return this.logger.log(I.ERROR,b.INVALID_ROLLOUT_ID,eP,t.rolloutId,t.key),n.push([b.INVALID_ROLLOUT_ID,eP,t.rolloutId,t.key]),{result:{experiment:null,variation:null,decisionSource:T.ROLLOUT},reasons:n};var o,a,s,l=i.experiments;if(0===l.length)return this.logger.log(I.ERROR,O.ROLLOUT_HAS_NO_EXPERIMENTS,eP,t.rolloutId),n.push([O.ROLLOUT_HAS_NO_EXPERIMENTS,eP,t.rolloutId]),{result:{experiment:null,variation:null,decisionSource:T.ROLLOUT},reasons:n};for(var u=0;u<l.length;){if(o=this.getVariationFromDeliveryRule(e,t.key,l,u,r),n.push.apply(n,o.reasons),s=o.result,a=o.skipToEveryoneElse,s)return{result:{experiment:e.experimentIdMap[l[u].id],variation:s,decisionSource:T.ROLLOUT},reasons:n};u=a?l.length-1:u+1}return{result:{experiment:null,variation:null,decisionSource:T.ROLLOUT},reasons:n}},e.prototype.getBucketingId=function(e,t){var r=e;return null!=t&&"object"==typeof t&&t.hasOwnProperty(A.BUCKETING_ID)&&("string"==typeof t[A.BUCKETING_ID]?(r=t[A.BUCKETING_ID],this.logger.log(I.DEBUG,O.VALID_BUCKETING_ID,eP,r)):this.logger.log(I.WARNING,O.BUCKETING_ID_NOT_STRING,eP)),r},e.prototype.findValidatedForcedDecision=function(e,t,r,n){var i,o=[],a=t.getForcedDecision({flagKey:r,ruleKey:n}),s=null,l=t.getUserId();return e&&a&&((s=es(e,r,i=a.variationKey))?n?(this.logger.log(I.INFO,O.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED,i,r,n,l),o.push([O.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED,i,r,n,l])):(this.logger.log(I.INFO,O.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED,i,r,l),o.push([O.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED,i,r,l])):n?(this.logger.log(I.INFO,O.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID,r,n,l),o.push([O.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID,r,n,l])):(this.logger.log(I.INFO,O.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID,r,l),o.push([O.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID,r,l]))),{result:s,reasons:o}},e.prototype.removeForcedVariation=function(e,t,r){if(!e)throw Error(E(b.INVALID_USER_ID,eP));if(!this.forcedVariationMap.hasOwnProperty(e))throw Error(E(b.USER_NOT_IN_FORCED_VARIATION,eP,e));delete this.forcedVariationMap[e][t],this.logger.log(I.DEBUG,O.VARIATION_REMOVED_FOR_USER,eP,r,e)},e.prototype.setInForcedVariationMap=function(e,t,r){this.forcedVariationMap.hasOwnProperty(e)||(this.forcedVariationMap[e]={}),this.forcedVariationMap[e][t]=r,this.logger.log(I.DEBUG,O.USER_MAPPED_TO_FORCED_VARIATION,eP,r,t,e)},e.prototype.getForcedVariation=function(e,t,r){var n,i=[],o=this.forcedVariationMap[r];if(!o)return this.logger.log(I.DEBUG,O.USER_HAS_NO_FORCED_VARIATION,eP,r),{result:null,reasons:i};try{var a=ei(e,t);if(!a.hasOwnProperty("id"))return this.logger.log(I.ERROR,b.IMPROPERLY_FORMATTED_EXPERIMENT,eP,t),i.push([b.IMPROPERLY_FORMATTED_EXPERIMENT,eP,t]),{result:null,reasons:i};n=a.id}catch(e){return this.logger.log(I.ERROR,e.message),i.push(e.message),{result:null,reasons:i}}var s=o[n];if(!s)return this.logger.log(I.DEBUG,O.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,eP,t,r),{result:null,reasons:i};var l=en(e,s);return l?(this.logger.log(I.DEBUG,O.USER_HAS_FORCED_VARIATION,eP,l,t,r),i.push([O.USER_HAS_FORCED_VARIATION,eP,l,t,r])):this.logger.log(I.DEBUG,O.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,eP,t,r),{result:l,reasons:i}},e.prototype.setForcedVariation=function(e,t,r,n){if(null!=n&&!ex(n))return this.logger.log(I.ERROR,b.INVALID_VARIATION_KEY,eP),!1;try{var i,o,a=ei(e,t);if(!a.hasOwnProperty("id"))return this.logger.log(I.ERROR,b.IMPROPERLY_FORMATTED_EXPERIMENT,eP,t),!1;o=a.id}catch(e){return this.logger.log(I.ERROR,e.message),!1}if(null==n)try{return this.removeForcedVariation(r,o,t),!0}catch(e){return this.logger.log(I.ERROR,e.message),!1}var s=(i=e.experimentKeyMap[t]).variationKeyMap.hasOwnProperty(n)?i.variationKeyMap[n].id:null;if(!s)return this.logger.log(I.ERROR,b.NO_VARIATION_FOR_EXPERIMENT_KEY,eP,n,t),!1;try{return this.setInForcedVariationMap(r,o,s),!0}catch(e){return this.logger.log(I.ERROR,e.message),!1}},e.prototype.getVariationFromExperimentRule=function(e,t,r,n,i){void 0===i&&(i={});var o=[],a=this.findValidatedForcedDecision(e,n,t,r.key);o.push.apply(o,a.reasons);var s=a.result;if(s)return{result:s.key,reasons:o};var l=this.getVariation(e,r,n,i);return o.push.apply(o,l.reasons),{result:l.result,reasons:o}},e.prototype.getVariationFromDeliveryRule=function(e,t,r,n,i){var o=[],a=!1,s=r[n],l=this.findValidatedForcedDecision(e,i,t,s.key);o.push.apply(o,l.reasons);var u=l.result;if(u)return{result:u,reasons:o,skipToEveryoneElse:a};var c,d,f=i.getUserId(),p=i.getAttributes(),h=this.getBucketingId(f,p),v=n===r.length-1,g=v?"Everyone Else":n+1,y=null,E=this.checkIfUserIsInAudience(e,s,R.RULE,p,g);return o.push.apply(o,E.reasons),E.result?(this.logger.log(I.DEBUG,O.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,eP,f,g),o.push([O.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,eP,f,g]),d=ev(this.buildBucketerParams(e,s,h,f)),o.push.apply(o,d.reasons),(c=d.result)&&(y=e.variationIdMap.hasOwnProperty(c)?e.variationIdMap[c]:null),y?(this.logger.log(I.DEBUG,O.USER_BUCKETED_INTO_TARGETING_RULE,eP,f,g),o.push([O.USER_BUCKETED_INTO_TARGETING_RULE,eP,f,g])):v||(this.logger.log(I.DEBUG,O.USER_NOT_BUCKETED_INTO_TARGETING_RULE,eP,f,g),o.push([O.USER_NOT_BUCKETED_INTO_TARGETING_RULE,eP,f,g]),a=!0)):(this.logger.log(I.DEBUG,O.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,eP,f,g),o.push([O.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,eP,f,g])),{result:y,reasons:o,skipToEveryoneElse:a}},e}();function eV(e,t){if(e.hasOwnProperty("revenue")){var r=e.revenue,n=void 0;return"string"==typeof r?isNaN(n=parseInt(r))?(t.log(I.INFO,O.FAILED_TO_PARSE_REVENUE,"EVENT_TAG_UTILS",r),null):(t.log(I.INFO,O.PARSED_REVENUE_VALUE,"EVENT_TAG_UTILS",n),n):"number"==typeof r?(n=r,t.log(I.INFO,O.PARSED_REVENUE_VALUE,"EVENT_TAG_UTILS",n),n):null}return null}function eF(e,t){if(e.hasOwnProperty("value")){var r=e.value,n=void 0;return"string"==typeof r?isNaN(n=parseFloat(r))?(t.log(I.INFO,O.FAILED_TO_PARSE_VALUE,"EVENT_TAG_UTILS",r),null):(t.log(I.INFO,O.PARSED_NUMERIC_VALUE,"EVENT_TAG_UTILS",n),n):"number"==typeof r?(n=r,t.log(I.INFO,O.PARSED_NUMERIC_VALUE,"EVENT_TAG_UTILS",n),n):null}return null}function eB(e,t){return"string"==typeof e&&("string"==typeof t||"boolean"==typeof t||_.isNumber(t)&&_.isSafeInteger(t))}var ej="https://logx.optimizely.com/v1/events";function eK(e){var t=e.attributes,r=e.userId,n=e.clientEngine,i=e.clientVersion,o=e.configObj,a=e.logger,s=!!o.anonymizeIP&&o.anonymizeIP,l=o.botFiltering,u={account_id:o.accountId,project_id:o.projectId,visitors:[{snapshots:[],visitor_id:r,attributes:[]}],revision:o.revision,client_name:n,client_version:i,anonymize_ip:s,enrich_decisions:!0};return t&&Object.keys(t||{}).forEach(function(e){if(eB(e,t[e])){var r=ee(o,e,a);r&&u.visitors[0].attributes.push({entity_id:r,key:e,type:"custom",value:t[e]})}}),"boolean"==typeof l&&u.visitors[0].attributes.push({entity_id:A.BOT_FILTERING,key:A.BOT_FILTERING,type:"custom",value:l}),u}function eH(e){var t,r;return null!==(r=null===(t=e.experiment)||void 0===t?void 0:t.key)&&void 0!==r?r:""}function eG(e){var t,r;return null!==(r=null===(t=e.variation)||void 0===t?void 0:t.key)&&void 0!==r?r:""}function e$(e){var t,r;return null!==(r=null===(t=e.variation)||void 0===t?void 0:t.featureEnabled)&&void 0!==r&&r}function ez(e){var t,r;return null!==(r=null===(t=e.experiment)||void 0===t?void 0:t.id)&&void 0!==r?r:null}function eq(e){var t,r;return null!==(r=null===(t=e.variation)||void 0===t?void 0:t.id)&&void 0!==r?r:null}var eY=o.getLogger("EVENT_BUILDER");function eW(e,t){var r=[];return t&&Object.keys(t||{}).forEach(function(n){if(eB(n,t[n])){var i=ee(e,n,eY);i&&r.push({entityId:i,key:n,value:t[n]})}}),r}var eX="USER_PROFILE_SERVICE_VALIDATOR",eZ=function(){function e(e){var r,n=this,i=e.clientEngine;i||(e.logger.log(I.INFO,O.INVALID_CLIENT_ENGINE,"OPTIMIZELY",i),i="node-sdk"),this.clientEngine=i,this.clientVersion=e.clientVersion||"4.10.0",this.errorHandler=e.errorHandler,this.isOptimizelyConfigValid=e.isValidInstance,this.logger=e.logger;var o=null!==(r=e.defaultDecideOptions)&&void 0!==r?r:[];Array.isArray(o)||(this.logger.log(I.DEBUG,O.INVALID_DEFAULT_DECIDE_OPTIONS,"OPTIMIZELY"),o=[]);var a={};o.forEach(function(e){t.OptimizelyDecideOption[e]?a[e]=!0:n.logger.log(I.WARNING,O.UNRECOGNIZED_DECIDE_OPTION,"OPTIMIZELY",e)}),this.defaultDecideOptions=a,this.projectConfigManager=new eh({datafile:e.datafile,jsonSchemaValidator:e.jsonSchemaValidator,sdkKey:e.sdkKey,datafileManager:e.datafileManager}),this.disposeOnUpdate=this.projectConfigManager.onUpdate(function(e){n.logger.log(I.INFO,O.UPDATED_OPTIMIZELY_CONFIG,"OPTIMIZELY",e.revision,e.projectId),n.notificationCenter.sendNotifications(m.OPTIMIZELY_CONFIG_UPDATE)});var s=this.projectConfigManager.onReady(),l=null;if(e.userProfileService)try{(function(e){if("object"==typeof e&&null!==e){if("function"!=typeof e.lookup)throw Error(E(b.INVALID_USER_PROFILE_SERVICE,eX,"Missing function 'lookup'"));if("function"!=typeof e.save)throw Error(E(b.INVALID_USER_PROFILE_SERVICE,eX,"Missing function 'save'"));return!0}throw Error(E(b.INVALID_USER_PROFILE_SERVICE,eX))})(e.userProfileService)&&(l=e.userProfileService,this.logger.log(I.INFO,O.VALID_USER_PROFILE_SERVICE,"OPTIMIZELY"))}catch(e){this.logger.log(I.WARNING,e.message)}this.decisionService=new eM({userProfileService:l,logger:this.logger,UNSTABLE_conditionEvaluators:e.UNSTABLE_conditionEvaluators}),this.notificationCenter=e.notificationCenter,this.eventProcessor=e.eventProcessor;var u=this.eventProcessor.start();this.readyPromise=Promise.all([s,u]).then(function(e){return e[0]}),this.readyTimeouts={},this.nextReadyTimeoutId=0}return e.prototype.isValidInstance=function(){return this.isOptimizelyConfigValid&&!!this.projectConfigManager.getConfig()},e.prototype.activate=function(e,t,r){try{if(!this.isValidInstance())return this.logger.log(I.ERROR,O.INVALID_OBJECT,"OPTIMIZELY","activate"),null;if(!this.validateInputs({experiment_key:e,user_id:t},r))return this.notActivatingExperiment(e,t);var n=this.projectConfigManager.getConfig();if(!n)return null;try{var i=this.getVariation(e,t,r);if(null===i)return this.notActivatingExperiment(e,t);if("Running"!==er(n,e))return this.logger.log(I.DEBUG,O.SHOULD_NOT_DISPATCH_ACTIVATE,"OPTIMIZELY",e),i;var o=ei(n,e),a={experiment:o,variation:o.variationKeyMap[i],decisionSource:T.EXPERIMENT};return this.sendImpressionEvent(a,"",t,!0,r),i}catch(r){return this.logger.log(I.ERROR,r.message),this.logger.log(I.INFO,O.NOT_ACTIVATING_USER,"OPTIMIZELY",t,e),this.errorHandler.handleError(r),null}}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.sendImpressionEvent=function(e,t,r,n,i){var o=this.projectConfigManager.getConfig();if(o){var a,s,l,u,c,d,f,p,h,v,g,y,E,m,I,b=(s=(a={decisionObj:e,flagKey:t,enabled:n,userId:r,userAttributes:i,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:o}).configObj,l=a.decisionObj,u=a.userId,c=a.flagKey,d=a.enabled,f=a.userAttributes,p=a.clientEngine,h=a.clientVersion,v=l.decisionSource,g=eH(l),y=ez(l),E=eG(l),m=eq(l),I=null!==y?Q(s,y):null,{type:"impression",timestamp:_.currentTimestamp(),uuid:_.uuid(),user:{id:u,attributes:eW(s,f)},context:{accountId:s.accountId,projectId:s.projectId,revision:s.revision,clientName:p,clientVersion:h,anonymizeIP:s.anonymizeIP||!1,botFiltering:s.botFiltering},layer:{id:I},experiment:{id:y,key:g},variation:{id:m,key:E},ruleKey:g,flagKey:c,ruleType:v,enabled:d});this.eventProcessor.process(b),this.emitNotificationCenterActivate(e,t,r,n,i)}},e.prototype.emitNotificationCenterActivate=function(e,t,r,n,i){var o=this.projectConfigManager.getConfig();if(o){var a,s=e.decisionSource,l=eH(e),u=ez(e),c=eG(e),d=eq(e);null!==u&&""!==c&&(a=o.experimentIdMap[u]);var f,p,h,v,g,y,E,I,b,O,A,N,T,R=(A=eK(f={attributes:i,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:o,experimentId:u,ruleKey:l,flagKey:t,ruleType:s,userId:r,enabled:n,variationId:d,logger:this.logger}),p=f.configObj,h=f.experimentId,v=f.variationId,g=f.ruleKey,y=f.ruleType,E=f.flagKey,I=f.enabled,b=h?Q(p,h):null,O=v?en(p,v):null,N={decisions:[{campaign_id:b,experiment_id:h,variation_id:v,metadata:{flag_key:E,rule_key:g,rule_type:y,variation_key:O=O||"",enabled:I}}],events:[{entity_id:b,timestamp:_.currentTimestamp(),key:"campaign_activated",uuid:_.uuid()}]},A.visitors[0].snapshots.push(N),{httpVerb:"POST",url:ej,params:A});a&&a.variationKeyMap&&""!==c&&(T=a.variationKeyMap[c]),this.notificationCenter.sendNotifications(m.ACTIVATE,{experiment:a,userId:r,attributes:i,variation:T,logEvent:R})}},e.prototype.track=function(e,t,r,n){try{if(!this.isValidInstance())return void this.logger.log(I.ERROR,O.INVALID_OBJECT,"OPTIMIZELY","track");if(!this.validateInputs({user_id:t,event_key:e},r,n))return;var i,o,a,s,l,u,c,d,f,p,h,v=this.projectConfigManager.getConfig();if(!v)return;if(!v.eventKeyMap.hasOwnProperty(e))return this.logger.log(I.WARNING,O.EVENT_KEY_NOT_FOUND,"OPTIMIZELY",e),void this.logger.log(I.WARNING,O.NOT_TRACKING_USER,"OPTIMIZELY",t);var g=(o=(i={eventKey:e,eventTags:n=this.filterEmptyValues(n),userId:t,userAttributes:r,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:v}).configObj,a=i.userId,s=i.userAttributes,l=i.clientEngine,u=i.clientVersion,c=i.eventKey,d=i.eventTags,f=et(o,c),p=d?eV(d,eY):null,h=d?eF(d,eY):null,{type:"conversion",timestamp:_.currentTimestamp(),uuid:_.uuid(),user:{id:a,attributes:eW(o,s)},context:{accountId:o.accountId,projectId:o.projectId,revision:o.revision,clientName:l,clientVersion:u,anonymizeIP:o.anonymizeIP||!1,botFiltering:o.botFiltering},event:{id:f,key:c},revenue:p,value:h,tags:d});this.logger.log(I.INFO,O.TRACK_EVENT,"OPTIMIZELY",e,t),this.eventProcessor.process(g),this.emitNotificationCenterTrack(e,t,r,n)}catch(e){this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),this.logger.log(I.ERROR,O.NOT_TRACKING_USER,"OPTIMIZELY",t)}},e.prototype.emitNotificationCenterTrack=function(e,t,r,n){try{var i,o,a,s=this.projectConfigManager.getConfig();if(!s)return;var l=(i={attributes:r,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:s,eventKey:e,eventTags:n,logger:this.logger,userId:t},o=eK(i),a=function(e,t,r,n){var i={events:[]},o={entity_id:et(e,t),timestamp:_.currentTimestamp(),uuid:_.uuid(),key:t};if(n){var a=eV(n,r);null!==a&&(o.revenue=a);var s=eF(n,r);null!==s&&(o.value=s),o.tags=n}return i.events.push(o),i}(i.configObj,i.eventKey,i.logger,i.eventTags),o.visitors[0].snapshots=[a],{httpVerb:"POST",url:ej,params:o});this.notificationCenter.sendNotifications(m.TRACK,{eventKey:e,userId:t,attributes:r,eventTags:n,logEvent:l})}catch(e){this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e)}},e.prototype.getVariation=function(e,t,r){try{if(!this.isValidInstance())return this.logger.log(I.ERROR,O.INVALID_OBJECT,"OPTIMIZELY","getVariation"),null;try{if(!this.validateInputs({experiment_key:e,user_id:t},r))return null;var n,i=this.projectConfigManager.getConfig();if(!i)return null;var o=i.experimentKeyMap[e];if(!o)return this.logger.log(I.DEBUG,b.INVALID_EXPERIMENT_KEY,"OPTIMIZELY",e),null;var a=this.decisionService.getVariation(i,o,this.createUserContext(t,r)).result,s=(n=o.id,i.experimentFeatureMap.hasOwnProperty(n)?N.FEATURE_TEST:N.AB_TEST);return this.notificationCenter.sendNotifications(m.DECISION,{type:s,userId:t,attributes:r||{},decisionInfo:{experimentKey:e,variationKey:a}}),a}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),null}}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.setForcedVariation=function(e,t,r){if(!this.validateInputs({experiment_key:e,user_id:t}))return!1;var n=this.projectConfigManager.getConfig();if(!n)return!1;try{return this.decisionService.setForcedVariation(n,e,t,r)}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),!1}},e.prototype.getForcedVariation=function(e,t){if(!this.validateInputs({experiment_key:e,user_id:t}))return null;var r=this.projectConfigManager.getConfig();if(!r)return null;try{return this.decisionService.getForcedVariation(r,e,t).result}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.validateInputs=function(e,t,r){try{if(e.hasOwnProperty("user_id")){var n=e.user_id;if("string"!=typeof n||null===n||"undefined"===n)throw Error(E(b.INVALID_INPUT_FORMAT,"OPTIMIZELY","user_id"));delete e.user_id}return Object.keys(e).forEach(function(t){if(!ex(e[t]))throw Error(E(b.INVALID_INPUT_FORMAT,"OPTIMIZELY",t))}),t&&function(e){if("object"!=typeof e||Array.isArray(e)||null===e)throw Error(E(b.INVALID_ATTRIBUTES,"ATTRIBUTES_VALIDATOR"));Object.keys(e).forEach(function(t){if(void 0===e[t])throw Error(E(b.UNDEFINED_ATTRIBUTE,"ATTRIBUTES_VALIDATOR",t))})}(t),r&&function(e){if("object"!=typeof e||Array.isArray(e)||null===e)throw Error(E(b.INVALID_EVENT_TAGS,"EVENT_TAGS_VALIDATOR"))}(r),!0}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),!1}},e.prototype.notActivatingExperiment=function(e,t){return this.logger.log(I.INFO,O.NOT_ACTIVATING_USER,"OPTIMIZELY",t,e),null},e.prototype.filterEmptyValues=function(e){for(var t in e)e.hasOwnProperty(t)&&(null===e[t]||void 0===e[t])&&delete e[t];return e},e.prototype.isFeatureEnabled=function(e,t,r){try{if(!this.isValidInstance())return this.logger.log(I.ERROR,O.INVALID_OBJECT,"OPTIMIZELY","isFeatureEnabled"),!1;if(!this.validateInputs({feature_key:e,user_id:t},r))return!1;var n=this.projectConfigManager.getConfig();if(!n)return!1;var i=el(n,e,this.logger);if(!i)return!1;var o={},a=this.createUserContext(t,r),s=this.decisionService.getVariationForFeature(n,i,a).result,l=s.decisionSource,u=eH(s),c=eG(s),d=e$(s);l===T.FEATURE_TEST&&(o={experimentKey:u,variationKey:c}),(l===T.FEATURE_TEST||l===T.ROLLOUT&&ed(n))&&this.sendImpressionEvent(s,i.key,t,d,r),!0===d?this.logger.log(I.INFO,O.FEATURE_ENABLED_FOR_USER,"OPTIMIZELY",e,t):(this.logger.log(I.INFO,O.FEATURE_NOT_ENABLED_FOR_USER,"OPTIMIZELY",e,t),d=!1);var f={featureKey:e,featureEnabled:d,source:s.decisionSource,sourceInfo:o};return this.notificationCenter.sendNotifications(m.DECISION,{type:N.FEATURE,userId:t,attributes:r||{},decisionInfo:f}),d}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),!1}},e.prototype.getEnabledFeatures=function(e,t){var r=this;try{var n=[];if(!this.isValidInstance())return this.logger.log(I.ERROR,O.INVALID_OBJECT,"OPTIMIZELY","getEnabledFeatures"),n;if(!this.validateInputs({user_id:e}))return n;var i=this.projectConfigManager.getConfig();return i&&h(i.featureKeyMap).forEach(function(i){r.isFeatureEnabled(i.key,e,t)&&n.push(i.key)}),n}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),[]}},e.prototype.getFeatureVariable=function(e,t,r,n){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,null,r,n):(this.logger.log(I.ERROR,O.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariable"),null)}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.getFeatureVariableForType=function(e,t,r,n,i){if(!this.validateInputs({feature_key:e,variable_key:t,user_id:n},i))return null;var o,a,s=this.projectConfigManager.getConfig();if(!s)return null;var l=el(s,e,this.logger);if(!l)return null;var u=(o=this.logger,(a=s.featureKeyMap[e])?a.variableKeyMap[t]||(o.log(I.ERROR,b.VARIABLE_KEY_NOT_IN_DATAFILE,Z,t,e),null):(o.log(I.ERROR,b.FEATURE_NOT_IN_DATAFILE,Z,e),null));if(!u)return null;if(r&&u.type!==r)return this.logger.log(I.WARNING,O.VARIABLE_REQUESTED_WITH_WRONG_TYPE,"OPTIMIZELY",r,u.type),null;var c=this.createUserContext(n,i),d=this.decisionService.getVariationForFeature(s,l,c).result,f=e$(d),p=this.getFeatureVariableValueFromVariation(e,f,d.variation,u,n),h={};return d.decisionSource===T.FEATURE_TEST&&null!==d.experiment&&null!==d.variation&&(h={experimentKey:d.experiment.key,variationKey:d.variation.key}),this.notificationCenter.sendNotifications(m.DECISION,{type:N.FEATURE_VARIABLE,userId:n,attributes:i||{},decisionInfo:{featureKey:e,featureEnabled:f,source:d.decisionSource,variableKey:t,variableValue:p,variableType:u.type,sourceInfo:h}}),p},e.prototype.getFeatureVariableValueFromVariation=function(e,t,r,n,i){var o=this.projectConfigManager.getConfig();if(!o)return null;var a=n.defaultValue;if(null!==r){var s=function(e,t,r,n){if(!t||!r)return null;if(!e.variationVariableUsageMap.hasOwnProperty(r.id))return n.log(I.ERROR,b.VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT,Z,r.id),null;var i=e.variationVariableUsageMap[r.id][t.id];return i?i.value:null}(o,n,r,this.logger);null!==s?t?(a=s,this.logger.log(I.INFO,O.USER_RECEIVED_VARIABLE_VALUE,"OPTIMIZELY",a,n.key,e)):this.logger.log(I.INFO,O.FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE,"OPTIMIZELY",e,i,a):this.logger.log(I.INFO,O.VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE,"OPTIMIZELY",n.key,r.key)}else this.logger.log(I.INFO,O.USER_RECEIVED_DEFAULT_VARIABLE_VALUE,"OPTIMIZELY",i,n.key,e);return function(e,t,r){var n;switch(t){case S.BOOLEAN:"true"!==e&&"false"!==e?(r.log(I.ERROR,b.UNABLE_TO_CAST_VALUE,Z,e,t),n=null):n="true"===e;break;case S.INTEGER:isNaN(n=parseInt(e,10))&&(r.log(I.ERROR,b.UNABLE_TO_CAST_VALUE,Z,e,t),n=null);break;case S.DOUBLE:isNaN(n=parseFloat(e))&&(r.log(I.ERROR,b.UNABLE_TO_CAST_VALUE,Z,e,t),n=null);break;case S.JSON:try{n=JSON.parse(e)}catch(i){r.log(I.ERROR,b.UNABLE_TO_CAST_VALUE,Z,e,t),n=null}break;default:n=e}return n}(a,n.type,this.logger)},e.prototype.getFeatureVariableBoolean=function(e,t,r,n){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,S.BOOLEAN,r,n):(this.logger.log(I.ERROR,O.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableBoolean"),null)}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.getFeatureVariableDouble=function(e,t,r,n){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,S.DOUBLE,r,n):(this.logger.log(I.ERROR,O.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableDouble"),null)}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.getFeatureVariableInteger=function(e,t,r,n){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,S.INTEGER,r,n):(this.logger.log(I.ERROR,O.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableInteger"),null)}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.getFeatureVariableString=function(e,t,r,n){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,S.STRING,r,n):(this.logger.log(I.ERROR,O.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableString"),null)}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.getFeatureVariableJSON=function(e,t,r,n){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,S.JSON,r,n):(this.logger.log(I.ERROR,O.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableJSON"),null)}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.getAllFeatureVariables=function(e,t,r){var n=this;try{if(!this.isValidInstance())return this.logger.log(I.ERROR,O.INVALID_OBJECT,"OPTIMIZELY","getAllFeatureVariables"),null;if(!this.validateInputs({feature_key:e,user_id:t},r))return null;var i=this.projectConfigManager.getConfig();if(!i)return null;var o=el(i,e,this.logger);if(!o)return null;var a=this.createUserContext(t,r),s=this.decisionService.getVariationForFeature(i,o,a).result,l=e$(s),u={};o.variables.forEach(function(r){u[r.key]=n.getFeatureVariableValueFromVariation(e,l,s.variation,r,t)});var c={};return s.decisionSource===T.FEATURE_TEST&&null!==s.experiment&&null!==s.variation&&(c={experimentKey:s.experiment.key,variationKey:s.variation.key}),this.notificationCenter.sendNotifications(m.DECISION,{type:N.ALL_FEATURE_VARIABLES,userId:t,attributes:r||{},decisionInfo:{featureKey:e,featureEnabled:l,source:s.decisionSource,variableValues:u,sourceInfo:c}}),u}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.getOptimizelyConfig=function(){try{return this.projectConfigManager.getConfig()?this.projectConfigManager.getOptimizelyConfig():null}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.close=function(){var e=this;try{var t=this.eventProcessor.stop();return this.disposeOnUpdate&&(this.disposeOnUpdate(),this.disposeOnUpdate=null),this.projectConfigManager&&this.projectConfigManager.stop(),Object.keys(this.readyTimeouts).forEach(function(t){var r=e.readyTimeouts[t];clearTimeout(r.readyTimeout),r.onClose()}),this.readyTimeouts={},t.then(function(){return{success:!0}},function(e){return{success:!1,reason:String(e)}})}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),Promise.resolve({success:!1,reason:String(e)})}},e.prototype.onReady=function(e){var t,r,n=this;"object"==typeof e&&null!==e&&void 0!==e.timeout&&(t=e.timeout),_.isSafeInteger(t)||(t=3e4);var i=new Promise(function(e){r=e}),o=this.nextReadyTimeoutId;this.nextReadyTimeoutId++;var a=setTimeout(function(){delete n.readyTimeouts[o],r({success:!1,reason:E("onReady timeout expired after %s ms",t)})},t);return this.readyTimeouts[o]={readyTimeout:a,onClose:function(){r({success:!1,reason:"Instance closed"})}},this.readyPromise.then(function(){clearTimeout(a),delete n.readyTimeouts[o],r({success:!0})}),Promise.race([this.readyPromise,i])},e.prototype.createUserContext=function(e,t){return this.validateInputs({user_id:e},t)?new q({optimizely:this,userId:e,attributes:t}):null},e.prototype.decide=function(e,r,n){var i,o,a,s,l=this;void 0===n&&(n=[]);var u,c=e.getUserId(),f=e.getAttributes(),p=this.projectConfigManager.getConfig(),h=[];if(!this.isValidInstance()||!p)return this.logger.log(I.INFO,O.INVALID_OBJECT,"OPTIMIZELY","decide"),z(r,e,[w.SDK_NOT_READY]);var v=p.featureKeyMap[r];if(!v)return this.logger.log(I.ERROR,b.FEATURE_NOT_IN_DATAFILE,"OPTIMIZELY",r),z(r,e,[E(w.FLAG_KEY_INVALID,r)]);var g=this.getAllDecideOptions(n),y=this.decisionService.findValidatedForcedDecision(p,e,r);h.push.apply(h,y.reasons);var _=y.result;if(_)u={experiment:null,variation:_,decisionSource:T.FEATURE_TEST};else{var A=this.decisionService.getVariationForFeature(p,v,e,g);h.push.apply(h,A.reasons),u=A.result}var R=u.decisionSource,S=null!==(o=null===(i=u.experiment)||void 0===i?void 0:i.key)&&void 0!==o?o:null,L=null!==(s=null===(a=u.variation)||void 0===a?void 0:a.key)&&void 0!==s?s:null,C=e$(u);!0===C?this.logger.log(I.INFO,O.FEATURE_ENABLED_FOR_USER,"OPTIMIZELY",r,c):this.logger.log(I.INFO,O.FEATURE_NOT_ENABLED_FOR_USER,"OPTIMIZELY",r,c);var k={},U=!1;g[t.OptimizelyDecideOption.EXCLUDE_VARIABLES]||v.variables.forEach(function(e){k[e.key]=l.getFeatureVariableValueFromVariation(r,C,u.variation,e,c)}),!g[t.OptimizelyDecideOption.DISABLE_DECISION_EVENT]&&(R===T.FEATURE_TEST||R===T.ROLLOUT&&ed(p))&&(this.sendImpressionEvent(u,r,c,C,f),U=!0);var D=[];g[t.OptimizelyDecideOption.INCLUDE_REASONS]&&(D=h.map(function(e){return E.apply(void 0,d([e[0]],e.slice(1)))}));var x={flagKey:r,enabled:C,variationKey:L,ruleKey:S,variables:k,reasons:D,decisionEventDispatched:U};return this.notificationCenter.sendNotifications(m.DECISION,{type:N.FLAG,userId:c,attributes:f,decisionInfo:x}),{variationKey:L,enabled:C,variables:k,ruleKey:S,flagKey:r,userContext:e,reasons:D}},e.prototype.getAllDecideOptions=function(e){var r=this,n=c({},this.defaultDecideOptions);return Array.isArray(e)?e.forEach(function(e){t.OptimizelyDecideOption[e]?n[e]=!0:r.logger.log(I.WARNING,O.UNRECOGNIZED_DECIDE_OPTION,"OPTIMIZELY",e)}):this.logger.log(I.DEBUG,O.INVALID_DECIDE_OPTIONS,"OPTIMIZELY"),n},e.prototype.decideForKeys=function(e,r,n){var i=this;void 0===n&&(n=[]);var o={};if(!this.isValidInstance())return this.logger.log(I.ERROR,O.INVALID_OBJECT,"OPTIMIZELY","decideForKeys"),o;if(0===r.length)return o;var a=this.getAllDecideOptions(n);return r.forEach(function(r){var s=i.decide(e,r,n);a[t.OptimizelyDecideOption.ENABLED_FLAGS_ONLY]&&!s.enabled||(o[r]=s)}),o},e.prototype.decideAll=function(e,t){void 0===t&&(t=[]);var r=this.projectConfigManager.getConfig();if(!this.isValidInstance()||!r)return this.logger.log(I.ERROR,O.INVALID_OBJECT,"OPTIMIZELY","decideAll"),{};var n=Object.keys(r.featureKeyMap);return this.decideForKeys(e,n,t)},e}(),eJ=function(){function e(e){var t=this;this.logger=e.logger,this.errorHandler=e.errorHandler,this.notificationListeners={},h(m).forEach(function(e){t.notificationListeners[e]=[]}),this.listenerId=1}return e.prototype.addNotificationListener=function(e,t){try{if(!(h(m).indexOf(e)>-1))return -1;this.notificationListeners[e]||(this.notificationListeners[e]=[]);var r=!1;if((this.notificationListeners[e]||[]).forEach(function(e){e.callback!==t||(r=!0)}),r)return -1;this.notificationListeners[e].push({id:this.listenerId,callback:t});var n=this.listenerId;return this.listenerId+=1,n}catch(e){return this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e),-1}},e.prototype.removeNotificationListener=function(e){var t,r,n=this;try{if(Object.keys(this.notificationListeners).some(function(i){return(n.notificationListeners[i]||[]).every(function(n,o){return n.id!==e||(t=o,r=i,!1)}),void 0!==t&&void 0!==r}),void 0!==t&&void 0!==r)return this.notificationListeners[r].splice(t,1),!0}catch(e){this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e)}return!1},e.prototype.clearAllNotificationListeners=function(){var e=this;try{h(m).forEach(function(t){e.notificationListeners[t]=[]})}catch(e){this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e)}},e.prototype.clearNotificationListeners=function(e){try{this.notificationListeners[e]=[]}catch(e){this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e)}},e.prototype.sendNotifications=function(e,t){var r=this;try{(this.notificationListeners[e]||[]).forEach(function(n){var i=n.callback;try{i(t)}catch(t){r.logger.log(I.ERROR,O.NOTIFICATION_LISTENER_EXCEPTION,"NOTIFICATION_CENTER",e,t.message)}})}catch(e){this.logger.log(I.ERROR,e.message),this.errorHandler.handleError(e)}},e}(),eQ={createEventProcessor:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(a.LogTierV1EventProcessor.bind.apply(a.LogTierV1EventProcessor,d([void 0],e)))},LocalStoragePendingEventsDispatcher:a.LocalStoragePendingEventsDispatcher},e0=o.getLogger();o.setLogHandler(j()),o.setLogLevel(o.LogLevel.INFO);var e1=!1,e2=function(e){try{var t,r,n=!1;e.errorHandler&&o.setErrorHandler(e.errorHandler),e.logger&&(o.setLogHandler(e.logger),o.setLogLevel(o.LogLevel.NOTSET)),void 0!==e.logLevel&&o.setLogLevel(e.logLevel);try{D(e),n=!0}catch(e){e0.error(e)}var i=void 0;null==e.eventDispatcher?(i=new a.LocalStoragePendingEventsDispatcher({eventDispatcher:M}),e1||(i.sendPendingEvents(),e1=!0)):i=e.eventDispatcher;var s=e.closingEventDispatcher;!e.eventDispatcher&&!s&&window.navigator&&"sendBeacon"in window.navigator&&(s=F);var l=e.eventBatchSize,d=e.eventFlushInterval;t=e.eventBatchSize,!("number"!=typeof t||!_.isSafeInteger(t))&&t>=1||(e0.warn("Invalid eventBatchSize %s, defaulting to %s",e.eventBatchSize,10),l=10),r=e.eventFlushInterval,!("number"!=typeof r||!_.isSafeInteger(r))&&r>0||(e0.warn("Invalid eventFlushInterval %s, defaulting to %s",e.eventFlushInterval,1e3),d=1e3);var f=o.getErrorHandler(),p=new eJ({logger:e0,errorHandler:f}),h={dispatcher:i,closingDispatcher:s,flushInterval:d,batchSize:l,maxQueueSize:e.eventMaxQueueSize||1e4,notificationCenter:p},v=c(c({clientEngine:"javascript-sdk"},e),{eventProcessor:eQ.createEventProcessor(h),logger:e0,errorHandler:f,datafileManager:e.sdkKey?function(e,t,r,n){var i={sdkKey:e};if((void 0===n||"object"==typeof n&&null!==n)&&_.assign(i,n),r){var o=ec({datafile:r,jsonSchemaValidator:void 0,logger:t}),a=o.configObj,s=o.error;s&&t.error(s),a&&(i.datafile=eu(a))}return new u.HttpPollingDatafileManager(i)}(e.sdkKey,e0,e.datafile,e.datafileOptions):void 0,notificationCenter:p,isValidInstance:n}),g=new eZ(v);try{if("function"==typeof window.addEventListener){var y="onpagehide"in window?"pagehide":"unload";window.addEventListener(y,function(){g.close()},!1)}}catch(e){e0.error(O.UNABLE_TO_ATTACH_UNLOAD,"INDEX_BROWSER",e.message)}return g}catch(e){return e0.error(e),null}},e5=function(){e1=!1},e3={logging:$,errorHandler:P,eventDispatcher:M,sendBeaconEventDispatcher:F,enums:C,setLogger:o.setLogHandler,setLogLevel:o.setLogLevel,createInstance:e2,__internalResetRetryState:e5,OptimizelyDecideOption:t.OptimizelyDecideOption};Object.defineProperty(t,"setLogLevel",{enumerable:!0,get:function(){return o.setLogLevel}}),Object.defineProperty(t,"setLogger",{enumerable:!0,get:function(){return o.setLogHandler}}),t.__internalResetRetryState=e5,t.createInstance=e2,t.default=e3,t.enums=C,t.errorHandler=P,t.eventDispatcher=M,t.logging=$,t.sendBeaconEventDispatcher=F}),F("9tWsh",function(t,r){function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}e(t.exports,"_type_of",function(){return n}),e(t.exports,"_",function(){return n})}),F("1jkOa",function(e,t){function r(t){for(var r in t)e.exports.hasOwnProperty(r)||(e.exports[r]=t[r])}Object.defineProperty(e.exports,"__esModule",{value:!0}),r(V("hkfbe")),r(V("9xCW6")),r(V("gFoQ4"))}),F("hkfbe",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.handleError=function(e){},e}();e.exports.NoopErrorHandler=r;var n=new r;e.exports.setErrorHandler=function(e){n=e},e.exports.getErrorHandler=function(){return n},e.exports.resetErrorHandler=function(){n=new r}}),F("9xCW6",function(e,t){var r;Object.defineProperty(e.exports,"__esModule",{value:!0}),(r=e.exports.LogLevel||(e.exports.LogLevel={}))[r.NOTSET=0]="NOTSET",r[r.DEBUG=1]="DEBUG",r[r.INFO=2]="INFO",r[r.WARNING=3]="WARNING",r[r.ERROR=4]="ERROR"}),F("gFoQ4",function(e,t){var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var n=V("hkfbe"),i=V("eatDu"),o=V("9xCW6"),a={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4};function s(e){return"string"!=typeof e?e:("WARN"===(e=e.toUpperCase())&&(e="WARNING"),a[e])?a[e]:e}var l=function(){function e(){this.defaultLoggerFacade=new f,this.loggers={}}return e.prototype.getLogger=function(e){return e?(this.loggers[e]||(this.loggers[e]=new f({messagePrefix:e})),this.loggers[e]):this.defaultLoggerFacade},e}(),u=function(){function e(e){void 0===e&&(e={}),this.logLevel=o.LogLevel.NOTSET,void 0!==e.logLevel&&i.isValidEnum(o.LogLevel,e.logLevel)&&this.setLogLevel(e.logLevel),this.logToConsole=void 0===e.logToConsole||!!e.logToConsole,this.prefix=void 0!==e.prefix?e.prefix:"[OPTIMIZELY]"}return e.prototype.log=function(e,t){if(this.shouldLog(e)&&this.logToConsole){var r=this.prefix+" - "+this.getLogLevelName(e)+" "+this.getTime()+" "+t;this.consoleLog(e,[r])}},e.prototype.setLogLevel=function(e){e=s(e),i.isValidEnum(o.LogLevel,e)&&void 0!==e?this.logLevel=e:this.logLevel=o.LogLevel.ERROR},e.prototype.getTime=function(){return new Date().toISOString()},e.prototype.shouldLog=function(e){return e>=this.logLevel},e.prototype.getLogLevelName=function(e){switch(e){case o.LogLevel.DEBUG:return"DEBUG";case o.LogLevel.INFO:return"INFO ";case o.LogLevel.WARNING:return"WARN ";case o.LogLevel.ERROR:return"ERROR";default:return"NOTSET"}},e.prototype.consoleLog=function(e,t){switch(e){case o.LogLevel.DEBUG:console.log.apply(console,t);break;case o.LogLevel.INFO:console.info.apply(console,t);break;case o.LogLevel.WARNING:console.warn.apply(console,t);break;case o.LogLevel.ERROR:console.error.apply(console,t);break;default:console.log.apply(console,t)}},e}();t.ConsoleLogHandler=u;var c=o.LogLevel.NOTSET,d=null,f=function(){function e(e){void 0===e&&(e={}),this.messagePrefix="",e.messagePrefix&&(this.messagePrefix=e.messagePrefix)}return e.prototype.log=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this.internalLog(s(e),{message:t,splat:r})},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.namedLog(o.LogLevel.INFO,e,t)},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.namedLog(o.LogLevel.DEBUG,e,t)},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.namedLog(o.LogLevel.WARNING,e,t)},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.namedLog(o.LogLevel.ERROR,e,t)},e.prototype.format=function(e){return(this.messagePrefix?this.messagePrefix+": ":"")+i.sprintf.apply(void 0,r([e.message],e.splat))},e.prototype.internalLog=function(e,t){d&&!(e<c)&&(d.log(e,this.format(t)),t.error&&t.error instanceof Error&&n.getErrorHandler().handleError(t.error))},e.prototype.namedLog=function(e,t,r){if(t instanceof Error){t=(n=t).message,this.internalLog(e,{error:n,message:t,splat:r});return}if(0===r.length){this.internalLog(e,{message:t,splat:r});return}var n,i=r[r.length-1];i instanceof Error&&(n=i,r.splice(-1)),this.internalLog(e,{message:t,error:n,splat:r})},e}(),p=new l;t.getLogger=function(e){return p.getLogger(e)},t.setLogHandler=function(e){d=e},t.setLogLevel=function(e){e=s(e),c=i.isValidEnum(o.LogLevel,e)&&void 0!==e?e:o.LogLevel.ERROR},t.getLogLevel=function(){return c},t.resetLogger=function(){p=new l,c=o.LogLevel.NOTSET}}),F("eatDu",function(e,t){var r,n=V("9tWsh");Object.defineProperty(e.exports,"__esModule",{value:!0});var i=V("8XDCe");function o(e){return Object.keys(e).map(function(t){return e[t]})}e.exports.generateUUID=function(){return i.v4()},e.exports.getTimestamp=function(){return new Date().getTime()},e.exports.isValidEnum=function(e,t){for(var r=!1,n=Object.keys(e),i=0;i<n.length;i++)if(t===e[n[i]]){r=!0;break}return r},e.exports.groupBy=function(e,t){var r={};return e.forEach(function(e){var n=t(e);r[n]=r[n]||[],r[n].push(e)}),o(r)},e.exports.objectValues=o,e.exports.objectEntries=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})},e.exports.find=function(e,t){for(var r,n=0;n<e.length;n++){var i=e[n];if(t(i)){r=i;break}}return r},e.exports.keyBy=function(e,t){var r={};return e.forEach(function(e){r[t(e)]=e}),r},e.exports.sprintf=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=0;return e.replace(/%s/g,function(){var e=t[i++],r=void 0===e?"undefined":(0,n._)(e);return"function"===r?e():"string"===r?e:String(e)})},(r=e.exports.NOTIFICATION_TYPES||(e.exports.NOTIFICATION_TYPES={})).ACTIVATE="ACTIVATE:experiment, user_id,attributes, variation, event",r.DECISION="DECISION:type, userId, attributes, decisionInfo",r.LOG_EVENT="LOG_EVENT:logEvent",r.OPTIMIZELY_CONFIG_UPDATE="OPTIMIZELY_CONFIG_UPDATE",r.TRACK="TRACK:event_key, user_id, attributes, event_tags, event"}),F("8XDCe",function(e,t){var r=V("5cBp6"),n=V("3nDKW");n.v1=r,n.v4=n,e.exports=n}),F("5cBp6",function(e,t){var r,n,i=V("fPWf6"),o=V("gy8GE"),a=0,s=0;e.exports=function(e,t,l){var u=t&&l||0,c=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:n;if(null==d||null==f){var p=i();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=n=(p[6]<<8|p[7])&16383)}var h=void 0!==e.msecs?e.msecs:new Date().getTime(),v=void 0!==e.nsecs?e.nsecs:s+1,g=h-a+(v-s)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||h>a)&&void 0===e.nsecs&&(v=0),v>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");a=h,s=v,n=f;var y=((268435455&(h+=122192928e5))*1e4+v)%4294967296;c[u++]=y>>>24&255,c[u++]=y>>>16&255,c[u++]=y>>>8&255,c[u++]=255&y;var E=h/4294967296*1e4&268435455;c[u++]=E>>>8&255,c[u++]=255&E,c[u++]=E>>>24&15|16,c[u++]=E>>>16&255,c[u++]=f>>>8|128,c[u++]=255&f;for(var m=0;m<6;++m)c[u+m]=d[m];return t||o(c)}}),F("fPWf6",function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var i=Array(16);e.exports=function(){for(var e,t=0;t<16;t++)(3&t)==0&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}}),F("gy8GE",function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}}),F("3nDKW",function(e,t){var r=V("fPWf6"),n=V("gy8GE");e.exports=function(e,t,i){var o=t&&i||0;"string"==typeof e&&(t="binary"===e?Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||n(a)}}),F("iRgby",function(e,t){var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),n(V("8BArO"),e.exports),n(V("1B5LU"),e.exports),n(V("hxO5H"),e.exports),n(V("gIJyE"),e.exports),n(V("c1NuD"),e.exports),n(V("lsIPC"),e.exports),n(V("eWRUV"),e.exports)}),F("8BArO",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.areEventContextsEqual=void 0,e.exports.areEventContextsEqual=function(e,t){var r=e.context,n=t.context;return r.accountId===n.accountId&&r.projectId===n.projectId&&r.clientName===n.clientName&&r.clientVersion===n.clientVersion&&r.revision===n.revision&&r.anonymizeIP===n.anonymizeIP&&r.botFiltering===n.botFiltering}}),F("1B5LU",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.sendEventNotification=e.exports.getQueue=e.exports.validateAndGetBatchSize=e.exports.validateAndGetFlushInterval=e.exports.DEFAULT_BATCH_SIZE=e.exports.DEFAULT_FLUSH_INTERVAL=void 0;var r=V("euZwN"),n=V("1jkOa"),i=V("eatDu");e.exports.DEFAULT_FLUSH_INTERVAL=3e4,e.exports.DEFAULT_BATCH_SIZE=10;var o=n.getLogger("EventProcessor");e.exports.validateAndGetFlushInterval=function(t){return t<=0&&(o.warn("Invalid flushInterval "+t+", defaulting to "+e.exports.DEFAULT_FLUSH_INTERVAL),t=e.exports.DEFAULT_FLUSH_INTERVAL),t},e.exports.validateAndGetBatchSize=function(t){return(t=Math.floor(t))<1&&(o.warn("Invalid batchSize "+t+", defaulting to "+e.exports.DEFAULT_BATCH_SIZE),t=e.exports.DEFAULT_BATCH_SIZE),t=Math.max(1,t)},e.exports.getQueue=function(e,t,n,i,o){return e>1?new r.DefaultEventQueue({flushInterval:t,maxQueueSize:e,batchComparator:n,sink:i,closingSink:o}):new r.SingleEventQueue({sink:i})},e.exports.sendEventNotification=function(e,t){e&&e.sendNotifications(i.NOTIFICATION_TYPES.LOG_EVENT,t)}}),F("euZwN",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DefaultEventQueue=e.exports.SingleEventQueue=void 0;var r=V("1jkOa").getLogger("EventProcessor"),n=function(){function e(e){var t=e.timeout,r=e.callback;this.timeout=Math.max(t,0),this.callback=r}return e.prototype.start=function(){this.timeoutId=setTimeout(this.callback,this.timeout)},e.prototype.refresh=function(){this.stop(),this.start()},e.prototype.stop=function(){this.timeoutId&&clearTimeout(this.timeoutId)},e}(),i=function(){function e(e){var t=e.sink;this.sink=t}return e.prototype.start=function(){},e.prototype.stop=function(){return Promise.resolve()},e.prototype.enqueue=function(e){this.sink([e])},e}();e.exports.SingleEventQueue=i;var o=function(){function e(e){var t=e.flushInterval,r=e.maxQueueSize,i=e.sink,o=e.closingSink,a=e.batchComparator;this.buffer=[],this.maxQueueSize=Math.max(r,1),this.sink=i,this.closingSink=o,this.batchComparator=a,this.timer=new n({callback:this.flush.bind(this),timeout:t}),this.started=!1}return e.prototype.start=function(){this.started=!0},e.prototype.stop=function(){this.started=!1;var e=this.closingSink?this.closingSink(this.buffer):this.sink(this.buffer);return this.buffer=[],this.timer.stop(),e},e.prototype.enqueue=function(e){if(!this.started){r.warn("Queue is stopped, not accepting event");return}var t=this.buffer[0];t&&!this.batchComparator(t,e)&&this.flush(),0===this.buffer.length&&this.timer.refresh(),this.buffer.push(e),this.buffer.length>=this.maxQueueSize&&this.flush()},e.prototype.flush=function(){this.sink(this.buffer),this.buffer=[],this.timer.stop()},e}();e.exports.DefaultEventQueue=o}),F("hxO5H",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0})}),F("gIJyE",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0})}),F("c1NuD",function(e,t){var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.LocalStoragePendingEventsDispatcher=e.exports.PendingEventsDispatcher=void 0;var i=V("1jkOa"),o=V("e00mU"),a=V("eatDu"),s=i.getLogger("EventProcessor"),l=function(){function e(e){var t=e.eventDispatcher,r=e.store;this.dispatcher=t,this.store=r}return e.prototype.dispatchEvent=function(e,t){this.send({uuid:a.generateUUID(),timestamp:a.getTimestamp(),request:e},t)},e.prototype.sendPendingEvents=function(){var e=this,t=this.store.values();s.debug("Sending %s pending events from previous page",t.length),t.forEach(function(t){try{e.send(t,function(){})}catch(e){}})},e.prototype.send=function(e,t){var r=this;this.store.set(e.uuid,e),this.dispatcher.dispatchEvent(e.request,function(n){r.store.remove(e.uuid),t(n)})},e}();e.exports.PendingEventsDispatcher=l;var u=function(e){function t(t){var r=t.eventDispatcher;return e.call(this,{eventDispatcher:r,store:new o.LocalStorageStore({maxValues:100,key:"fs_optly_pending_events"})})||this}return n(t,e),t}(l);e.exports.LocalStoragePendingEventsDispatcher=u}),F("e00mU",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.LocalStorageStore=void 0;var r=V("eatDu"),n=V("1jkOa").getLogger("EventProcessor"),i=function(){function e(e){var t=e.key,r=e.maxValues;this.LS_KEY=t,this.maxValues=void 0===r?1e3:r}return e.prototype.get=function(e){return this.getMap()[e]||null},e.prototype.set=function(e,t){var r=this.getMap();r[e]=t,this.replace(r)},e.prototype.remove=function(e){var t=this.getMap();delete t[e],this.replace(t)},e.prototype.values=function(){return r.objectValues(this.getMap())},e.prototype.clear=function(){this.replace({})},e.prototype.replace=function(e){try{window.localStorage&&localStorage.setItem(this.LS_KEY,JSON.stringify(e)),this.clean()}catch(e){n.error(e)}},e.prototype.clean=function(){var e=this.getMap(),t=Object.keys(e),r=t.length-this.maxValues;if(!(r<1)){var n=t.map(function(t){return{key:t,value:e[t]}});n.sort(function(e,t){return e.value.timestamp-t.value.timestamp});for(var i=0;i<r;i++)delete e[n[i].key];this.replace(e)}},e.prototype.getMap=function(){try{var e=window.localStorage&&localStorage.getItem(this.LS_KEY);if(e)return JSON.parse(e)||{}}catch(e){n.error(e)}return{}},e}();e.exports.LocalStorageStore=i}),F("lsIPC",function(e,t){var r=e.exports&&e.exports.__assign||function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.formatEvents=e.exports.buildConversionEventV1=e.exports.buildImpressionEventV1=e.exports.makeBatchedEventV1=void 0;var n="$opt_bot_filtering";function i(e){var t=[],r=e[0];return e.forEach(function(e){if("conversion"===e.type||"impression"===e.type){var r=s(e);"impression"===e.type?r.snapshots.push(a(e)):"conversion"===e.type&&r.snapshots.push(o(e)),t.push(r)}}),{client_name:r.context.clientName,client_version:r.context.clientVersion,account_id:r.context.accountId,project_id:r.context.projectId,revision:r.context.revision,anonymize_ip:r.context.anonymizeIP,enrich_decisions:!0,visitors:t}}function o(e){var t=r({},e.tags);delete t.revenue,delete t.value;var n={entity_id:e.event.id,key:e.event.key,timestamp:e.timestamp,uuid:e.uuid};return e.tags&&(n.tags=e.tags),null!=e.value&&(n.value=e.value),null!=e.revenue&&(n.revenue=e.revenue),{events:[n]}}function a(e){var t,r,n=e.layer,i=e.experiment,o=e.variation,a=e.ruleKey,s=e.flagKey,l=e.ruleType,u=e.enabled,c=n?n.id:null;return{decisions:[{campaign_id:c,experiment_id:null!==(t=null==i?void 0:i.id)&&void 0!==t?t:"",variation_id:null!==(r=null==o?void 0:o.id)&&void 0!==r?r:"",metadata:{flag_key:s,rule_key:a,rule_type:l,variation_key:o?o.key:"",enabled:u}}],events:[{entity_id:c,timestamp:e.timestamp,key:"campaign_activated",uuid:e.uuid}]}}function s(e){var t={snapshots:[],visitor_id:e.user.id,attributes:[]};return e.user.attributes.forEach(function(e){t.attributes.push({entity_id:e.entityId,key:e.key,type:"custom",value:e.value})}),"boolean"==typeof e.context.botFiltering&&t.attributes.push({entity_id:n,key:n,type:"custom",value:e.context.botFiltering}),t}e.exports.makeBatchedEventV1=i,e.exports.buildImpressionEventV1=function(e){var t=s(e);return t.snapshots.push(a(e)),{client_name:e.context.clientName,client_version:e.context.clientVersion,account_id:e.context.accountId,project_id:e.context.projectId,revision:e.context.revision,anonymize_ip:e.context.anonymizeIP,enrich_decisions:!0,visitors:[t]}},e.exports.buildConversionEventV1=function(e){var t=s(e);return t.snapshots.push(o(e)),{client_name:e.context.clientName,client_version:e.context.clientVersion,account_id:e.context.accountId,project_id:e.context.projectId,revision:e.context.revision,anonymize_ip:e.context.anonymizeIP,enrich_decisions:!0,visitors:[t]}},e.exports.formatEvents=function(e){return{url:"https://logx.optimizely.com/v1/events",httpVerb:"POST",params:i(e)}}}),F("eWRUV",function(e,t){var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},n=e.exports&&e.exports.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},i=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.LogTierV1EventProcessor=void 0;var o=V("1jkOa"),a=V("1B5LU"),s=i(V("aUnkT")),l=V("8BArO"),u=V("lsIPC"),c=o.getLogger("LogTierV1EventProcessor"),d=function(){function e(e){var t=e.dispatcher,r=e.closingDispatcher,n=e.flushInterval,i=void 0===n?a.DEFAULT_FLUSH_INTERVAL:n,o=e.batchSize,u=void 0===o?a.DEFAULT_BATCH_SIZE:o,c=e.notificationCenter;this.dispatcher=t,this.closingDispatcher=r,this.notificationCenter=c,this.requestTracker=new s.default,i=a.validateAndGetFlushInterval(i),u=a.validateAndGetBatchSize(u),this.queue=a.getQueue(u,i,l.areEventContextsEqual,this.drainQueue.bind(this,!1),this.drainQueue.bind(this,!0))}return e.prototype.drainQueue=function(e,t){var r=this,n=new Promise(function(n){if(c.debug("draining queue with %s events",t.length),0===t.length){n();return}var i=u.formatEvents(t);(e&&r.closingDispatcher?r.closingDispatcher:r.dispatcher).dispatchEvent(i,function(){n()}),a.sendEventNotification(r.notificationCenter,i)});return this.requestTracker.trackRequest(n),n},e.prototype.process=function(e){this.queue.enqueue(e)},e.prototype.stop=function(){try{return this.queue.stop(),this.requestTracker.onRequestsComplete()}catch(e){c.error('Error stopping EventProcessor: "%s"',e.message,e)}return Promise.resolve()},e.prototype.start=function(){return r(this,void 0,void 0,function(){return n(this,function(e){return this.queue.start(),[2]})})},e}();e.exports.LogTierV1EventProcessor=d}),F("aUnkT",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=function(){function e(){this.reqsInFlightCount=0,this.reqsCompleteResolvers=[]}return e.prototype.trackRequest=function(e){var t=this;this.reqsInFlightCount++;var r=function(){t.reqsInFlightCount--,0===t.reqsInFlightCount&&(t.reqsCompleteResolvers.forEach(function(e){return e()}),t.reqsCompleteResolvers=[])};e.then(r,r)},e.prototype.onRequestsComplete=function(){var e=this;return new Promise(function(t){0===e.reqsInFlightCount?t():e.reqsCompleteResolvers.push(t)})},e}();e.exports.default=r}),F("kqgDK",function(e,t){!function(){var t=this;function r(e,t){var r,n,i,o,a,s;for(r=3&e.length,n=e.length-r,i=t,s=0;s<n;)a=255&e.charCodeAt(s)|(255&e.charCodeAt(++s))<<8|(255&e.charCodeAt(++s))<<16|(255&e.charCodeAt(++s))<<24,++s,i^=a=(65535&(a=(a=(65535&a)*3432918353+(((a>>>16)*3432918353&65535)<<16)&4294967295)<<15|a>>>17))*461845907+(((a>>>16)*461845907&65535)<<16)&4294967295,i=(65535&(o=(65535&(i=i<<13|i>>>19))*5+(((i>>>16)*5&65535)<<16)&4294967295))+27492+(((o>>>16)+58964&65535)<<16);switch(a=0,r){case 3:a^=(255&e.charCodeAt(s+2))<<16;case 2:a^=(255&e.charCodeAt(s+1))<<8;case 1:a^=255&e.charCodeAt(s),i^=a=(65535&(a=(a=(65535&a)*3432918353+(((a>>>16)*3432918353&65535)<<16)&4294967295)<<15|a>>>17))*461845907+(((a>>>16)*461845907&65535)<<16)&4294967295}return i^=e.length,i^=i>>>16,i=(65535&i)*2246822507+(((i>>>16)*2246822507&65535)<<16)&4294967295,i^=i>>>13,i=(65535&i)*3266489909+(((i>>>16)*3266489909&65535)<<16)&4294967295,(i^=i>>>16)>>>0}if(r.v2=function(e,t){for(var r,n=e.length,i=t^n,o=0;n>=4;)r=(65535&(r=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))*1540483477+(((r>>>16)*1540483477&65535)<<16),r^=r>>>24,i=(65535&i)*1540483477+(((i>>>16)*1540483477&65535)<<16)^(r=(65535&r)*1540483477+(((r>>>16)*1540483477&65535)<<16)),n-=4,++o;switch(n){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i^=255&e.charCodeAt(o),i=(65535&i)*1540483477+(((i>>>16)*1540483477&65535)<<16)}return i^=i>>>13,i=(65535&i)*1540483477+(((i>>>16)*1540483477&65535)<<16),(i^=i>>>15)>>>0},r.v3=r,void 0!==e)e.exports=r;else{var n=t.murmur;r.noConflict=function(){return t.murmur=n,r},t.murmur=r}}()}),F("xO6AD",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=V("O14Kx");e.exports.HttpPollingDatafileManager=r.default}),F("O14Kx",function(e,t){var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});var o=V("1830K"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.makeGetRequest=function(e,t){return o.makeGetRequest(e,t)},t.prototype.getConfigDefaults=function(){return{autoUpdate:!1}},t}(i(V("fKQRh")).default);e.exports.default=a}),F("1830K",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=V("6vTtC"),n=V("1jkOa").getLogger("DatafileManager");e.exports.makeGetRequest=function(e,t){var i=new XMLHttpRequest;return{responsePromise:new Promise(function(o,a){i.open("GET",e,!0),function(e,t){Object.keys(e).forEach(function(r){var n=e[r];t.setRequestHeader(r,n)})}(t,i),i.onreadystatechange=function(){if(4===i.readyState){if(0===i.status){a(Error("Request error"));return}var e=function(e){var t=e.getAllResponseHeaders();if(null===t)return{};var r=t.split("\r\n"),n={};return r.forEach(function(e){var t=e.indexOf(": ");if(t>-1){var r=e.slice(0,t),i=e.slice(t+2);i.length>0&&(n[r]=i)}}),n}(i);o({statusCode:i.status,body:i.responseText,headers:e})}},i.timeout=r.REQUEST_TIMEOUT_MS,i.ontimeout=function(){n.error("Request timed out")},i.send()}),abort:function(){i.abort()}}}}),F("6vTtC",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DEFAULT_UPDATE_INTERVAL=3e5,e.exports.MIN_UPDATE_INTERVAL=1e3,e.exports.DEFAULT_URL_TEMPLATE="https://cdn.optimizely.com/datafiles/%s.json",e.exports.DEFAULT_AUTHENTICATED_URL_TEMPLATE="https://config.optimizely.com/datafiles/auth/%s.json",e.exports.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT=[0,8,16,32,64,128,256,512],e.exports.REQUEST_TIMEOUT_MS=6e4}),F("fKQRh",function(e,t){var r=e.exports&&e.exports.__assign||function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},n=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});var i=V("1jkOa"),o=V("eatDu"),a=n(V("eu9g7")),s=V("6vTtC"),l=n(V("dfhc7")),u=i.getLogger("DatafileManager");function c(e){return e>=200&&e<400}var d={get:function(){return Promise.resolve("")},set:function(){return Promise.resolve()},contains:function(){return Promise.resolve(!1)},remove:function(){return Promise.resolve()}},f=function(){function e(e){var t=this,n=r(r({},this.getConfigDefaults()),e),i=n.datafile,c=n.autoUpdate,f=n.sdkKey,p=n.updateInterval,h=void 0===p?s.DEFAULT_UPDATE_INTERVAL:p,v=n.urlTemplate,g=void 0===v?s.DEFAULT_URL_TEMPLATE:v,y=n.cache;(this.cache=void 0===y?d:y,this.cacheKey="opt-datafile-"+f,this.isReadyPromiseSettled=!1,this.readyPromiseResolver=function(){},this.readyPromiseRejecter=function(){},this.readyPromise=new Promise(function(e,r){t.readyPromiseResolver=e,t.readyPromiseRejecter=r}),i?(this.currentDatafile=i,f||this.resolveReadyPromise()):this.currentDatafile="",this.isStarted=!1,this.datafileUrl=o.sprintf(g,f),this.emitter=new a.default,this.autoUpdate=void 0!==c&&c,h>=s.MIN_UPDATE_INTERVAL)?this.updateInterval=h:(u.warn("Invalid updateInterval %s, defaulting to %s",h,s.DEFAULT_UPDATE_INTERVAL),this.updateInterval=s.DEFAULT_UPDATE_INTERVAL),this.currentTimeout=null,this.currentRequest=null,this.backoffController=new l.default,this.syncOnCurrentRequestComplete=!1}return e.prototype.get=function(){return this.currentDatafile},e.prototype.start=function(){this.isStarted||(u.debug("Datafile manager started"),this.isStarted=!0,this.backoffController.reset(),this.setDatafileFromCacheIfAvailable(),this.syncDatafile())},e.prototype.stop=function(){return u.debug("Datafile manager stopped"),this.isStarted=!1,this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null),this.emitter.removeAllListeners(),this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null),Promise.resolve()},e.prototype.onReady=function(){return this.readyPromise},e.prototype.on=function(e,t){return this.emitter.on(e,t)},e.prototype.onRequestRejected=function(e){this.isStarted&&(this.backoffController.countError(),e instanceof Error?u.error("Error fetching datafile: %s",e.message,e):"string"==typeof e?u.error("Error fetching datafile: %s",e):u.error("Error fetching datafile"))},e.prototype.onRequestResolved=function(e){if(this.isStarted){void 0!==e.statusCode&&c(e.statusCode)?this.backoffController.reset():this.backoffController.countError(),this.trySavingLastModified(e.headers);var t=this.getNextDatafileFromResponse(e);""!==t&&(u.info("Updating datafile from response"),this.currentDatafile=t,this.cache.set(this.cacheKey,t),this.isReadyPromiseSettled?this.emitter.emit("update",{datafile:t}):this.resolveReadyPromise())}},e.prototype.onRequestComplete=function(){this.isStarted&&(this.currentRequest=null,this.isReadyPromiseSettled||this.autoUpdate||this.rejectReadyPromise(Error("Failed to become ready")),this.autoUpdate&&this.syncOnCurrentRequestComplete&&this.syncDatafile(),this.syncOnCurrentRequestComplete=!1)},e.prototype.syncDatafile=function(){var e=this,t={};this.lastResponseLastModified&&(t["if-modified-since"]=this.lastResponseLastModified),u.debug("Making datafile request to url %s with headers: %s",this.datafileUrl,function(){return JSON.stringify(t)}),this.currentRequest=this.makeGetRequest(this.datafileUrl,t);var r=function(){e.onRequestComplete()};this.currentRequest.responsePromise.then(function(t){e.onRequestResolved(t)},function(t){e.onRequestRejected(t)}).then(r,r),this.autoUpdate&&this.scheduleNextUpdate()},e.prototype.resolveReadyPromise=function(){this.readyPromiseResolver(),this.isReadyPromiseSettled=!0},e.prototype.rejectReadyPromise=function(e){this.readyPromiseRejecter(e),this.isReadyPromiseSettled=!0},e.prototype.scheduleNextUpdate=function(){var e=this,t=Math.max(this.backoffController.getDelay(),this.updateInterval);u.debug("Scheduling sync in %s ms",t),this.currentTimeout=setTimeout(function(){e.currentRequest?e.syncOnCurrentRequestComplete=!0:e.syncDatafile()},t)},e.prototype.getNextDatafileFromResponse=function(e){return(u.debug("Response status code: %s",e.statusCode),void 0===e.statusCode||304===e.statusCode)?"":c(e.statusCode)?e.body:""},e.prototype.trySavingLastModified=function(e){var t=e["last-modified"]||e["Last-Modified"];void 0!==t&&(this.lastResponseLastModified=t,u.debug("Saved last modified header value from response: %s",this.lastResponseLastModified))},e.prototype.setDatafileFromCacheIfAvailable=function(){var e=this;this.cache.get(this.cacheKey).then(function(t){e.isStarted&&!e.isReadyPromiseSettled&&""!==t&&(u.debug("Using datafile from cache"),e.currentDatafile=t,e.resolveReadyPromise())})},e}();e.exports.default=f}),F("eu9g7",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=function(){function e(){this.listeners={},this.listenerId=1}return e.prototype.on=function(e,t){var r=this;this.listeners[e]||(this.listeners[e]={});var n=String(this.listenerId);return this.listenerId++,this.listeners[e][n]=t,function(){r.listeners[e]&&delete r.listeners[e][n]}},e.prototype.emit=function(e,t){var r=this.listeners[e];r&&Object.keys(r).forEach(function(e){(0,r[e])(t)})},e.prototype.removeAllListeners=function(){this.listeners={}},e}();e.exports.default=r}),F("dfhc7",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=V("6vTtC"),n=function(){function e(){this.errorCount=0}return e.prototype.getDelay=function(){return 0===this.errorCount?0:1e3*r.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT[Math.min(r.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT.length-1,this.errorCount)]+Math.round(1e3*Math.random())},e.prototype.countError=function(){this.errorCount<r.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT.length-1&&this.errorCount++},e.prototype.reset=function(){this.errorCount=0},e}();e.exports.default=n}),F("d8WyV",function(e,t){e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(t);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var l=e.length;s>0&&l>s&&(l=s);for(var u=0;u<l;++u){var c,d,f,p,h=e[u].replace(a,"%20"),v=h.indexOf(n);(v>=0?(c=h.substr(0,v),d=h.substr(v+1)):(c=h,d=""),f=decodeURIComponent(c),p=decodeURIComponent(d),Object.prototype.hasOwnProperty.call(o,f))?r(o[f])?o[f].push(p):o[f]=[o[f],p]:o[f]=p}return o};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}),F("8kEec",function(e,t){var r=V("9tWsh"),n=function(e){switch(void 0===e?"undefined":(0,r._)(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,s){return(t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e)?o(a(e),function(a){var s=encodeURIComponent(n(a))+r;return i(e[a])?o(e[a],function(e){return s+encodeURIComponent(n(e))}).join(t):s+encodeURIComponent(n(e[a]))}).join(t):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}});var B={},j={},K=V("hXfjp"),H=K.default,G={},K=V("hXfjp"),$=K.default;(G=function(e,t){if("object"!=$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}).__esModule=!0,G.default=G,(j=function(e){var t=G(e,"string");return"symbol"==H(t)?t:String(t)}).__esModule=!0,j.default=j,(B=function(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}).__esModule=!0,B.default=B;var z={};function q(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}(z=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){q(o,n,i,a,s,"next",e)}function s(e){q(o,n,i,a,s,"throw",e)}a(void 0)})}}).__esModule=!0,z.default=z;var Y={},W=V("iZqNx")();Y=W;try{regeneratorRuntime=W}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=W:Function("r","regeneratorRuntime = r")(W)}var X={};r=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function i(){}function o(t,r,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(new Date*1+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(r);/^[\{\[]/.test(a)&&(r=a)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var l in o)o[l]&&(s+="; "+l,!0!==o[l]&&(s+="="+o[l].split(";")[0]));return document.cookie=t+"="+r+s}}function a(e,r){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var s=o[a].split("="),l=s.slice(1).join("=");r||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var u=t(s[0]);if(l=(n.read||n)(l,u)||t(l),r)try{l=JSON.parse(l)}catch(e){}if(i[u]=l,e===u)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,r){o(t,"",e(r,{expires:-1}))},i.defaults={},i.withConverter=r,i}(function(){})},"function"==typeof define&&define.amd&&define(r),X=r();var Z=V("ls3Pm"),J={},Q="prod",ee={development:"development",test:"development",qa:"preview",prod:"production"}[Q],et={dev:"https://apis.test.alaskaair.com",development:"https://apis.test.alaskaair.com",test:"https://apis.test.alaskaair.com",qa:"https://apis.qa.alaskaair.com",prod:"https://apis.alaskaair.com"}[Q],er="".concat(et,"/content/cms/rest/").concat(ee,"/v3/content_types");function en(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ei(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?en(Object(n),!0).forEach(function(r){t(B)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eo={checkin:t(J={TEALIUM_ENV:({dev:"dev",development:"dev",test:"dev",qa:"qa",prod:"prod"})[Q],RELEASE_ENV:Q,NODE_ENV:"production",ACCESS_MANAGEMENT_OPTIMIZELY_SDK_KEY:({dev:"3PaXdVKDMtCsC6S5M9gHA",development:"3PaXdVKDMtCsC6S5M9gHA",test:"DhazDUdgVufemnQ1JnazC",qa:"5KwDz6ixgzfCuicnKLTxc",prod:"Kwo6ZWG3ZcYgG9JbmWe1q"})[Q],WALLET_SERVICE_URL:"".concat(et,"/1/marketing/loyaltymanagement/wallet"),WALLET_SERVICE_KEY:({dev:"1cef4185b85e40d4b96b167158523b6b",development:"1cef4185b85e40d4b96b167158523b6b",test:"1cef4185b85e40d4b96b167158523b6b",qa:"d6a6b523065a47bb81647891015fc053",prod:"4feac8b892704e54a54758a9ee092cb0"})[Q],CONTENT_API_URL:er,CONTENT_API_KEY:({development:"599d61c0783a4aad90ccc088ebcf0b83",test:"599d61c0783a4aad90ccc088ebcf0b83",qa:"033089c6d8974fc290982131819a7f0a",prod:"8e86c395b5204d3b8ae8efe7e3f20015"})[Q],CHECKIN_OPTIMIZELY_SDK_KEY:({dev:"Fw2N6nQ5ubvGntL5bm5Vf",development:"Fw2N6nQ5ubvGntL5bm5Vf",test:"Fw2N6nQ5ubvGntL5bm5Vf",qa:"Fw2N6nQ5ubvGntL5bm5Vf",prod:"M3s31VnYKvbnFgeZdxjTd"})[Q],ACCOUNT_PERSONALIZATION_OPTIMIZELY_SDK_KEY:({dev:"FhwtmGvK8w98QcuAF2atX",development:"FhwtmGvK8w98QcuAF2atX",test:"FhwtmGvK8w98QcuAF2atX",qa:"RXmmaQ11rJFbwGvN9idsP",prod:"W2wVbQpS5Nic72bsd3FXY"})[Q]}).CHECKIN_OPTIMIZELY_SDK_KEY,access:t(J).ACCESS_MANAGEMENT_OPTIMIZELY_SDK_KEY,account:t(J).ACCOUNT_PERSONALIZATION_OPTIMIZELY_SDK_KEY},ea={access:{new_login_ui:!1,new_super_user_ui:!1},checkin:{is_header_one_checkin_enabled:!1},accountPersonalization:{redirect_to_enrollment_microservice_enabled:!1}},es=(i=t(z)(t(Y).mark(function e(r){var n,i,o=arguments;return t(Y).wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},i=r.map(function(){var e=t(z)(t(Y).mark(function e(r){var i,o,a,s,l,u,c,d;return t(Y).wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t(Z).createInstance({sdkKey:r}),e.next=3,i.onReady();case 3:if(document){e.next=5;break}return e.abrupt("return");case 5:if(o=t(X).get("optimizelyEndUserId")||"unknown",r!==t(J).ACCESS_MANAGEMENT_OPTIMIZELY_SDK_KEY){e.next=16;break}return a="true"===t(X).get("login-beta"),s="opt-out"===t(X).get("login-beta"),l="true"===localStorage.getItem("new-super-user-search-opt-in"),u=i.createUserContext(o,{isOptedIntoBeta:a,isOptedOutOfBeta:s,isOptedIntoNewSuperUserUI:l}),e.next=13,el(u.decide.bind(u),ea.access);case 13:ea.access=e.sent,e.next=28;break;case 16:if(r!==t(J).CHECKIN_OPTIMIZELY_SDK_KEY){e.next=23;break}return c=i.createUserContext(o,n),e.next=20,el(c.decide.bind(c),ea.checkin,o);case 20:ea.checkin=e.sent,e.next=28;break;case 23:if(r!==t(J).ACCOUNT_PERSONALIZATION_OPTIMIZELY_SDK_KEY){e.next=28;break}return d=i.createUserContext(o),e.next=27,el(d.decide.bind(d),ea.accountPersonalization);case 27:ea.accountPersonalization=e.sent;case 28:i.close();case 29:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",Promise.all(i));case 3:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),el=(o=t(z)(t(Y).mark(function e(r,n){var i,o,a,s=arguments;return t(Y).wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=s.length>2&&void 0!==s[2]?s[2]:null,e.t0=t(Y).keys(n);case 2:if((e.t1=e.t0()).done){e.next=17;break}if(o=e.t1.value,!i){e.next=10;break}return e.next=7,r(o,i);case 7:e.t2=e.sent,e.next=13;break;case 10:return e.next=12,r(o);case 12:e.t2=e.sent;case 13:a=e.t2,n=ei(ei({},n),{},t(B)({},o,"string"!=typeof a&&a?a.enabled:a)),e.next=2;break;case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)}),eu={};e(eu,"decode",function(){return I},function(e){return I=e}),e(eu,"parse",function(){return b},function(e){return b=e}),e(eu,"encode",function(){return O},function(e){return O=e}),e(eu,"stringify",function(){return A},function(e){return A=e}),I=b=V("d8WyV"),O=A=V("8kEec");var ec=function(e){return e?t(eu).parse(e):{}},ed=function(e){if(null===e||0===e.length)return{};var r,n,i,o,a,s,l=decodeURIComponent("AS%5FNAME"),u=ec(t(X).get(l)||""),c=u.FN,d=u.LN,f=u.SF,p=u.MP,h=u.TS,v=u.BM,g=u.NN,y="true"===(u.SU||"").toLowerCase(),E=g||c;if(E){y&&(E+=" (Super User)");for(var m=0,_=e.length;m<_;m++)if("SPAN"===e[m].tagName&&-1===e[m].id.indexOf("mobile"))e[m].innerHTML="Hi, "+E;else if("memberFullName"===e[m].id)r=e[m];else if("memberTierStatus"===e[m].id)n=e[m];else if("memberMPNumber"===e[m].id)i=e[m];else if(p&&e[m].className&&-1!==e[m].className.indexOf("mp-num")){e[m].value=p;var I=document.getElementsByClassName("checkinOption"),b=document.getElementsByClassName("menu-mpnumber");I[0].value="4",I[1].value="4",b[0].classList.remove("hidden"),b[1].classList.remove("hidden");for(var O=document.getElementsByClassName("menu-cantfind-desktop"),A=0;A<O.length;A++)O[A].style.visibility="hidden"}else d&&e[m].className&&-1!==e[m].className.indexOf("manage-traveler-last-name")?e[m].value=d:"memberBalanceMiles"===e[m].id?o=e[m]:p&&"mobileMpNumber"===e[m].id?a=e[m]:"mobileBalanceMiles"===e[m].id&&(s=e[m]);r&&(r.textContent="".concat(c," ").concat(d," ").concat(f).trim());var N=h.replace("MVP","MVP<sup>&reg;</sup>");"Standard"!==h&&""!==h?n&&(n.innerHTML=N,n.className="userInfoBorderParagraph"):(n&&n.classList.add("hidden"),p?i&&(i.className="userInfoBorderParagraph"):r&&(r.className="userInfoSingleParagraph")),p?(i&&(i.textContent="Mileage Plan #: "+p),a&&(a.textContent=" - MP# ".concat(p))):(i&&i.classList.add("hidden"),a&&a.classList.add("hidden")),p&&v?(o&&(o.textContent="Available miles: "+v),s&&(s.textContent=" - ".concat(v," miles"))):(o&&o.classList.add("hidden"),s&&s.classList.add("hidden"))}return u},ef=function(){var e=document.getElementById("mobile-search-icon");e&&e.addEventListener("click",function(){return Array.from(document.getElementsByClassName("search-mobile-wrapper")).forEach(function(e){e.classList.toggle("search-mobile-wrapper-hidden")}),!1})},ep=window.hasOwnProperty&&Object.prototype.hasOwnProperty.call(window,"ontouchstart")?"touchstart":"mousedown",eh=[".autocomplete-suggestions"],ev=function(e,t){var r=!1;if(ef(),e&&t){var n=document.querySelectorAll(".hf-nav-mobile-toggle"),i=function(){document.body.style.overflow="",document.body.style.position="",document.body.style.height="",document.body.classList.remove("menu-open"),t.classList.remove("open"),r=!1;for(var e=0;e<n.length;e++)n[e].setAttribute("aria-label","open menu"),n[e].setAttribute("aria-expanded","false");document.removeEventListener(ep,a)},o=function(){document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.height="100%",document.body.classList.add("menu-open");for(var e=0;e<n.length;e++)n[e].setAttribute("aria-label","close menu"),n[e].setAttribute("aria-expanded","true");t.classList.add("open"),r=!0,document.addEventListener(ep,a)},a=function(n){var o=n.target||window.event.srcElement;o.closest(eh.join(", "))||t.contains(o)||e.contains(o)||!r||i()},s=function(){r?i():o()};e.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),t.classList.contains("hidden")?(t.classList.remove("hidden"),setTimeout(s,50)):s()});var l=function(){t.classList.contains("open")||t.classList.add("hidden")};t.addEventListener("transitionend",l,!1),t.addEventListener("webkitTransitionEnd",l,!1)}},eg=decodeURIComponent("AS%5FACNT%5FCOMPANY"),ey=ec(t(X).get(eg)||""),eE=ey.COMPANYNAME,em=ey.ROLE,e_=function(){return!!eE},eI=decodeURIComponent("AS%5FPROMO%5FLOGIN"),eb=ec(t(X).get(eI)||"").STATUS,eO=function(){return"OK"===eb},eA=function(){return window.location.hostname.toLowerCase().includes("selfservice")},eN=function(){var e=window.location.hostname;if(!e)return!1;var t=e.toLowerCase();return!(t.includes("hotelcars.alaskaair.com")||t.includes("vacations.alaskaair.com"))&&(t.includes("alaskaair.convertlanguage.com")||t.includes("alaskaair.com")||t.includes("localhost")||t.includes("azurewebsites.net")||t.includes("azurefd.net")||t.includes("everymundo.com"))},eT=function(){var e=window.location.hostname;if(!e)return!1;var t=e.toLowerCase();return!!(t.includes(".alaskaair.com")||t.includes("alaskaair.convertlanguage.com"))&&!t.includes("www.alaskaair.com")};function eR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eS=function(){document&&(ea.access.new_login_ui?(document.getElementById("new-sign-in").classList.remove("hide"),document.getElementById("navbar-greeting-link").classList.add("show-if-signed-in-true"),document.getElementById("old-sign-in").remove()):document.getElementById("new-sign-in").remove())},eL={},ew="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==x&&x||{},eC={searchParams:"URLSearchParams"in ew,iterable:"Symbol"in ew&&"iterator"in Symbol,blob:"FileReader"in ew&&"Blob"in ew&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in ew,arrayBuffer:"ArrayBuffer"in ew};if(eC.arrayBuffer)var ek=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],eU=ArrayBuffer.isView||function(e){return e&&ek.indexOf(Object.prototype.toString.call(e))>-1};function eD(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function ex(e){return"string"!=typeof e&&(e=String(e)),e}function eP(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return eC.iterable&&(t[Symbol.iterator]=function(){return t}),t}function eM(e){this.map={},e instanceof eM?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function eV(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}}function eF(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function eB(e){var t=new FileReader,r=eF(t);return t.readAsArrayBuffer(e),r}function ej(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function eK(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e){if("string"==typeof e)this._bodyText=e;else if(eC.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(eC.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(eC.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;eC.arrayBuffer&&eC.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=ej(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):eC.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||eU(e))?this._bodyArrayBuffer=ej(e):this._bodyText=e=Object.prototype.toString.call(e)}}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):eC.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},eC.blob&&(this.blob=function(){var e=eV(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return eV(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(eC.blob)return this.blob().then(eB);throw Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,n,i,o=eV(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,r=eF(t=new FileReader),i=(n=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?n[1]:"utf-8",t.readAsText(e,i),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},eC.formData&&(this.formData=function(){return this.text().then(e$)}),this.json=function(){return this.text().then(JSON.parse)},this}eM.prototype.append=function(e,t){e=eD(e),t=ex(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},eM.prototype.delete=function(e){delete this.map[eD(e)]},eM.prototype.get=function(e){return e=eD(e),this.has(e)?this.map[e]:null},eM.prototype.has=function(e){return this.map.hasOwnProperty(eD(e))},eM.prototype.set=function(e,t){this.map[eD(e)]=ex(t)},eM.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},eM.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),eP(e)},eM.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),eP(e)},eM.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),eP(e)},eC.iterable&&(eM.prototype[Symbol.iterator]=eM.prototype.entries);var eH=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function eG(e,t){if(!(this instanceof eG))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,i=(t=t||{}).body;if(e instanceof eG){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new eM(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new eM(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),eH.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in ew)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function e$(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function ez(e,t){if(!(this instanceof ez))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new eM(t.headers),this.url=t.url||"",this._initBody(e)}eG.prototype.clone=function(){return new eG(this,{body:this._bodyInit})},eK.call(eG.prototype),eK.call(ez.prototype),ez.prototype.clone=function(){return new ez(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new eM(this.headers),url:this.url})},ez.error=function(){var e=new ez(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var eq=[301,302,303,307,308];ez.redirect=function(e,t){if(-1===eq.indexOf(t))throw RangeError("Invalid status code");return new ez(null,{status:t,headers:{location:e}})};var eY=ew.DOMException;try{new eY}catch(e){(eY=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),eY.prototype.constructor=eY}function eW(e,t){return new Promise(function(r,n){var i=new eG(e,t);if(i.signal&&i.signal.aborted)return n(new eY("Aborted","AbortError"));var o=new XMLHttpRequest;function a(){o.abort()}if(o.onload=function(){var e,t,n={statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new eM,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();try{t.append(n,i)}catch(e){console.warn("Response "+e.message)}}}),t)};0===i.url.indexOf("file://")&&(o.status<200||o.status>599)?n.status=200:n.status=o.status,n.url="responseURL"in o?o.responseURL:n.headers.get("X-Request-URL");var a="response"in o?o.response:o.responseText;setTimeout(function(){r(new ez(a,n))},0)},o.onerror=function(){setTimeout(function(){n(TypeError("Network request failed"))},0)},o.ontimeout=function(){setTimeout(function(){n(TypeError("Network request timed out"))},0)},o.onabort=function(){setTimeout(function(){n(new eY("Aborted","AbortError"))},0)},o.open(i.method,function(e){try{return""===e&&ew.location.href?ew.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&(eC.blob?o.responseType="blob":eC.arrayBuffer&&(o.responseType="arraybuffer")),t&&"object"==typeof t.headers&&!(t.headers instanceof eM||ew.Headers&&t.headers instanceof ew.Headers)){var s=[];Object.getOwnPropertyNames(t.headers).forEach(function(e){s.push(eD(e)),o.setRequestHeader(e,ex(t.headers[e]))}),i.headers.forEach(function(e,t){-1===s.indexOf(t)&&o.setRequestHeader(t,e)})}else i.headers.forEach(function(e,t){o.setRequestHeader(t,e)});i.signal&&(i.signal.addEventListener("abort",a),o.onreadystatechange=function(){4===o.readyState&&i.signal.removeEventListener("abort",a)}),o.send(void 0===i._bodyInit?null:i._bodyInit)})}eW.polyfill=!0,ew.fetch||(ew.fetch=eW,ew.Headers=eM,ew.Request=eG,ew.Response=ez),eL=self.fetch.bind(self);var eX=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".populate-wallet-balance",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"memberWalletBalance",n=document.querySelectorAll(t),i=0;i<n.length;i++)e&&!isNaN(e)?(n[i].id===r?n[i].textContent="Wallet balance: $".concat(eZ(e)):n[i].textContent=" - $".concat(eZ(e)),n[i].classList.remove("hidden")):n[i].classList.add("hidden")},eZ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";if(null===e||isNaN(e))return"";t=isNaN(t=Math.abs(t))?2:t;var i=e<0?"-":"",o=parseInt(e=Math.abs(Number(e)||0).toFixed(t)).toString(),a=o.length>3?o.length%3:0;return i+(a?o.substr(0,a)+n:"")+o.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+n)+(t?r+Math.abs(e-o).toFixed(t).slice(2):"")},eJ=function(){var e=t(X).get("recentlySignedOutNewLoginUI");t(X).remove("recentlySignedOutNewLoginUI",{path:"/",domain:".alaskaair.com"}),"true"!==e||window.location.href.includes("UCSignInStart")||window.location.href.includes("UCSignOut")||window.location.href.includes("account/login")||window.location.href.includes("account/overview")||document.getElementById("signed-out-banner").classList.remove("signed-out-false")},eQ=document.querySelectorAll(".populate-display-name, .mp-num, .manage-traveler-last-name"),e0=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"//www.alaskaair.com/services/v1/myaccount/getloginstatus";if(eN()){var n=document.getElementsByClassName("hf"),i=function(e){for(var t=0;t<n.length;t++)n[t].classList.add(e)},o=new Date().getTime();return t(eL)(r+"?t=".concat(o)).then(function(e){if(!e.ok)throw Error("Failed to fetch login status");return e.json()}).then(function(t){t.IsLoggedIn?(i("signed-in-true"),e()):(i("signed-in-false"),eJ())}).catch(function(){i("signed-in-false"),i("signed-in-error"),eJ()})}},e1=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t(J).WALLET_SERVICE_URL;if(!e||!eN())return Promise.resolve();var o=e2();if(null!==o){r(o);return}e3().then(function(r){return t(eL)(i+"/wallet/balance?mileagePlanNumber=".concat(e),{headers:{"Ocp-Apim-Subscription-Key":t(J).WALLET_SERVICE_KEY,Authorization:"Bearer ".concat(r)}})}).then(function(e){if(!e.ok)throw Error("Failed to fetch wallet balance");return e.json()}).then(function(e){e5(e),r(e)}).catch(function(e){n(e)})},e2=function(){var e=window.localStorage.getItem("wallet");if(null!==e){var t=JSON.parse(e);if(Date.parse(t.expiration)>Date.now()&&null!==t.balance)return t.balance}return null},e5=function(e){var t=window.localStorage,r=new Date;r.setMinutes(r.getMinutes()+10),t.setItem("wallet",JSON.stringify({balance:e,expiration:r}))},e3=function(){return t(eL)("//www.alaskaair.com/account/token").then(function(e){if(!e.ok)throw Error("Failed to fetch JWT");return e.json()}).then(function(e){return e.token})},e4=(a=t(z)(t(Y).mark(function e(){return t(Y).wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",e0(function(){e1(ed(eQ).MP,function(e){eX(e)},function(){})}));case 4:e.prev=4,e.t0=e.catch(0),console.log("unable to detect sign in");case 7:case"end":return e.stop()}},e,null,[[0,4]])})),function(){return a.apply(this,arguments)}),e6=function(e){var r=window.location.search;if(r)return t(eu).parse(r)[e]},e8=(s=t(z)(t(Y).mark(function e(){var r,n,i,o,a,s,l;return t(Y).wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=e6("cc")||window.sessionStorage&&window.sessionStorage.getItem("countryCode"),n=e6("ip"),!(r&&!n)){e.next=4;break}return e.abrupt("return",r);case 4:return i=new Date().getTime(),o="https://geoservice.alaskaair.com/api/lookup/",n?o+="byip?ipAddress="+n+"&"+i:o+="resolve?"+i,e.next=9,t(eL)(o).then(function(e){if(!e.ok)throw Error("Failed to fetch geolocation data");return e.json()}).catch(function(){console.log("Geo Fetch Failed")});case 9:return(a=e.sent)&&a.ResolvedCity&&a.ResolvedCity.CountryCode&&(s=a.ResolvedCity.CountryCode.toUpperCase()),a&&a.ResolvedCity&&a.ResolvedCity.NearestAlaskaDestination&&(l=a.ResolvedCity.NearestAlaskaDestination.Code),window.sessionStorage&&(s&&window.sessionStorage.setItem("countryCode",s),l&&window.sessionStorage.setItem("nearestAirport",l)),e.abrupt("return",s);case 14:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)}),e7=(l=t(z)(t(Y).mark(function e(){var r,n;return t(Y).wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=document.getElementsByClassName("hf"),e.next=3,e8();case 3:if("CA"===e.sent)for(n=0;n<r.length;n++)r[n].classList.add("is-canada");case 5:case"end":return e.stop()}},e)})),function(){return l.apply(this,arguments)}),e9=(u=t(z)(t(Y).mark(function e(r,n){var i,o,a;return t(Y).wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.location.search&&window.location.search.match(/ipAddress=([^&]*)/)&&(i=window.location.search.match(/ipAddress=([^&]*)/)[1]),e.next=3,t(eL)(r+(i?"?ipAddress=".concat(i):"")).then(function(e){if(!e.ok)throw Error("Failed to fetch CC Ad partial");return e.text()}).catch(function(){});case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return");case 6:if(a=document.getElementById(n)){e.next=9;break}return e.abrupt("return");case 9:a.innerHTML=o;case 10:case"end":return e.stop()}},e)})),function(e,t){return u.apply(this,arguments)}),te=function(){var e=decodeURIComponent("AS%5FNAME");return"true"===(ec(t(X).get(e)||"").SU||"").toLowerCase()},tt=function(){var e,t,r=null===(e=document)||void 0===e?void 0:e.querySelectorAll(".old-superuser-search-link"),n=null===(t=document)||void 0===t?void 0:t.querySelectorAll(".new-superuser-search-link");r&&0!==r.length&&n&&0!==n.length&&(ea.access.new_super_user_ui?(n.forEach(function(e){return e.classList.remove("hide")}),r.forEach(function(e){return e.remove()})):n.forEach(function(e){return e.remove()}))},tr=decodeURIComponent("AS%5FCART"),tn={};function ti(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}(tn=function(e,t,r){return t&&ti(e.prototype,t),r&&ti(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}).__esModule=!0,tn.default=tn;var to={};(to=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}).__esModule=!0,to.default=to;var ta=new(t(tn)(function e(){t(to)(this,e),t(B)(this,"closestNextElement",void 0)})),ts={TAB:9,UP:38,DOWN:40},tl=function(e,t,r){e&&e.addEventListener("keydown",function(e){var n=e.keyCode===ts.TAB,i=r===ts.UP;if(n&&(i?e.shiftKey:!e.shiftKey)||e.keyCode===r)return t.focus(),e.preventDefault(),!1})},tu=function(e){for(var t,r,n,i=e.length,o=0;o<i;o++)r=e[(o-1+i)%i],t=e[o],n=e[(o+1)%i],tl(t,r,ts.UP),tl(t,n,ts.DOWN)},tc=function(e){if(e.keyCode===ts.UP){var t=e.srcElement.getAttribute("prev");return("getPrevElem"===t?ta.closestNextElement?ta.closestNextElement.querySelector("a")||ta.closestNextElement.querySelector("input"):document.querySelector("select.checkinOption"):document.getElementsByName(t)).focus(),e.preventDefault(),!1}if(e.keyCode===ts.DOWN){var r=e.srcElement.getAttribute("next");return document.getElementsByName(r)[1].focus(),e.preventDefault(),!1}},td=function(e){tl(e[0],e[e.length-1],ts.UP),tl(e[e.length-1],e[0],ts.DOWN)},tf=function(e){e&&e.classList.add("hidden")},tp=function(e){e&&e.classList.remove("hidden")},th=null,tv=null,tg=function(e){new Image().src=e},ty=function(e){for(var t,r=/<img [^>]*src="([^"]*)"/g,n=/url\(["']([^"']*)["']\)/g,i=[];null!==(t=r.exec(e));)i.push(t[1]);for(;null!==(t=n.exec(e));)i.push(t[1]);for(var o=0;o<i.length;o++)tg(i[o])},tE=function(e){var t=document.createElement("div");t.innerHTML=e;for(var r=t.getElementsByTagName("script"),n=0;n<r.length;n++){var i=document.createElement("script");i.innerHTML=r[n].innerHTML,document.body.appendChild(i)}},tm=function(){return t(eL)("https://www.alaskaair.com/content/partial/loading-interstitial").then(function(e){if(!e.ok)throw Error("Failed to fetch loading interstitial");return e.text()}).catch(function(){})},t_=function(e){(tv=document.createElement("div")).innerHTML=e,document.body.appendChild(tv),tE(e)},tI=(c=t(z)(t(Y).mark(function e(){return t(Y).wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!th){e.next=4;break}t_(th),e.next=6;break;case 4:return e.next=6,tm().then(function(e){e&&t_(e)});case 6:case"end":return e.stop()}},e)})),function(){return c.apply(this,arguments)}),tb=(d=t(z)(t(Y).mark(function e(){var r;return t(Y).wrap(function(e){for(;;)switch(e.prev=e.next){case 0:customElements.get("auro-dialog")||((r=document.createElement("script")).setAttribute("src","https://unpkg.com/@alaskaairux/auro-interruption@1.4.4/dist/auro-dialog__bundled.js"),r.setAttribute("type","module"),document.body.appendChild(r));case 1:case"end":return e.stop()}},e)})),function(){return d.apply(this,arguments)}),tO=(f=t(z)(t(Y).mark(function e(r){var n,i,o,a,s,l,u,c=arguments;return t(Y).wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"",i=c.length>2&&void 0!==c[2]?c[2]:"",e.next=4,tb();case 4:return o=document.createElement("auro-dialog"),a=tA(r,"header"),o.appendChild(a),n&&(s=tA(n,"content"),o.appendChild(s)),i&&(l=tA(i,"footer"),o.appendChild(l)),u="dialog-"+(Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)),o.setAttribute("id",u),document.body.appendChild(o),e.abrupt("return",o);case 13:case"end":return e.stop()}},e)})),function(e){return f.apply(this,arguments)}),tA=function(e,t){var r;return"string"==typeof e?(r=document.createElement("div")).innerHTML=e:r=e,r.setAttribute("slot",t),r};function tN(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return tT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tT(e,t)}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function tT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tR={},tS={};(tS=function(e){if(Array.isArray(e))return e}).__esModule=!0,tS.default=tS;var tL={};(tL=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}).__esModule=!0,tL.default=tL;var tw={},tC={};(tC=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}).__esModule=!0,tC.default=tC,(tw=function(e,t){if(e){if("string"==typeof e)return tC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tC(e,t)}}).__esModule=!0,tw.default=tw;var tk={};(tk=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}).__esModule=!0,tk.default=tk,(tR=function(e,t){return tS(e)||tL(e,t)||tw(e,t)||tk()}).__esModule=!0,tR.default=tR;var tU=function(){for(var e=0,r=function t(r){void 0!==window.utag?window.utag.link(r):e<30&&(setTimeout(t,2e3,r),e++)},n=function(e){return Array.prototype.filter.call(document.querySelectorAll("[".concat(e,"]")),function(e){return 0!==e.offsetHeight&&0!==e.offsetWidth})},i=function(e,n,i,o){return function(){r(t(B)({event_name:e},n,i&&window.utag_data?window.utag_data.page_name+o:o))}},o=n("trackonImpression"),a=0;a<o.length;a++){var s=o[a];i(s.getAttribute("onImpressionEventId"),s.getAttribute("onImpressionPropertyInfo"),"True"===s.getAttribute("onImpressionAddPrefix"),s.getAttribute("onImpressionTrackingInfo"))()}for(var l=n("trackOnClick"),u=0;u<l.length;u++){var c=l[u],d=c.getAttribute("onClickEventId"),f=c.getAttribute("onClickPropertyInfo"),p="True"===c.getAttribute("onClickAddPrefix"),h=c.getAttribute("onClickTrackingInfo");c.addEventListener("click",i(d,f,p,h))}for(var v={},g=window.location.search?window.location.search.split("?").pop().split("&"):[],y=0;y<g.length;y++){var E=g[y].split("=");if(E.length>1){var m=t(tR)(E,2),_=m[0],I=m[1];v[_.toLowerCase()]=I.toLowerCase()}}var b=function(e){window.ga&&window.ga(function(t){for(var r=document.querySelectorAll("[".concat(e,"]")),n=t.get("clientId"),i=0;i<r.length;i++){var o=r[i],a=o.getAttribute("href");a&&a.includes("?")?o.href="".concat(a,"&genericvariables=861~").concat(n):a&&!a.includes("?")&&(o.href="".concat(a,"?genericvariables=861~").concat(n))}})};void 0!==v.semid&&v.semid.length>0?b("trackSemCid"):void 0!=v.eml&&v.eml.length>0?b("trackEmlCid"):0===Object.keys(v).length&&v.constructor===Object&&b("trackSeoCid")},tD=[],tx=function(){return tD},tP={ESC:27},tM="role",tV="aria-hidden",tF="aria-expanded",tB=window.hasOwnProperty&&Object.prototype.hasOwnProperty.call(window,"ontouchstart")?"touchstart":"mousedown",tj=[".autocomplete-suggestions"],tK=function(e){var t=e.target||window.event.srcElement;if(!t.closest(tj.join(", "))){for(var r=!1,n=0;n<tD.length&&!1===r;n++)null!=tD[n]._link&&(tD[n]._link.contains(t)||tD[n]._menu.contains(t))&&(r=!0);if(!r)for(var i=0;i<tD.length;i++)tD[i]._collapseOnOutsideClick&&tD[i].hide()}},tH=function(e){if(0==e._dropdownParent.getElementsByClassName("userInfo").length){for(var t=e._dropdownParent.querySelectorAll("form"),r=0;r<t.length;r++)t[r].parentElement.classList.contains("menu-mobile-form")&&t[r].scrollIntoView(!0);for(var n=e._dropdownParent.querySelectorAll("a, input, select"),i=0;i<n.length;i++){var o=n[i];if(o!==e._link&&o.offsetHeight>0){o.focus();break}}}},tG=t(tn)(function e(r){var n=this;t(to)(this,e),t(B)(this,"_state",0),t(B)(this,"_dropdownParent",void 0),t(B)(this,"_link",void 0),t(B)(this,"_menu",void 0),t(B)(this,"_collapseOnOutsideClick",void 0),t(B)(this,"doFocusOnFirst",function(e){var t=n._dropdownParent.querySelectorAll(e);t&&t.length>0&&t[0].focus()}),t(B)(this,"show",function(e){if(1!==n._state){var t=void 0==e||!e;if(t)for(var r=0;r<tD.length;r++)tD[r].hide();n._dropdownParent.classList.add("pure-menu-active"),n._link.setAttribute(tF,!0),n._menu.setAttribute(tV,!1),n._state=1,document.body.classList.add("nav-open");var i=n._dropdownParent.getAttribute("data-open-class");i&&document.body.classList.add(i),document.addEventListener(tB,tK),tH(n),t&&n.resizeBackground(),("navbar-greeting-link"===n._link.getAttribute("id")||n._link.classList.contains("navbar-greeting-link-mobile")||"ezb-navbar-greeting-link"==n._link.getAttribute("id"))&&(document.querySelectorAll("#hf-h.signed-in-true").length>0?"undefined"!=typeof utag&&void 0!==window.utag&&"function"==typeof window.utag.link&&window.utag.link({event_name:"link_click",link_tracking:"nav : "+(window.utag_data?window.utag_data.page_name:"")+" : account-signedIn open"}):"undefined"!=typeof utag&&void 0!==window.utag&&"function"==typeof window.utag.link&&window.utag.link({event_name:"link_click",link_tracking:"nav : "+(window.utag_data?window.utag_data.page_name:"")+" : account-signIn open"}))}}),t(B)(this,"hide",function(){if(0!==n._state){var e=n._dropdownParent.querySelector(".pure-menu-active .pure-menu-background");e&&(e.style.width="0px",N=null),n._dropdownParent.classList.remove("pure-menu-active"),n._link.setAttribute(tF,!1),n._menu.setAttribute(tV,!0),n._state=0,document.body.classList.remove("nav-open");var t=n._dropdownParent.getAttribute("data-open-class");t&&document.body.classList.remove(t),document.removeEventListener(tB,tK)}}),t(B)(this,"refreshBackground",function(){n.resizeBackground()}),t(B)(this,"resizeBackground",function(){var e=n._dropdownParent.querySelector(".pure-menu-active .pure-menu-background");if(e){var t=n._dropdownParent.querySelector(".pure-menu-active > div"),r=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=r>1260?(r-t.offsetWidth)/2+0:16.5;e.style.width="".concat(r,"px"),e.style.left="".concat(-1*i,"px"),N=n}}),t(B)(this,"toggle",function(){0===n._state?n.show():n.hide()}),t(B)(this,"halt",function(e){e.stopPropagation(),e.preventDefault()}),this._dropdownParent=r,this._link=r.querySelector(".pure-menu-link"),this._menu=r.querySelector(".pure-menu-children"),this._collapseOnOutsideClick=r.classList.contains("collapse-on-outside-click"),null!==this._link&&null!==this._link.getAttribute("aria-haspopup")&&this._link.setAttribute("aria-haspopup","true"),null!==this._menu&&(this._menu.setAttribute(tM,"menu"),this._menu.setAttribute(tV,"true")),null!==this._menu&&null!==this._link.getAttribute("id")&&this._menu.setAttribute("aria-labelledby",this._link.getAttribute("id"));for(var i=document.querySelectorAll(".pure-menu-has-children li"),o=0;o<i.length;o++)i[o].setAttribute(tM,"presentation");for(var a=document.querySelectorAll(".pure-menu-has-children a"),s=0;s<a.length;s++)a[s].setAttribute(tM,"menuitem");var l=document.querySelector("#navbar-greeting-link");null!=l&&l.setAttribute("role","button");var u=document.querySelector("#ezb-navbar-greeting-link");null!=u&&u.setAttribute("role","button"),null!==this._link&&this._link.addEventListener("click",function(e){e.preventDefault(),n.toggle()}),document.addEventListener("keydown",function(e){1===n._state&&(n._menu.querySelector(".pure-menu-active")||e.keyCode!==tP.ESC||(n._link.focus(),n.halt(e),n.hide()))})}),t$="input-error",tz=document.getElementById("menuManage"),tq=tz?tz.getElementsByClassName("pure-menu-background")[0]:void 0,tY=".manage-trip-form",tW=function(e){for(var t=0;t<e.length;t++)e[t].classList.remove(t$)},tX=function(e,t,r){for(var n=0;n<e.length;n++){var i=e[n];i.style.display="",i.id=r}void 0!=tq&&(tq.style.height="400px"),t&&(t.setAttribute("aria-describedby",r),t.setAttribute("aria-invalid",!0),t.classList.add(t$))},tZ=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];n.style.display="none",n.id=""}void 0!=tq&&(tq.style.height=""),t&&(t.removeAttribute("aria-describedby"),t.removeAttribute("aria-invalid"),t.classList.remove(t$))},tJ=function(e){var t=[];tW(e.getElementsByClassName(t$));var r=e.elements.TravelerLastName,n=e.elements.CodeOrNumber,i=e.getAttribute("location"),o=e.getElementsByClassName("manage-error-tlastname"),a=e.getElementsByClassName("error-validation-summary");(a.length>0&&(a[0].style.display="none"),r.value.trim().length<1||r&&r.value.trim()===r.getAttribute("placeholder"))?(tX(o,r,"".concat(i,"-manage-error-tlastname")),t.push(r)):tZ(o,r);var s=n.value.trim(),l=[/^[A-Za-z]{6}$|^[0-9]{10}$|^[0-9]{13}$/],u=e.getElementsByClassName("manage-error-confirmationcode");return l.length&&l[0].test(s)?tZ(u,n):(tX(u,n,"".concat(i,"-manage-error-tlastname")),t.push(n)),t.length>0&&(a.length>0&&(a[0].style.display=""),t[0].focus()),0===t.length},tQ=function(e){var t=e.getElementsByClassName("cantfind-desktop")[0];t&&t.addEventListener("click",function(){document.getElementById("navbar-signin-trips").click();for(var e,t=tx(),r=0;r<t.length;r++)if(t[r]._link&&t[r]._link.id&&"navbar-greeting-link"===t[r]._link.id){e=t[r];break}e&&(e.show(!0),e.doFocusOnFirst("input"))});var r=e.getElementsByClassName("cantfind-desktop")[0];r&&r.addEventListener("click",function(){document.getElementById("navbar-signin-trips-mobile").click();for(var e,t=tx(),r=0;r<t.length;r++)if(t[r]._link&&t[r]._link.id&&"navMobileReservations"===t[r]._link.id){e=t[r];break}e&&e.show(!0),document.getElementsByClassName("manage-mobile-menu-a")[0].click()})},K=V("hXfjp"),t0={},t1=function(e){function t(e,t){return e.classList?e.classList.contains(t):RegExp("\\b"+t+"\\b").test(e.className)}function r(e,t,r){e.attachEvent?e.attachEvent("on"+t,r):e.addEventListener(t,r)}function n(e,t,r){e.detachEvent?e.detachEvent("on"+t,r):e.removeEventListener(t,r)}function i(e,n,i,o){r(o||document,n,function(r){for(var n,o=r.target||r.srcElement;o&&!(n=t(o,e));)o=o.parentElement;n&&i.call(o,r)})}if(document.querySelector){var o={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(e,t){var r=RegExp("("+(t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")).split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(r,"<b>$1</b>")+"</div>"},onSelect:function(){}};for(var a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);for(var s="object"==typeof o.selector?[o.selector]:document.querySelectorAll(o.selector),l=0;l<s.length;l++){var u=s[l];u.sc=document.createElement("div"),u.sc.className="autocomplete-suggestions "+o.menuClass,u.autocompleteAttr=u.getAttribute("autocomplete"),u.setAttribute("autocomplete","off"),u.cache={},u.last_val="",u.updateSC=function(e,t){var r=u.getBoundingClientRect();if(u.sc.style.left=Math.round(r.left+(window.pageXOffset||document.documentElement.scrollLeft)+o.offsetLeft)+"px",u.sc.style.top=Math.round(r.bottom+(window.pageYOffset||document.documentElement.scrollTop)+o.offsetTop)+"px",u.sc.style.width=Math.round(r.right-r.left)+"px",!e&&(u.sc.style.display="block",u.sc.maxHeight||(u.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(u.sc,null):u.sc.currentStyle).maxHeight)),u.sc.suggestionHeight||(u.sc.suggestionHeight=u.sc.querySelector(".autocomplete-suggestion").offsetHeight),u.sc.suggestionHeight)){if(t){var n=u.sc.scrollTop,i=t.getBoundingClientRect().top-u.sc.getBoundingClientRect().top;i+u.sc.suggestionHeight-u.sc.maxHeight>0?u.sc.scrollTop=i+u.sc.suggestionHeight+n-u.sc.maxHeight:0>i&&(u.sc.scrollTop=i+n)}else u.sc.scrollTop=0}},r(window,"resize",u.updateSC),document.body.appendChild(u.sc),i("autocomplete-suggestion","mouseleave",function(){var e=u.sc.querySelector(".autocomplete-suggestion.selected");e&&setTimeout(function(){e.className=e.className.replace("selected","")},20)},u.sc),i("autocomplete-suggestion","mouseover",function(){var e=u.sc.querySelector(".autocomplete-suggestion.selected");e&&(e.className=e.className.replace("selected","")),this.className+=" selected"},u.sc),i("autocomplete-suggestion","mousedown",function(e){if(t(this,"autocomplete-suggestion")){var r=this.getAttribute("data-val");u.value=r,o.onSelect(e,r,this),u.sc.style.display="none"}},u.sc),u.blurHandler=function(){try{var e=document.querySelector(".autocomplete-suggestions:hover")}catch(t){var e=0}e?u!==document.activeElement&&setTimeout(function(){u.focus()},20):(u.last_val=u.value,u.sc.style.display="none",setTimeout(function(){u.sc.style.display="none"},350))},r(u,"blur",u.blurHandler);var c=function(e){var t=u.value;if(u.cache[t]=e,e.length&&t.length>=o.minChars){for(var r="",n=0;n<e.length;n++)r+=o.renderItem(e[n],t);u.sc.innerHTML=r,u.updateSC(0)}else u.sc.style.display="none"};u.keydownHandler=function(e){var t=window.event?e.keyCode:e.which;if((40==t||38==t)&&u.sc.innerHTML){var r,n=u.sc.querySelector(".autocomplete-suggestion.selected");return n?(r=40==t?n.nextSibling:n.previousSibling)?(n.className=n.className.replace("selected",""),r.className+=" selected",u.value=r.getAttribute("data-val")):(n.className=n.className.replace("selected",""),u.value=u.last_val,r=0):(r=40==t?u.sc.querySelector(".autocomplete-suggestion"):u.sc.childNodes[u.sc.childNodes.length-1],r.className+=" selected",u.value=r.getAttribute("data-val")),u.updateSC(0,r),!1}if(27==t)u.value=u.last_val,u.sc.style.display="none";else if(13==t||9==t){var n=u.sc.querySelector(".autocomplete-suggestion.selected");n&&"none"!=u.sc.style.display&&(o.onSelect(e,n.getAttribute("data-val"),n),setTimeout(function(){u.sc.style.display="none"},20))}},r(u,"keydown",u.keydownHandler),u.keyupHandler=function(e){var t=window.event?e.keyCode:e.which;if(!t||(35>t||t>40)&&13!=t&&27!=t){var r=u.value;if(r.length>=o.minChars){if(r!=u.last_val){if(u.last_val=r,clearTimeout(u.timer),o.cache){if(r in u.cache)return void c(u.cache[r]);for(var n=1;n<r.length-o.minChars;n++){var i=r.slice(0,r.length-n);if(i in u.cache&&!u.cache[i].length)return void c([])}}u.timer=setTimeout(function(){o.source(r,c)},o.delay)}}else u.last_val=r,u.sc.style.display="none"}},r(u,"keyup",u.keyupHandler),u.focusHandler=function(e){u.last_val="\n",u.keyupHandler(e)},o.minChars||r(u,"focus",u.focusHandler)}this.destroy=function(){for(var e=0;e<s.length;e++){var t=s[e];n(window,"resize",t.updateSC),n(t,"blur",t.blurHandler),n(t,"focus",t.focusHandler),n(t,"keydown",t.keydownHandler),n(t,"keyup",t.keyupHandler),t.autocompleteAttr?t.setAttribute("autocomplete",t.autocompleteAttr):t.removeAttribute("autocomplete"),document.body.removeChild(t.sc),t=null}}}};"function"==typeof define&&define.amd?define("autoComplete",function(){return t1}):t0?t0=t1:window.autoComplete=t1;var t2=[{code:2,elemClass:"confirmcode-option",errorClass:"checkin-error-2",name:"RECLOC",nbrLettersToVdalidate:[6]},{code:3,elemClass:"eticket-option",errorClass:"checkin-error-3",name:"TKTNUM",nbrLettersToVdalidate:[10,13]}],t5={hidden:"hidden",inputError:"input-error"},t3={departureCity:{errorClass:"checkin-error-departure",formName:"ORIGIN",helpDdClass:"helpAsDD"},options:{errorClass:"checkin-error-option",formName:"LookUpReservation"},validationSummary:{class:"error-validation-summary"},notSopportedCheckInAirports:["HAV"],notSupportedErrorClass:"checkin-error-departure-notsupported"},t4=function(e){e.elements.LookUpReservation.addEventListener("change",function(t){ta.closestNextElement=null;for(var r=0;r<t2.length;r++){var n=t2[r],i=e.elements[n.name].parentElement.classList;n.code==(t.target?t.target.value:e.elements.LookUpReservation.value)?(i.remove(t5.hidden),ta.closestNextElement=e.elements[n.name].parentElement):i.add(t5.hidden)}})},t6=function(e,r,n,i,o,a){var s="object"==t(K)(r)?r:e.getElementsByClassName(r)[0],l=s.classList;if(i?l.add(n):l.remove(n),o){var u="object"==t(K)(o)?o:e.getElementsByClassName(o)[0];a?(u.setAttribute("aria-describedby",s.id),u.setAttribute("aria-invalid",!0)):(u.removeAttribute("aria-describedby"),u.removeAttribute("aria-invalid"))}},t8=function(e,t){for(var r=0;r<t2.length;r++){var n=t2[r];t6(e,n.errorClass,t5.hidden,!0),r!=t&&(e.getElementsByClassName(n.elemClass)[0].value="",t6(e,n.elemClass,t5.inputError,!1,n.elemClass,!1))}},t7=function(e,t){var r=e?e.length:0,n=4!=t.code,i=!1;return t.nbrLettersToVdalidate.length>1&&n?i=r>=t.nbrLettersToVdalidate[0]&&r<=t.nbrLettersToVdalidate[1]:n&&(i=r==t.nbrLettersToVdalidate[0]),4==t.code&&(i=!isNaN(parseFloat(e))&&isFinite(e)&&r<=t.nbrLettersToVdalidate[0]&&r>0),i},t9=function(e,t){return e.getElementsByClassName(t.elemClass)[0].value},re=function(e){var t=t3.notSopportedCheckInAirports.indexOf(e.elements.DepartureAirport.getAttribute("data-city-code"))>-1,r=!!e.elements.DepartureAirport.value;t6(e,e.elements.DepartureAirport,t5.inputError,!r||t),t6(e,t3.departureCity.errorClass,t5.hidden,r,e.elements.DepartureAirport,!r),t6(e,t3.notSupportedErrorClass,t5.hidden,!t);var n=1!=e.elements.LookUpReservation.value;t6(e,t3.options.errorClass,t5.hidden,n,e.elements.LookUpReservation,!n),t6(e,e.elements.LookUpReservation,t5.inputError,!n);var i=parseInt(e.elements.LookUpReservation.value)-2;t8(e,i);var o=!1;if(n){var a=t2[i];o=t7(t9(e,a),a),t6(e,a.errorClass,t5.hidden,o,a.elemClass,!o),t6(e,a.elemClass,t5.inputError,!o)}var s=r&&n&&o;return t6(e,t3.validationSummary.class,t5.hidden,s),s},rt=function(e){window.utag&&"function"==typeof window.utag.link&&window.utag.link({event_name:"link_click",link_tracking:"nav:checkin-check-in"});var r=t(B)(t(B)(t(B)(t(B)(t(B)({DepartureCity:encodeURIComponent(e.elements.DepartureAirport.value)},t3.departureCity.formName,encodeURIComponent(e.elements.DepartureAirport.getAttribute("data-city-code"))),t3.options.formName,e.elements.LookUpReservation.value),t2[0].name,encodeURIComponent(e.elements[t2[0].name].value)),t2[1].name,encodeURIComponent(e.elements[t2[1].name].value)),"PRETRIP","true"),n="".concat(e.action,"?").concat(Object.keys(r).map(function(e){return"".concat(e,"=").concat(r[e])}).join("&"));window.location.assign(n)},rr=function(e){var r;e.elements.CheckinBtn.addEventListener("click",(r=t(z)(t(Y).mark(function r(n){var i,o,a;return t(Y).wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),re(e)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,ra(e);case 5:if(!(null!=(a=t.sent)&&null!==(i=a.Result)&&void 0!==i&&i.IsInternational)){t.next=9;break}return rl(a,e),t.abrupt("return");case 9:null!=a&&null!==(o=a.Result)&&void 0!==o&&o.HasBoardingDocs&&rs(a,e),null!=a&&a.Result&&ru(a,e);case 11:case"end":return t.stop()}},r)})),function(e){return r.apply(this,arguments)}))},rn=function(e){var t=e.querySelector('.AsDD:not([style*="display: none"]):not([style*="display:none"])'),r=!!t&&t.childNodes.length>0;t6(e,t3.departureCity.helpDdClass,t5.hidden,r),t6(e,e.elements.DepartureAirport,t5.inputError,!r,null,null)},ri=function(e){e.elements.DepartureAirport.addEventListener("focusout",function(){t6(e,t3.departureCity.helpDdClass,t5.hidden,!0)}),new(t(t0))({selector:e.elements.DepartureAirport,menuClass:"AsDD",minChars:1,source:function(r,n){var i="//www.alaskaair.com/HomeWidget/GetCitiesASQXNotAllAirports?prefixText=".concat(e.elements.DepartureAirport.value,"&contextKey=none");t(eL)(i).then(function(e){if(!e.ok)throw Error("AS/QX City Fetch Failed");return e.json()}).then(function(e){e&&n(e)}).catch(function(){})},onLookupDone:function(){rn(e)},renderItem:function(e){return'<div class="autocomplete-suggestion" data-val="'+e.N+'" data-val-code="'+e.C+'">'+e.N+"</div>"},onSelect:function(e,t,r){var n=this.selector;n&&n.setAttribute("data-city-code",r.getAttribute("data-val-code"))}})},ro=function(e,t){var r=document.createElement("input");return r.type="hidden",r.name=e,r.value=t,r},ra=function(e){var r=parseInt(e.elements.LookUpReservation.value)-2,n=t9(e,t2[r]),i=e.elements.DepartureAirport.value,o="https://www.alaskaair.com/planbook/expresscheckinstatus?locator=".concat(n,"&airport=").concat(i);return t(eL)(o).then(function(e){return e.ok?e.json():{Result:{CanUseExpressCheckIn:!1}}})},rs=function(e,t){var r="https://reservations.alaskaair.com/checkin/#/".concat(e.Result.ConfirmationCode,"/boardingpass?lastName=").concat(e.Result.LastName),n=t.parentElement,i=n.querySelector(".xpc-buttons-new-bp"),o=n.querySelector("#xpc-one-button-bp"),a=n.querySelector(".xpc-one-button"),s=n.querySelector("#xpc-or-ncr-button");[n.querySelector(".xp-or"),n.querySelector(".xp-upgrade"),i,a].forEach(function(e){return e.classList.remove("hidden")}),s.classList.remove("auro-button--primary"),s.classList.add("auro-button--secondary"),o.href=r},rl=function(e,t){t.action=e.Result.ReservationUrl,t.method="POST";var r=ro("confirmationCode",e.Result.ConfirmationCode),n=ro("lastName",e.Result.LastName);t.appendChild(r),t.appendChild(n),t.submit()},ru=function(e,t){var r=t.parentElement,n=r.querySelector("#xp-or-ncr-salutation"),i=r.querySelector("#xp-or-ncr-confirmation-code"),o=r.querySelector("#xpc-or-ncr-button"),a=r.querySelector("#express-or-ncr"),s=r.querySelector(".xpc-buttons-new-bp"),l=r.querySelector("#checkin-heading")||r.querySelector("#mobile-checkin-heading");a.classList.remove("hidden"),t.classList.add("hidden"),l.classList.add("hidden"),s.classList.remove("hidden"),s.classList.toggle("flow",!e.Result.HasBoardingDocs),rc(e,n,i),rd(e,o,t)},rc=function(e,t,r){t.innerText=e.Result.FirstName?"Hi ".concat(e.Result.FirstName,","):"Hi!",r.innerText=e.Result.ConfirmationCode},rd=(p=t(z)(t(Y).mark(function e(r,n,i){return t(Y).wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.onclick=t(z)(t(Y).mark(function e(){var n,o,a;return t(Y).wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=r&&null!==(n=r.Result)&&void 0!==n&&n.CanUseExpressCheckIn)){e.next=7;break}return e.next=3,es([eo.checkin],{checked_in:null==r||null===(o=r.Result)||void 0===o?void 0:o.HasBoardingDocs});case 3:ea.checkin.is_header_one_checkin_enabled?(a=r.Result.ExpressCheckInUrl+(r.Result.ExpressCheckInUrl.includes("?")?"&":"?")+"int=AS_ViewPNR_BTN1||EG_EXPRESS_CI||-prodID:CheckIn"+rf(r.Result.ExpressCheckInUrl),window.location.href=a):rt(i),e.next=8;break;case 7:rt(i);case 8:case"end":return e.stop()}},e)}));case 1:case"end":return e.stop()}},e)})),function(e,t,r){return p.apply(this,arguments)}),rf=function(e){return"alaskaair.convertlanguage.com"===window.location.hostname.toLowerCase()?(e.includes("?")?"&":"?")+"locale=es":""},rp=function(e){e.preventDefault();for(var t=e.target;null!=t&&"a"!==t.nodeName.toLowerCase();)t=t.parentNode;if(t){var r=t.getAttribute("href").substr(1);t.parentElement.classList.toggle("hf-collapsed");var n=document.getElementById(r);n&&n.classList.toggle("hf-collapse")}},rh={};function rv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var rg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e||"*"===e)return!0;if(e.toLowerCase().startsWith("auth:"))switch(e.toLowerCase().replace("auth:","")){case"easybiz":return e_();case"travelagent":return eO();default:return!1}else if("/"!==e.slice(0,1))return window.location.hostname.toLowerCase()===e.toLowerCase();return!0},ry=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e||"*"===e)return!0;var t=window.location.hostname.toLowerCase(),r=window.location.pathname.toLowerCase();return("alaskaair.convertlanguage.com"===t&&(r=r.replace(/^\/alaskaair\/enes/,"")),"*"===e.slice(-1))?r.startsWith(e.toLowerCase().slice(0,-1)):r.toLowerCase()===e.toLowerCase()};rh={showHideAdvisories:function(){var e=document.getElementsByClassName("AdvisoryBanner");if(e&&e.length){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return rv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rv(e,t)}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(e);try{for(r.s();!(t=r.n()).done;)!function(){var e=t.value;if(e.hasAttribute("basenames")){var r=e.getAttribute("basenames").split(","),n=e.getAttribute("exclude-basenames").split(",");r.find(function(e){return rg(e.replace(/\/.*$/,""))&&ry(e.replace(/^[^/]*/,""))})&&!n.find(function(e){return ry(e.replace(/^[^/]*/,""))})&&(e.classList.remove("hidden"),e.querySelector(".AdvisoryBanner__CloseButton").addEventListener("click",function(){e.classList.add("AdvisoryBanner-closed")})),e.removeAttribute("basenames"),e.removeAttribute("exclude-basenames")}}()}catch(e){r.e(e)}finally{r.f()}}}};var rE=(h=t(z)(t(Y).mark(function e(){var r,n;return t(Y).wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.location.pathname.toLowerCase().endsWith("/route-map")){e.next=3;break}return e.abrupt("return");case 3:r=document.querySelector(".HeaderWrapper"),new MutationObserver(function(e){e.forEach(function(e){n=document.querySelector("#em-as-666ba926-1765-4b8b-8732-b56c76c9463d"),r.style.zIndex="attributes"===e.type&&n.getAttribute("data-em-is-fullscreen")?"0":"1"})}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-em-is-fullscreen"]});case 6:case"end":return e.stop()}},e)})),function(){return h.apply(this,arguments)});function rm(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function r_(e,t){return(r_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rI(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r_(e,t)}function rb(e){return(rb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rO(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function rA(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var rN=V("9tWsh");function rT(e,t){return t&&("object"===(0,rN._type_of)(t)||"function"==typeof t)?t:rA(e)}function rR(e){var t=rO();return function(){var r,n=rb(e);if(t){var i=rb(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return rT(this,r)}}function rS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rL(e,t,r){return t&&rS(e.prototype,t),r&&rS(e,r),e}function rw(e,t,r){return(rw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rb(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r||e):i.value}})(e,t,r||e)}function rC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function rk(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function rU(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rD(e,t){if(e){if("string"==typeof e)return rU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rU(e,t)}}function rx(e,t){return(/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||rD(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}function rP(e){return function(e){if(Array.isArray(e))return rU(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rD(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rM=globalThis,rV=rM.trustedTypes,rF=rV?rV.createPolicy("lit-html",{createHTML:function(e){return e}}):void 0,rB="$lit$",rj="lit$".concat((Math.random()+"").slice(9),"$"),rK="?"+rj,rH="<".concat(rK,">"),rG=document,r$=function(){return rG.createComment("")},rz=function(e){return null===e||"object"!=typeof e&&"function"!=typeof e},rq=Array.isArray,rY="[ 	\n\f\r]",rW=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,rX=/-->/g,rZ=/>/g,rJ=RegExp(">|".concat(rY,"(?:([^\\s\"'>=/]+)(").concat(rY,"*=").concat(rY,"*(?:[^ 	\n\f\r\"'`<>=]|(\"|')|))|$)"),"g"),rQ=/'/g,r0=/"/g,r1=/^(?:script|style|textarea|title)$/i,r2=function(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return{_$litType$:e,strings:t,values:n}}},r5=r2(1),r3=(r2(2),Symbol.for("lit-noChange")),r4=Symbol.for("lit-nothing"),r6=new WeakMap,r8=rG.createTreeWalker(rG,129);function r7(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==rF?rF.createHTML(t):t}var r9=function(e,t){for(var r,n=e.length-1,i=[],o=2===t?"<svg>":"",a=rW,s=0;s<n;s++){for(var l=e[s],u=void 0,c=void 0,d=-1,f=0;f<l.length&&(a.lastIndex=f,null!==(c=a.exec(l)));)f=a.lastIndex,a===rW?"!--"===c[1]?a=rX:void 0!==c[1]?a=rZ:void 0!==c[2]?(r1.test(c[2])&&(r=RegExp("</"+c[2],"g")),a=rJ):void 0!==c[3]&&(a=rJ):a===rJ?">"===c[0]?(a=null!=r?r:rW,d=-1):void 0===c[1]?d=-2:(d=a.lastIndex-c[2].length,u=c[1],a=void 0===c[3]?rJ:'"'===c[3]?r0:rQ):a===r0||a===rQ?a=rJ:a===rX||a===rZ?a=rW:(a=rJ,r=void 0);var p=a===rJ&&e[s+1].startsWith("/>")?" ":"";o+=a===rW?l+rH:d>=0?(i.push(u),l.slice(0,d)+rB+l.slice(d)+rj+p):l+rj+(-2===d?s:p)}return[r7(e,o+(e[n]||"<?>")+(2===t?"</svg>":"")),i]},ne=function(){function e(t,r){var n=t.strings,i=t._$litType$;rm(this,e),this.parts=[];var o=0,a=0,s=n.length-1,l=this.parts,u=rx(r9(n,i),2),c=u[0],d=u[1];if(this.el=e.createElement(c,r),r8.currentNode=this.el.content,2===i){var f,p=this.el.content.firstChild;p.replaceWith.apply(p,rP(p.childNodes))}for(;null!==(f=r8.nextNode())&&l.length<s;){if(1===f.nodeType){var h=!0,v=!1,g=void 0;if(f.hasAttributes())try{for(var y,E=f.getAttributeNames()[Symbol.iterator]();!(h=(y=E.next()).done);h=!0){var m=y.value;if(m.endsWith(rB)){var _=d[a++],I=f.getAttribute(m).split(rj),b=/([.?@])?(.*)/.exec(_);l.push({type:1,index:o,name:b[2],strings:I,ctor:"."===b[1]?no:"?"===b[1]?na:"@"===b[1]?ns:ni}),f.removeAttribute(m)}else m.startsWith(rj)&&(l.push({type:6,index:o}),f.removeAttribute(m))}}catch(e){v=!0,g=e}finally{try{h||null==E.return||E.return()}finally{if(v)throw g}}if(r1.test(f.tagName)){var O=f.textContent.split(rj),A=O.length-1;if(A>0){f.textContent=rV?rV.emptyScript:"";for(var N=0;N<A;N++)f.append(O[N],r$()),r8.nextNode(),l.push({type:2,index:++o});f.append(O[A],r$())}}}else if(8===f.nodeType){if(f.data===rK)l.push({type:2,index:o});else for(var T=-1;-1!==(T=f.data.indexOf(rj,T+1));)l.push({type:7,index:o}),T+=rj.length-1}o++}}return rL(e,null,[{key:"createElement",value:function(e,t){var r=rG.createElement("template");return r.innerHTML=e,r}}]),e}();function nt(e,t){var r,n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3?arguments[3]:void 0;if(t===r3)return t;var s=void 0!==a?null===(r=o._$Co)||void 0===r?void 0:r[a]:o._$Cl,l=rz(t)?void 0:t._$litDirective$;return(null==s?void 0:s.constructor)!==l&&(null==s||null===(n=s._$AO)||void 0===n||n.call(s,!1),void 0===l?s=void 0:(s=new l(e))._$AT(e,o,a),void 0!==a?(null!==(i=o._$Co)&&void 0!==i?i:o._$Co=[])[a]=s:o._$Cl=s),void 0!==s&&(t=nt(e,s._$AS(e,t.values),s,a)),t}var nr=function(){function e(t,r){rm(this,e),this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=r}return rL(e,[{key:"parentNode",get:function(){return this._$AM.parentNode}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"u",value:function(e){var t,r=this._$AD,n=r.el.content,i=r.parts,o=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:rG).importNode(n,!0);r8.currentNode=o;for(var a=r8.nextNode(),s=0,l=0,u=i[0];void 0!==u;){if(s===u.index){var c=void 0;2===u.type?c=new nn(a,a.nextSibling,this,e):1===u.type?c=new u.ctor(a,u.name,u.strings,this,e):6===u.type&&(c=new nl(a,this,e)),this._$AV.push(c),u=i[++l]}s!==(null==u?void 0:u.index)&&(a=r8.nextNode(),s++)}return r8.currentNode=rG,o}},{key:"p",value:function(e){var t=0,r=!0,n=!1,i=void 0;try{for(var o,a=this._$AV[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;void 0!==s&&(void 0!==s.strings?(s._$AI(e,s,t),t+=s.strings.length-2):s._$AI(e[t])),t++}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}}]),e}(),nn=function(){function e(t,r,n,i){var o;rm(this,e),this.type=2,this._$AH=r4,this._$AN=void 0,this._$AA=t,this._$AB=r,this._$AM=n,this.options=i,this._$Cv=null===(o=null==i?void 0:i.isConnected)||void 0===o||o}return rL(e,[{key:"_$AU",get:function(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cv}},{key:"parentNode",get:function(){var e=this._$AA.parentNode,t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}},{key:"startNode",get:function(){return this._$AA}},{key:"endNode",get:function(){return this._$AB}},{key:"_$AI",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;rz(e=nt(this,e,r))?e===r4||null==e||""===e?(this._$AH!==r4&&this._$AR(),this._$AH=r4):e!==this._$AH&&e!==r3&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):rq(t=e)||"function"==typeof(null==t?void 0:t[Symbol.iterator])?this.k(e):this._(e)}},{key:"S",value:function(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}},{key:"T",value:function(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}},{key:"_",value:function(e){this._$AH!==r4&&rz(this._$AH)?this._$AA.nextSibling.data=e:this.T(rG.createTextNode(e)),this._$AH=e}},{key:"$",value:function(e){var t,r=e.values,n=e._$litType$,i="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=ne.createElement(r7(n.h,n.h[0]),this.options)),n);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===i)this._$AH.p(r);else{var o=new nr(i,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}},{key:"_$AC",value:function(e){var t=r6.get(e.strings);return void 0===t&&r6.set(e.strings,t=new ne(e)),t}},{key:"k",value:function(t){rq(this._$AH)||(this._$AH=[],this._$AR());var r,n=this._$AH,i=0,o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;i===n.length?n.push(r=new e(this.S(r$()),this.S(r$()),this,this.options)):r=n[i],r._$AI(c),i++}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}},{key:"_$AR",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,r=arguments.length>1?arguments[1]:void 0;for(null===(e=this._$AP)||void 0===e||e.call(this,!1,!0,r);t&&t!==this._$AB;){var n=t.nextSibling;t.remove(),t=n}}},{key:"setConnected",value:function(e){var t;void 0===this._$AM&&(this._$Cv=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}]),e}(),ni=function(){function e(t,r,n,i,o){rm(this,e),this.type=1,this._$AH=r4,this._$AN=void 0,this.element=t,this.name=r,this._$AM=i,this.options=o,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=r4}return rL(e,[{key:"tagName",get:function(){return this.element.tagName}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=this.strings,o=!1;if(void 0===i)(o=!rz(e=nt(this,e,t,0))||e!==this._$AH&&e!==r3)&&(this._$AH=e);else{var a,s,l=e;for(e=i[0],a=0;a<i.length-1;a++)(s=nt(this,l[r+a],t,a))===r3&&(s=this._$AH[a]),o||(o=!rz(s)||s!==this._$AH[a]),s===r4?e=r4:e!==r4&&(e+=(null!=s?s:"")+i[a+1]),this._$AH[a]=s}o&&!n&&this.j(e)}},{key:"j",value:function(e){e===r4?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}]),e}(),no=function(e){rI(r,e);var t=rR(r);function r(){var e;return rm(this,r),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.type=3,rT(e)}return rL(r,[{key:"j",value:function(e){this.element[this.name]=e===r4?void 0:e}}]),r}(ni),na=function(e){rI(r,e);var t=rR(r);function r(){var e;return rm(this,r),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.type=4,rT(e)}return rL(r,[{key:"j",value:function(e){this.element.toggleAttribute(this.name,!!e&&e!==r4)}}]),r}(ni),ns=function(e){rI(r,e);var t=rR(r);function r(e,n,i,o,a){var s;return rm(this,r),(s=t.call(this,e,n,i,o,a)).type=5,rT(s)}return rL(r,[{key:"_$AI",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;if((e=null!==(t=nt(this,e,r,0))&&void 0!==t?t:r4)!==r3){var n=this._$AH,i=e===r4&&n!==r4||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,o=e!==r4&&(n===r4||i);i&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}}},{key:"handleEvent",value:function(e){var t,r;"function"==typeof this._$AH?this._$AH.call(null!==(r=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==r?r:this.element,e):this._$AH.handleEvent(e)}}]),r}(ni),nl=function(){function e(t,r,n){rm(this,e),this.element=t,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}return rL(e,[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){nt(this,e)}}]),e}(),nu=rM.litHtmlPolyfillSupport;null==nu||nu(ne,nn),(null!==(T=rM.litHtmlVersions)&&void 0!==T?T:rM.litHtmlVersions=[]).push("3.1.2");var nc=function(e,t,r){var n=null!==(o=null==r?void 0:r.renderBefore)&&void 0!==o?o:t,i=n._$litPart$;if(void 0===i){var o,a,s=null!==(a=null==r?void 0:r.renderBefore)&&void 0!==a?a:null;n._$litPart$=i=new nn(t.insertBefore(r$(),s),s,void 0,null!=r?r:{})}return i._$AI(e),i},nd=function(e){return null!=e?e:r4},nf=(v=function(e){rI(r,e);var t=rR(r);function r(e){var n,i;if(rm(this,r),n=t.call(this,e),1!==e.type||"class"!==e.name||(null===(i=e.strings)||void 0===i?void 0:i.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.");return rT(n)}return rL(r,[{key:"render",value:function(e){return" "+Object.keys(e).filter(function(t){return e[t]}).join(" ")+" "}},{key:"update",value:function(e,t){var r=rx(t,1)[0];if(void 0===this.st){for(var n in this.st=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(function(e){return""!==e}))),r)!r[n]||(null===(l=this.nt)||void 0===l?void 0:l.has(n))||this.st.add(n);return this.render(r)}var i=e.element.classList,o=!0,a=!1,s=void 0;try{for(var l,u,c=this.st[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;d in r||(i.remove(d),this.st.delete(d))}}catch(e){a=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}for(var f in r){var p,h=!!r[f];h===this.st.has(f)||(null===(p=this.nt)||void 0===p?void 0:p.has(f))||(h?(i.add(f),this.st.add(f)):(i.remove(f),this.st.delete(f)))}return r3}}]),r}(function(){function e(t){rm(this,e)}return rL(e,[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AT",value:function(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}},{key:"_$AS",value:function(e,t){return this.update(e,t)}},{key:"update",value:function(e,t){return this.render.apply(this,rP(t))}}]),e}()),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return{_$litDirective$:v,values:t}});function np(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function nh(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){np(o,n,i,a,s,"next",e)}function s(e){np(o,n,i,a,s,"throw",e)}a(void 0)})}}function nv(e,t,r){return(nv=rO()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&r_(i,r.prototype),i}).apply(null,arguments)}function ng(e){var t="function"==typeof Map?new Map:void 0;return(ng=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return nv(e,arguments,rb(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),r_(r,e)})(e)}var rN=V("9tWsh");function ny(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}"function"==typeof SuppressedError&&SuppressedError;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var nE=globalThis,nm=nE.ShadowRoot&&(void 0===nE.ShadyCSS||nE.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,n_=Symbol(),nI=new WeakMap,nb=function(){function e(t,r,n){if(rm(this,e),this._$cssResult$=!0,n!==n_)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=r}return rL(e,[{key:"styleSheet",get:function(){var e=this.o,t=this.t;if(nm&&void 0===e){var r=void 0!==t&&1===t.length;r&&(e=nI.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&nI.set(t,e))}return e}},{key:"toString",value:function(){return this.cssText}}]),e}(),nO=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new nb(1===e.length?e[0]:r.reduce(function(t,r,n){return t+function(e){if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")}(r)+e[n+1]},e[0]),e,n_)},nA=function(e,t){var r=!0,n=!1,i=void 0;if(nm)e.adoptedStyleSheets=t.map(function(e){return e instanceof CSSStyleSheet?e:e.styleSheet});else try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value,l=document.createElement("style"),u=nE.litNonce;void 0!==u&&l.setAttribute("nonce",u),l.textContent=s.cssText,e.appendChild(l)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}},nN=nm?function(e){return e}:function(e){return e instanceof CSSStyleSheet?function(e){var t,r="",n=!0,i=!1,o=void 0;try{for(var a,s=e.cssRules[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;r+=l.cssText}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return new nb("string"==typeof(t=r)?t:t+"",void 0,n_)}(e):e},nT=Object.is,nR=Object.defineProperty,nS=Object.getOwnPropertyDescriptor,nL=Object.getOwnPropertyNames,nw=Object.getOwnPropertySymbols,nC=Object.getPrototypeOf,nk=globalThis,nU=nk.trustedTypes,nD=nU?nU.emptyScript:"",nx=nk.reactiveElementPolyfillSupport,nP=function(e,t){return e},nM={toAttribute:function(e,t){switch(t){case Boolean:e=e?nD:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute:function(e,t){var r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},nV=function(e,t){return!nT(e,t)},nF={attribute:!0,type:String,converter:nM,reflect:!1,hasChanged:nV};null!==(S=(R=Symbol).metadata)&&void 0!==S||(R.metadata=Symbol("metadata")),null!==(L=nk.litPropertyMetadata)&&void 0!==L||(nk.litPropertyMetadata=new WeakMap);var nB=function(e){rI(r,e);var t=rR(r);function r(){var e;return rm(this,r),(e=t.call(this))._$Ep=void 0,e.isUpdatePending=!1,e.hasUpdated=!1,e._$Em=null,e._$Ev(),rT(e)}return rL(r,[{key:"_$Ev",value:function(){var e,t=this;this._$ES=new Promise(function(e){return t.enableUpdating=e}),this._$AL=new Map,this._$E_(),this.requestUpdate(),null===(e=this.constructor.l)||void 0===e||e.forEach(function(e){return e(t)})}},{key:"addController",value:function(e){var t,r;(null!==(r=this._$EO)&&void 0!==r?r:this._$EO=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&(null===(t=e.hostConnected)||void 0===t||t.call(e))}},{key:"removeController",value:function(e){var t;null===(t=this._$EO)||void 0===t||t.delete(e)}},{key:"_$E_",value:function(){var e=new Map,t=this.constructor.elementProperties,r=!0,n=!1,i=void 0;try{for(var o,a=t.keys()[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;this.hasOwnProperty(s)&&(e.set(s,this[s]),delete this[s])}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}e.size>0&&(this._$Ep=e)}},{key:"createRenderRoot",value:function(){var e,t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return nA(t,this.constructor.elementStyles),t}},{key:"connectedCallback",value:function(){var e,t;null!==(t=this.renderRoot)&&void 0!==t||(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$EO)||void 0===e||e.forEach(function(e){var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)})}},{key:"enableUpdating",value:function(e){}},{key:"disconnectedCallback",value:function(){var e;null===(e=this._$EO)||void 0===e||e.forEach(function(e){var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)})}},{key:"attributeChangedCallback",value:function(e,t,r){this._$AK(e,r)}},{key:"_$EC",value:function(e,t){var r=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,r);if(void 0!==n&&!0===r.reflect){var i,o=(void 0!==(null===(i=r.converter)||void 0===i?void 0:i.toAttribute)?r.converter:nM).toAttribute(t,r.type);this._$Em=e,null==o?this.removeAttribute(n):this.setAttribute(n,o),this._$Em=null}}},{key:"_$AK",value:function(e,t){var r=this.constructor,n=r._$Eh.get(e);if(void 0!==n&&this._$Em!==n){var i,o=r.getPropertyOptions(n),a="function"==typeof o.converter?{fromAttribute:o.converter}:void 0!==(null===(i=o.converter)||void 0===i?void 0:i.fromAttribute)?o.converter:nM;this._$Em=n,this[n]=a.fromAttribute(t,o.type),this._$Em=null}}},{key:"requestUpdate",value:function(e,t,r){if(void 0!==e){var n;if(null!=r||(r=this.constructor.getPropertyOptions(e)),!(null!==(n=r.hasChanged)&&void 0!==n?n:nV)(this[e],t))return;this.P(e,t,r)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}},{key:"P",value:function(e,t,r){var n;this._$AL.has(e)||this._$AL.set(e,t),!0===r.reflect&&this._$Em!==e&&(null!==(n=this._$Ej)&&void 0!==n?n:this._$Ej=new Set).add(e)}},{key:"_$ET",value:function(){var e=this;return nh(function(){var t;return ny(this,function(r){switch(r.label){case 0:e.isUpdatePending=!0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e._$ES];case 2:return r.sent(),[3,4];case 3:return Promise.reject(r.sent()),[3,4];case 4:if(!(null!=(t=e.scheduleUpdate())))return[3,6];return[4,t];case 5:r.sent(),r.label=6;case 6:return[2,!e.isUpdatePending]}})})()}},{key:"scheduleUpdate",value:function(){return this.performUpdate()}},{key:"performUpdate",value:function(){if(this.isUpdatePending){if(!this.hasUpdated){if(null!==(i=this.renderRoot)&&void 0!==i||(this.renderRoot=this.createRenderRoot()),this._$Ep){var e,t=!0,r=!1,n=void 0;try{for(var i,o,a=this._$Ep[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=rx(o.value,2),l=s[0],u=s[1];this[l]=u}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}this._$Ep=void 0}var c=this.constructor.elementProperties,d=!0,f=!1,p=void 0;if(c.size>0)try{for(var h,v=c[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var g=rx(h.value,2),y=g[0],E=g[1];!0!==E.wrapped||this._$AL.has(y)||void 0===this[y]||this.P(y,this[y],E)}}catch(e){f=!0,p=e}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}}var m=!1,_=this._$AL;try{(m=this.shouldUpdate(_))?(this.willUpdate(_),null===(e=this._$EO)||void 0===e||e.forEach(function(e){var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)}),this.update(_)):this._$EU()}catch(e){throw m=!1,this._$EU(),e}m&&this._$AE(_)}}},{key:"willUpdate",value:function(e){}},{key:"_$AE",value:function(e){var t;null===(t=this._$EO)||void 0===t||t.forEach(function(e){var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}},{key:"_$EU",value:function(){this._$AL=new Map,this.isUpdatePending=!1}},{key:"updateComplete",get:function(){return this.getUpdateComplete()}},{key:"getUpdateComplete",value:function(){return this._$ES}},{key:"shouldUpdate",value:function(e){return!0}},{key:"update",value:function(e){var t=this;this._$Ej&&(this._$Ej=this._$Ej.forEach(function(e){return t._$EC(e,t[e])})),this._$EU()}},{key:"updated",value:function(e){}},{key:"firstUpdated",value:function(e){}}],[{key:"addInitializer",value:function(e){var t;this._$Ei(),(null!==(t=this.l)&&void 0!==t?t:this.l=[]).push(e)}},{key:"observedAttributes",get:function(){return this.finalize(),this._$Eh&&rP(this._$Eh.keys())}},{key:"createProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nF;if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){var r=Symbol(),n=this.getPropertyDescriptor(e,r,t);void 0!==n&&nR(this.prototype,e,n)}}},{key:"getPropertyDescriptor",value:function(e,t,r){var n,i=null!==(n=nS(this.prototype,e))&&void 0!==n?n:{get:function(){return this[t]},set:function(e){this[t]=e}},o=i.get,a=i.set;return{get:function(){return null==o?void 0:o.call(this)},set:function(t){var n=null==o?void 0:o.call(this);a.call(this,t),this.requestUpdate(e,n,r)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function(e){var t;return null!==(t=this.elementProperties.get(e))&&void 0!==t?t:nF}},{key:"_$Ei",value:function(){if(!this.hasOwnProperty(nP("elementProperties"))){var e=nC(this);e.finalize(),void 0!==e.l&&(this.l=rP(e.l)),this.elementProperties=new Map(e.elementProperties)}}},{key:"finalize",value:function(){if(!this.hasOwnProperty(nP("finalized"))){if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(nP("properties"))){var e=this.properties,t=rP(nL(e)).concat(rP(nw(e))),r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;this.createProperty(s,e[s])}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}var l=this[Symbol.metadata];if(null!==l){var u=litPropertyMetadata.get(l),c=!0,d=!1,f=void 0;if(void 0!==u)try{for(var p,h=u[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var v=rx(p.value,2),g=v[0],y=v[1];this.elementProperties.set(g,y)}}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}}this._$Eh=new Map;var E=!0,m=!1,_=void 0;try{for(var I,b=this.elementProperties[Symbol.iterator]();!(E=(I=b.next()).done);E=!0){var O=rx(I.value,2),A=O[0],N=O[1],T=this._$Eu(A,N);void 0!==T&&this._$Eh.set(T,A)}}catch(e){m=!0,_=e}finally{try{E||null==b.return||b.return()}finally{if(m)throw _}}this.elementStyles=this.finalizeStyles(this.styles)}}},{key:"finalizeStyles",value:function(e){var t=[];if(Array.isArray(e)){var r=new Set(e.flat(1/0).reverse()),n=!0,i=!1,o=void 0;try{for(var a,s=r[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;t.unshift(nN(l))}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}}else void 0!==e&&t.push(nN(e));return t}},{key:"_$Eu",value:function(e,t){var r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}}]),r}(ng(HTMLElement));nB.elementStyles=[],nB.shadowRootOptions={mode:"open"},nB[nP("elementProperties")]=new Map,nB[nP("finalized")]=new Map,null==nx||nx({ReactiveElement:nB}),(null!==(w=nk.reactiveElementVersions)&&void 0!==w?w:nk.reactiveElementVersions=[]).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var nj=function(e){rI(r,e);var t=rR(r);function r(){var e;return rm(this,r),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.renderOptions={host:rA(e)},e._$Do=void 0,rT(e)}return rL(r,[{key:"createRenderRoot",value:function(){var e,t,n=rw(rb(r.prototype),"createRenderRoot",this).call(this);return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=n.firstChild),n}},{key:"update",value:function(e){var t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),rw(rb(r.prototype),"update",this).call(this,e),this._$Do=nc(t,this.renderRoot,this.renderOptions)}},{key:"connectedCallback",value:function(){var e;rw(rb(r.prototype),"connectedCallback",this).call(this),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}},{key:"disconnectedCallback",value:function(){var e;rw(rb(r.prototype),"disconnectedCallback",this).call(this),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}},{key:"render",value:function(){return r3}}]),r}(nB);nj._$litElement$=!0,nj.finalized=!0,null===(C=(k=globalThis).litElementHydrateSupport)||void 0===C||C.call(k,{LitElement:nj});var nK=globalThis.litElementPolyfillSupport;null==nK||nK({LitElement:nj}),(null!==(D=(U=globalThis).litElementVersions)&&void 0!==D?D:U.litElementVersions=[]).push("4.0.4");var nH={svg:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-labelledby="external-link__title external-link__desc" class="ico_squareLarge" role="img" style="min-width:var(--auro-size-lg, var(--ds-size-300, 1.5rem));height:var(--auro-size-lg, var(--ds-size-300, 1.5rem));fill:currentColor" viewBox="0 0 24 24"><title id="external-link__title">Link to external site.</title><desc id="external-link__desc">This indicates a link to an external site that may not follow the same accessibility or privacy policies as Alaska Airlines. By selecting a partner link you agree to share your data with these sites.</desc><path d="M7 6.25h5a.75.75 0 0 1 .102 1.494L12 7.75H7a1.25 1.25 0 0 0-1.244 1.123L5.75 9v8c0 .648.492 1.18 1.122 1.244L7 18.25h8a1.25 1.25 0 0 0 1.244-1.122L16.25 17v-5a.75.75 0 0 1 1.493-.101l.007.101v5a2.75 2.75 0 0 1-2.582 2.745L15 19.75H7a2.75 2.75 0 0 1-2.745-2.582L4.25 17V9a2.75 2.75 0 0 1 2.582-2.745L7 6.25h5-5Zm12.025-2 .125.015.11.032.128.061c.18.108.317.29.353.522l.009.12v5a.75.75 0 0 1-1.493.102L18.25 10V6.811l-6.72 6.72a.75.75 0 0 1-1.133-.977l.073-.084 6.718-6.72H14a.75.75 0 0 1-.743-.648L13.25 5a.75.75 0 0 1 .648-.743L14 4.25h5.025Z"/></svg>'},nG={svg:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-labelledby="new-window__title new-window__desc" class="ico_squareLarge" role="img" style="min-width:var(--auro-size-lg, var(--ds-size-300, 1.5rem));height:var(--auro-size-lg, var(--ds-size-300, 1.5rem));fill:currentColor" viewBox="0 0 24 24"><title id="new-window__title">Link will open a new tab or window.</title><desc id="new-window__desc">Notice indicator to alert users that action will result in the browser opening a new tab or window.</desc><path fill-rule="evenodd" d="M20.246 5.687a2.063 2.063 0 0 0-2.058-1.937H8.813l-.126.004A2.063 2.063 0 0 0 6.75 5.812v.938H6.5l-.168.005A2.75 2.75 0 0 0 3.75 9.5v8l.005.168A2.75 2.75 0 0 0 6.5 20.25h8l.168-.005A2.75 2.75 0 0 0 17.25 17.5v-.25h.938l.125-.004a2.063 2.063 0 0 0 1.937-2.058V5.812l-.004-.125ZM15.75 17.25H8.812a2.063 2.063 0 0 1-2.058-1.937l-.004-.126V8.25H6.5a1.25 1.25 0 0 0-1.244 1.123L5.25 9.5v8c0 .648.492 1.18 1.122 1.244l.128.006h8a1.25 1.25 0 0 0 1.243-1.122l.007-.128v-.25Zm-6.625-12h8.75l.09.005a.875.875 0 0 1 .785.87v8.75l-.005.09a.875.875 0 0 1-.87.785h-8.75l-.09-.005a.875.875 0 0 1-.785-.87v-8.75l.005-.09a.875.875 0 0 1 .87-.785Zm4.28 1.757L13.507 7c.38 0 .693.3.743.69l.007.11-.007 1.938h2c.38 0 .694.301.743.691l.007.108c0 .405-.282.74-.648.792l-.102.007h-2.001l.001 1.865c0 .404-.282.739-.648.792L13.5 14c-.38 0-.694-.3-.743-.69l-.007-.11-.001-1.864H10.75c-.38 0-.694-.3-.743-.69L10 10.537c0-.404.282-.738.648-.791l.102-.008h2l.007-1.939c0-.404.282-.739.648-.792Z"/></svg>'};function n$(){var e=rk(["\n      ","\n    "]);return n$=function(){return e},e}var nz=function(e){rI(r,e);var t=rR(r);function r(){var e;return rm(this,r),(e=t.call(this)).download=!1,e.relative=!1,e.secondary=!1,e.ondark=!1,e.small=!1,e.defaultreferrerpolicy="strict-origin-when-cross-origin",e.ariapressed="false",e.tabisactive="false",e.addEventListener("touchstart",function(){this.classList.add("is-touching")}),e}return rL(r,[{key:"safeUri",get:function(){return this.href?this.safeUrl(this.href,this.relative):""}},{key:"includesDomain",get:function(){return!!this.href&&this.safeUri.includes("http")}},{key:"safeUrl",value:function(e,t){if(void 0!==e){var r=new URL(e,"https://www.alaskaair.com");switch(r.protocol){case"javascript:":return"";case"tel:":case"sms:":case"mailto:":return e;default:if(!t)return r.protocol="https:",r.href;if(t)return e}}}},{key:"generateIconHtml",value:function(e){return new DOMParser().parseFromString(e,"text/html").body.firstChild}},{key:"targetIcon",value:function(e){return"_blank"===e&&this.safeUri.includes("alaskaair.com")?this.generateIconHtml(nG.svg):"_blank"===e&&this.includesDomain?this.generateIconHtml(nH.svg):void 0}},{key:"getTabState",value:function(e){return!0===e?"is-active":""}},{key:"getReltype",value:function(e,t){return t||"_blank"===e&&this.safeUri.includes("alaskaair.com")?t:"_blank"!==e||!this.includesDomain||this.rel||this.referrerpolicy?"_blank"===e&&this.referrerpolicy?"external":void 0:"noopener noreferrer"}},{key:"ariaPressedState",value:function(e){var t=function(e){var t=this.shadowRoot.querySelector("[aria-pressed]");t.setAttribute("aria-pressed","false"),"mousedown"===e.type?t.ariaPressed=!0:t.ariaPressed=!1,"keydown"===e.type&&("Enter"===e.code||"Space"===e.code?t.ariaPressed=!0:t.ariaPressed=!1)};return this.addEventListener("mousedown",t),this.addEventListener("mouseup",t),this.addEventListener("keydown",t),this.addEventListener("keyup",t),e}},{key:"render",value:function(){return r5(n$(),this.getMarkup())}}],[{key:"properties",get:function(){return{href:{type:String},rel:{type:String},role:{type:String},target:{type:String},download:{type:Boolean},relative:{type:Boolean},secondary:{type:Boolean},ondark:{type:Boolean},type:{type:String},fluid:{type:Boolean},referrerpolicy:{type:Boolean},small:{type:Boolean}}}}]),r}(nj);function nq(){var e=rk(['*,*:before,*:after{box-sizing:border-box}@media(prefers-reduced-motion: reduce){*,*:before,*:after{animation-duration:.01ms !important;animation-iteration-count:1 !important;transition-duration:.01ms !important}}*:focus-visible{outline:0}*:focus-visible{outline:0}:focus:not(:focus-visible){outline:3px solid transparent}:host{display:inline-block}:host([type=nav]) .hyperlink:focus{text-decoration:underline}:host([fluid][type=cta]),:host([fluid=true][type=cta]){width:100%}:host([fluid][type=cta]) .hyperlink--cta,:host([fluid=true][type=cta]) .hyperlink--cta{width:100%}.hyperlink{transition:all .15s ease;color:var(--ds-color-ui-default-default, #0074c8);text-decoration:underline}.hyperlink:focus{text-decoration:none}.hyperlink:visited{color:var(--ds-color-ui-default-default, #0074c8)}.hyperlink:focus-visible{background-color:var(--ds-color-ui-default-default, #0074c8);color:var(--ds-color-text-primary-inverse, #ffffff);outline:var(--ds-color-ui-default-default, #0074c8) solid var(--ds-size-50, 0.25rem);outline-offset:unset}.hyperlink:focus-visible:hover{color:var(--ds-color-text-primary-inverse, #ffffff)}@media(hover: hover){.hyperlink:hover{color:var(--ds-color-ui-hover-default, #054687);text-decoration:none}.hyperlink--nav:hover{text-decoration:underline}.hyperlink--ondark:hover{color:var(--ds-color-ui-hover-inverse, #5de3f7)}}.hyperlink--button{display:inline-block;padding:0 var(--ds-size-200);text-decoration:none;color:var(--ds-color-text-link-default);border:1px solid transparent;line-height:var(--ds-unitless-scale-300)}:host(:not(.is-touching)) .hyperlink--button:hover{cursor:pointer;text-decoration:underline;color:var(--ds-color-ui-hover-default)}.hyperlink--nav{display:block;text-decoration:none}.hyperlink--cta{display:block;padding:0 var(--ds-size-200);text-decoration:none;color:var(--ds-color-text-link-default);border:1px solid transparent;line-height:var(--ds-unitless-scale-300);border:1px solid var(--ds-color-ui-default-default, #0074c8);border-radius:var(--ds-border-radius, 0.375rem);background-color:var(--ds-color-ui-default-default, #0074c8);color:var(--ds-color-text-primary-inverse, #ffffff);font-family:var(--ds-font-family-default, "AS Circular", Helvetica Neue, Arial, sans-serif);font-size:var(--ds-text-body-size-default, 1rem);font-weight:var(--ds-text-body-default-weight, 500);min-height:var(--ds-size-600, 3rem);max-height:var(--ds-size-600, 3rem);text-align:center;vertical-align:middle}:host(:not(.is-touching)) .hyperlink--cta:hover{cursor:pointer;text-decoration:underline;color:var(--ds-color-ui-hover-default)}.hyperlink--cta:active{transform:scale(0.95)}:host(:not(.is-touching)) .hyperlink--cta:hover{border:1px solid var(--ds-color-ui-hover-default, #054687);background-image:linear-gradient(var(--ds-color-ui-hover-default, #054687), var(--ds-color-ui-hover-default, #054687));color:var(--ds-color-text-primary-inverse, #ffffff);text-decoration:none}.hyperlink--cta:visited{color:var(--ds-color-text-primary-inverse, #ffffff)}@media screen and (min-width: 576px){.hyperlink--cta{display:inline-block;min-width:8.75rem;width:auto;padding:0 var(--ds-size-300, 1.5rem)}}.hyperlink--cta.hyperlink--secondary{border:1px solid var(--ds-color-ui-default-default, #0074c8);background-color:var(--ds-color-background-lightest, #ffffff);color:var(--ds-color-text-link-default, #0074c8)}:host(:not(.is-touching)) .hyperlink--cta.hyperlink--secondary:hover{border:1px solid var(--ds-color-ui-default-default, #0074c8);background-image:linear-gradient(var(--ds-color-background-lighter, #f8f8f8), var(--ds-color-background-lighter, #f8f8f8));color:var(--ds-color-text-link-default, #0074c8)}.hyperlink--cta.hyperlink--secondary.hyperlink--ondark{border:1px solid var(--ds-color-ui-default-inverse, #00cff0);background-color:transparent;color:var(--ds-color-ui-default-inverse, #00cff0)}:host(:not(.is-touching)) .hyperlink--cta.hyperlink--secondary.hyperlink--ondark:hover{border:1px solid var(--ds-color-ui-default-inverse, #00cff0);background-image:linear-gradient(var(--ds-color-base-black-opacity-15, rgba(0, 0, 0, 0.15)), var(--ds-color-base-black-opacity-15, rgba(0, 0, 0, 0.15)));color:var(--ds-color-ui-default-inverse, #00cff0)}:host(:not(.is-touching)) .hyperlink--cta.hyperlink--secondary.hyperlink--ondark:visited{color:var(--ds-color-ui-default-inverse, #00cff0)}.hyperlink--cta.hyperlink--ondark{border:1px solid var(--ds-color-ui-default-inverse, #00cff0);background-color:var(--ds-color-ui-default-inverse, #00cff0);color:var(--ds-color-text-primary-default, #222222)}:host(:not(.is-touching)) .hyperlink--cta.hyperlink--ondark:hover{border:1px solid var(--ds-color-ui-hover-inverse, #5de3f7);background-image:linear-gradient(var(--ds-color-ui-hover-inverse, #5de3f7), var(--ds-color-ui-hover-inverse, #5de3f7));color:var(--ds-color-text-primary-default, #222222)}:host(:not(.is-touching)) .hyperlink--cta.hyperlink--ondark:visited{color:var(--ds-color-text-primary-default, #222222)}.hyperlink--ondark{color:var(--ds-color-ui-default-inverse, #00cff0)}.hyperlink--ondark:visited{color:var(--ds-color-ui-default-inverse, #00cff0)}:host([small][type=cta]) .hyperlink--cta,:host([small=true][type=cta]) .hyperlink--cta{min-width:unset;min-height:2.25rem;max-height:2.25rem;padding:var(--ds-size-100, 0.5rem) var(--ds-size-200, 1rem);line-height:1.3;font-size:var(--ds-text-body-size-sm, 0.875rem)}svg{--auro-size-lg:1rem;position:relative;top:4px;margin-left:var(--ds-size-25, 0.125rem)}']);return nq=function(){return e},e}var nY=nO(nq());function nW(){var e=rk(['\n      <a\n        part="link"\n        aria-pressed="','"\n        class="','"\n        href="','"\n        rel="','"\n        referrerpolicy="','"\n        role="','"\n        ?download="','"\n        target="','"\n        tabindex="','"\n      ><slot></slot>',"</a>"]);return nW=function(){return e},e}function nX(){var e=rk(["<slot></slot>"]);return nX=function(){return e},e}function nZ(){var e=rk(["\n      ","\n    "]);return nZ=function(){return e},e}var nJ=function(e){rI(r,e);var t=rR(r);function r(){return rm(this,r),t.apply(this,arguments)}return rL(r,[{key:"getMarkup",value:function(){var e={hyperlink:this.safeUri||this.role,"hyperlink--nav":"nav"===this.type,"hyperlink--ondark":this.ondark,"hyperlink--button":this.role,"hyperlink--cta":"cta"===this.type,"hyperlink--secondary":this.secondary};return r5(nZ(),this.safeUri||this.role?r5(nW(),nd("button"===this.role?this.ariaPressedState(this.ariapressed):void 0),nf(e),nd(this.role?void 0:this.safeUri),nd(this.target||this.rel?this.getReltype(this.target,this.rel):void 0),nd(this.referrerpolicy?this.defaultreferrerpolicy:void 0),nd("button"===this.role?this.role:void 0),this.download,nd(this.target&&this.includesDomain?this.target:void 0),nd("button"===this.role?"0":void 0),this.targetIcon(this.target,this.relative)):r5(nX()))}}],[{key:"properties",get:function(){return rC({},rw(rb(r),"properties",this))}},{key:"styles",get:function(){return[nY]}}]),r}(nz);function nQ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"custom-hyperlink";customElements.get(e)||customElements.define(e,function(e){rI(r,e);var t=rR(r);function r(){return rm(this,r),t.apply(this,arguments)}return r}(nJ))}function n0(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}customElements.get("auro-hyperlink")||customElements.define("auro-hyperlink",nJ),nQ("auro-hyperlink");var n1=function(e){rI(r,e);var t=rR(r);function r(){return rm(this,r),t.apply(this,arguments)}return rL(r,[{key:"hideAudible",value:function(e){return e?"true":"false"}}],[{key:"properties",get:function(){return{hidden:{type:Boolean,reflect:!0},hiddenVisually:{type:Boolean,reflect:!0},hiddenAudible:{type:Boolean,reflect:!0}}}}]),r}(nj),n2={svg:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-labelledby="error__desc" class="ico_squareLarge" role="img" style="min-width:var(--auro-size-lg, var(--ds-size-300, 1.5rem));height:var(--auro-size-lg, var(--ds-size-300, 1.5rem));fill:currentColor" viewBox="0 0 24 24"><title/><desc id="error__desc">Error alert indicator.</desc><path d="m13.047 5.599 6.786 11.586A1.207 1.207 0 0 1 18.786 19H5.214a1.207 1.207 0 0 1-1.047-1.815l6.786-11.586a1.214 1.214 0 0 1 2.094 0Zm-1.165.87a.234.234 0 0 0-.085.085L5.419 17.442a.232.232 0 0 0 .203.35h12.756a.234.234 0 0 0 .203-.35L12.203 6.554a.236.236 0 0 0-.321-.084ZM12 15.5a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm-.024-6.22c.325 0 .589.261.589.583v4.434a.586.586 0 0 1-.589.583.586.586 0 0 1-.588-.583V9.863c0-.322.264-.583.588-.583Z"/></svg>'},n5=new Map,n3=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.responseParser||function(e){return e.text()};return n5.has(e)||n5.set(e,fetch(e).then(r)),n5.get(e)};function n4(){var e=rk(["*,*:before,*:after{box-sizing:border-box}@media(prefers-reduced-motion: reduce){*,*:before,*:after{animation-duration:.01ms !important;animation-iteration-count:1 !important;transition-duration:.01ms !important}}*:focus-visible{outline:0}*:focus-visible{outline:0}:focus:not(:focus-visible){outline:3px solid transparent}.util_displayInline{display:inline}.util_displayInlineBlock{display:inline-block}.util_displayBlock,:host{display:block}.util_displayFlex{display:flex}.util_displayHidden,:host([hidden]:not(:focus):not(:active)){display:none}.util_displayHiddenVisually,:host([hiddenVisually]:not(:focus):not(:active)){position:absolute;overflow:hidden;clip:rect(1px, 1px, 1px, 1px);width:1px;height:1px;padding:0;border:0}.ico_squareLarge{fill:currentColor;height:var(--auro-size-lg, var(--ds-size-300, 1.5rem))}.ico_squareSmall{fill:currentColor;height:.6rem}.ico_squareMed{fill:currentColor;height:var(--auro-size-md, var(--ds-size-200, 1rem))}.ico_squareSml{fill:currentColor;height:var(--auro-size-sm, var(--ds-size-150, 0.75rem))}:host{color:currentColor;vertical-align:middle;line-height:1}:host .logo{color:var(--ds-color-brand-midnight-400, #01426a)}.labelContainer{line-height:1.8}"]);return n4=function(){return e},e}var n6=nO(n4());function n8(){var e=rk(["\n      ","\n    "]);return n8=function(){return e},e}var n7=function(e){rI(r,e);var t=rR(r);function r(){var e;return rm(this,r),(e=t.call(this)).onDark=!1,e}return rL(r,[{key:"fetchIcon",value:function(e,t){var r=this;return nh(function(){var n;return ny(this,function(i){switch(i.label){case 0:if(n="","logos"!==e)return[3,2];return[4,n3("".concat(r.uri,"/").concat(e,"/").concat(t,".svg"))];case 1:return n=i.sent(),[3,4];case 2:return[4,n3("".concat(r.uri,"/icons/").concat(e,"/").concat(t,".svg"))];case 3:n=i.sent(),i.label=4;case 4:return[2,new DOMParser().parseFromString(n,"text/html").body.querySelector("svg")]}})})()}},{key:"firstUpdated",value:function(){var e=this;return nh(function(){var t,r;return ny(this,function(n){switch(n.label){case 0:return[4,e.fetchIcon(e.category,e.name)];case 1:return(t=n.sent())?e.svg=t:t||(r=new DOMParser().parseFromString(n2.svg,"text/html"),e.svg=r.body.firstChild),[2]}})})()}}],[{key:"properties",get:function(){return n0(rC({},rw(rb(r),"properties",this)),{onDark:{type:Boolean,reflect:!0},svg:{attribute:!1,reflect:!0}})}},{key:"styles",get:function(){return nO(n8(),n6)}}]),r}(n1);function n9(){var e=rk([".util_displayInline{display:inline}.util_displayInlineBlock{display:inline-block}.util_displayBlock,:host{display:block}.util_displayFlex{display:flex}.util_displayHidden,:host([hidden]:not(:focus):not(:active)){display:none}.util_displayHiddenVisually,:host([hiddenVisually]:not(:focus):not(:active)){position:absolute;overflow:hidden;clip:rect(1px, 1px, 1px, 1px);width:1px;height:1px;padding:0;border:0}:host{display:inline-block;line-height:unset}:host .primary{color:var(--ds-color-icon-primary-default, #626b79)}:host .emphasis{color:var(--ds-color-icon-emphasis-default, #222222)}:host .accent{color:var(--ds-color-icon-accent-default, #0074c8)}:host .disabled{color:var(--ds-color-icon-disabled-default, rgba(0, 0, 0, 0.15))}:host .error{color:var(--ds-color-alert-error-default, #df0b37)}:host .success{color:var(--ds-color-alert-success-default, #00805d)}:host .advisory{color:var(--ds-color-alert-advisory-default, #fff0cd)}:host .warning{color:var(--ds-color-alert-warning-default, #de750c)}:host([onDark]) .logo{color:var(--ds-color-base-white, #ffffff)}:host([onDark]) .primary{color:var(--ds-color-icon-primary-inverse, #9fabbb)}:host([onDark]) .emphasis{color:var(--ds-color-icon-emphasis-inverse, #ffffff)}:host([onDark]) .accent{color:var(--ds-color-icon-accent-inverse, #00cff0)}:host([onDark]) .disabled{color:var(--ds-color-icon-disabled-inverse, rgba(255, 255, 255, 0.4))}:host([onDark]) .error{color:var(--ds-color-alert-error-inverse, #ff999b)}:host([onDark]) .success{color:var(--ds-color-alert-success-inverse, #69cf96)}:host([onDark]) .advisory{color:var(--ds-color-alert-advisory-inverse, #fff0cd)}:host([customSize]){--auro-size-lg: 100%;--ds-size-300: 100%;width:100%;height:100%}.label{display:flex;align-items:flex-start}.label svg{margin:0 var(--ds-size-50, 0.25rem)}"]);return n9=function(){return e},e}var ie=nO(n9());function it(){var e=rk(["",""]);return it=function(){return e},e}function ir(){var e=rk(['\n      <div\n        class="','"\n        title="','"\n        >\n\n        <span aria-hidden="','">\n          ','\n        </span>\n\n        <div class="','">\n          <slot></slot>\n        </div>\n      </div>\n    ']);return ir=function(){return e},e}var ii=function(e){rI(r,e);var t=rR(r);function r(){var e;return rm(this,r),(e=t.call(this)).uri="https://cdn.jsdelivr.net/npm/@alaskaairux/icons@latest/dist",e.privateDefaults(),e}return rL(r,[{key:"privateDefaults",value:function(){this.primary=!1,this.label=!1,this.emphasis=!1,this.accent=!1,this.disabled=!1,this.error=!1,this.success=!1,this.advisory=!1,this.warning=!1,this.customColor=!1}},{key:"render",value:function(){var e={primary:!this.alaska&&!this.alaskaTagline&&!this.customColor,emphasis:this.emphasis,accent:this.accent,disabled:this.disabled,error:this.error,success:this.success,advisory:this.advisory,warning:this.warning,label:this.label},t={labelContainer:!0,util_displayHiddenVisually:!this.label};return r5(ir(),nf(e),nd(this.title?this.title:void 0),nd(!this.ariaHidden||this.ariaHidden),this.svg,nf(t))}}],[{key:"properties",get:function(){return n0(rC({},rw(rb(r),"properties",this)),{category:{type:String,reflect:!0},name:{type:String,reflect:!0},primary:{type:Boolean,reflect:!0},label:{type:Boolean,reflect:!0},emphasis:{type:Boolean,reflect:!0},accent:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0},error:{type:Boolean,reflect:!0},success:{type:Boolean,reflect:!0},advisory:{type:Boolean,reflect:!0},warning:{type:Boolean,reflect:!0},customColor:{type:Boolean},ariaHidden:{type:String,reflect:!0},uri:{type:String}})}},{key:"styles",get:function(){return[rw(rb(r),"styles",this),nO(it(),ie)]}}]),r}(n7);customElements.get("auro-icon")||customElements.define("auro-icon",ii);var io=function(){if(document){var e,t=null===(e=ea.accountPersonalization)||void 0===e?void 0:e.redirect_to_enrollment_microservice_enabled;ia("new-sign-up","old-sign-up",t),ia("new-sign-up-help","old-sign-up-help",t),ia("new-sign-up-now","old-sign-up-now",t)}},ia=function(e,t,r){document.getElementById(e)&&document.getElementById(t)&&(r?(document.getElementById(e).classList.remove("hide"),document.getElementById(t).remove()):document.getElementById(e).remove())};nQ("hf-auro-hyperlink"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"custom-icon";customElements.get(e)||customElements.define(e,function(e){rI(r,e);var t=rR(r);function r(){return rm(this,r),t.apply(this,arguments)}return r}(ii))}("hf-auro-icon"),window.addEventListener("keydown",function e(t){t.keyCode===ts.TAB&&(document.body.classList.add("user-is-tabbing"),window.removeEventListener("keydown",e))}),function(){if(!0!==window.loadedHfScripts)for(var e=document.querySelectorAll('script[data-hf-script="true"]'),t=0;t<e.length;t++){var r=e[t],n=document.createElement("script");r.src&&(n.src=r.src),n.textContent=r.textContent||"",n.type=r.type||"text/javascript",document.body.appendChild(n)}}(),window.hfApi=window.hfApi||{},window.hfApi.openLoadingInterstitial=tI,window.hfApi.closeLoadingInterstitial=function(){tv&&(document.body.removeChild(tv),tv=null)},window.hfApi.newDialog=tO,tm().then(function(e){e&&(th=e,ty(e))}),es([eo.access,eo.account]).then(function(){tt(),eS(),io()}),(0,rh.showHideAdvisories)(),function(){var e,t,r=document.getElementsByClassName("st-default-search-input"),n=["input"],i=!1,o=function(t){i?i=!1:(t.stopImmediatePropagation(),clearTimeout(e),e=setTimeout(function(){i=!0,t.target.dispatchEvent(t)},300))},a=tN(r);try{for(a.s();!(t=a.n()).done;){var s,l=t.value,u=tN(n);try{for(u.s();!(s=u.n()).done;){var c=s.value;l.addEventListener(c,o)}}catch(e){u.e(e)}finally{u.f()}}}catch(e){a.e(e)}finally{a.f()}}(),window.SwiftypeObject="_st",window._st||(window._st=function(){window._st.q=window._st.q||[];for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];window._st.q.push(t)}),(g=document.createElement("script")).src="//s.swiftypecdn.com/install/v2/st.js",document.body.appendChild(g),window._st("install","pAcC2eE7jjZxvyeUDsqJ","2.0.0"),console.log("Peeking under the hood, huh? Have some ideas about how to make this a better experience for our guests? Visit https://careers.alaskaair.com for opportunities to join our team!"),function(){if(e_())document.body.classList.contains("travelagent")||document.body.classList.add("easybiz");else for(var e=document.getElementsByClassName("easybiz-signed-in"),t=0;t<e.length;t++)e[t].classList.add("hidden")}(),function(){if(e_())for(var e=document.getElementsByClassName("populate-company-name"),t=0;t<e.length;t++)e[t].textContent=eE}(),function(){if(e_())for(var e=em&&em.split(",").includes("admin"),t=document.getElementsByClassName(e?"show-if-not-easybiz-administrator":"show-if-easybiz-administrator"),r=0;r<t.length;r++)t[r].classList.add("hidden")}(),e_()&&ev(document.getElementById("ezb-hf-nav-mobile-toggle"),document.getElementById("ezb-nav-mobile-menu")),function(){var e=document.getElementsByClassName("easybiz");if(e&&!(e.length<1))for(var t=document.getElementsByClassName("alaska-footer"),r=0;r<t.length;r++)t[r].classList.add("ezb-footer"),t[r].classList.remove("alaska-footer")}(),function(){for(var e=eO(),t=document.getElementsByClassName(e?"hide-when-travelagent-is-signed-in":"travelagent-signed-in"),r=0;r<t.length;r++)t[r].classList.add("hidden");e&&(document.body.classList.add("travelagent"),document.body.classList.remove("easybiz"))}(),eO()&&ev(document.getElementById("ta-hf-nav-mobile-toggle"),document.getElementById("ta-nav-mobile-menu")),function(){var e=document.getElementsByClassName("travelagent");if(e&&!(e.length<1))for(var t=document.getElementsByClassName("alaska-footer"),r=0;r<t.length;r++)t[r].classList.add("ta-footer"),t[r].classList.remove("alaska-footer")}(),function(){if(eA())for(var e=document.getElementsByClassName("web-checkin-remove"),t=e.length-1;t>=0;t--)e[t].parentNode.removeChild(e[t])}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(eN()){var r=decodeURIComponent("AS%5FNAME"),n=ec(t(X).get(r)||"");if("true"===(n.REMEMBERME||"").toLowerCase()){e();for(var i=document.getElementsByClassName("usernameInput"),o=n.UID,a=0;a<i.length;a++)i[a].value=o;for(var s=document.getElementsByClassName("rememberMeInput"),l=0;l<s.length;l++)s[l].setAttribute("checked","checked")}}}(function(){return ed(eQ)}),e4(),function(){var e,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return eR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eR(e,t)}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(document.getElementsByClassName("signOutLink"));try{for(r.s();!(e=r.n()).done;)e.value.addEventListener("click",function(){var e=window.location.href,r=new Date(Date.now());r.setTime(r.getTime()+6e4),t(X).set("lastVisitedUrl",e,{expires:r}),sessionStorage.removeItem("sessionExpiration")})}catch(e){r.e(e)}finally{r.f()}}(),e7(),Promise.all([e9("https://www.alaskaair.com/content/partial/header/_mobile-ad","SCmerch__Mobile"),e9("https://www.alaskaair.com/content/partial/footer/personalized-one","SCmerch__Footer__One"),e9("https://www.alaskaair.com/content/partial/footer/personalized-two","SCmerch__Footer__Two")]),function(){if(!eN())for(var e=document.getElementsByClassName("hide-if-not-as-host"),t=0;t<e.length;t++)e[t].classList.add("hidden")}(),function(){for(var e=document.getElementsByClassName("hf-collapsible"),t=0;t<e.length;t++)e[t].onclick=rp}(),e_()||eO()||ev(document.getElementById("hf-nav-mobile-toggle"),document.getElementById("nav-mobile-menu")),function(){for(var e=document.querySelectorAll("[data-disable-on-submit-id]"),t=function(t){e[t].addEventListener("submit",function(){var r=document.getElementById(e[t].getAttribute("data-disable-on-submit-id"));if(r){r.setAttribute("disabled","disabled");var n=r.getAttribute("data-disable-text");n&&(r.textContent=n)}})},r=0;r<e.length;r++)t(r)}(),function(){for(var e=ec(t(X).get(tr)||"").ITEMCOUNT||"0",r=document.getElementsByClassName("cart-count"),n=0;n<r.length;n++){var i=document.createElement("span");i.textContent=e,r[n].innerHTML="",r[n].appendChild(i)}}(),function(){if(te())for(var e=document.getElementsByClassName("hf"),t=0;t<e.length;t++)e[t].classList.add("super-user")}(),function(){for(var e=document.getElementsByClassName("hf-arrow-nav"),t=0;t<e.length;t++)tu(e[t].querySelectorAll("input:not(.checkInDestination):not(.specialArrowNav), a:not(.specialArrowNav), button"));for(var r=[document.querySelector("select.checkinOption")],n=document.querySelectorAll("div.pure-menu-horizontal input.specialArrowNav, div.pure-menu-horizontal a.specialArrowNav, div.pure-menu-horizontal button.specialArrowNav"),i=0;i<n.length;i++)r.push(n[i]);for(var o=0;o<r.length;o++)r[o]&&r[o].addEventListener("keydown",tc)}(),function(){for(var e=document.getElementsByClassName("hf-focus-trap"),t=0;t<e.length;t++)td(e[t].querySelectorAll("input:not(.checkInDestination), button, a"))}(),function(){if(eA())for(var e=document.querySelectorAll("[no-print-web-checkin]"),t=0;t<e.length;t++)e[t].classList.add("no-print")}(),function(){if(eT()){var e=[],t=document.getElementById("hf-h");if(t)for(var r=t.getElementsByTagName("a"),n=0;n<r.length;n++)e.push(r[n]);var i=document.getElementById("footerContainerDiv");if(i)for(var o=i.getElementsByTagName("a"),a=0;a<o.length;a++)e.push(o[a]);for(var s=0;s<e.length;s++){var l=e[s].getAttribute("href");l&&!l.includes("//")&&"/"===l[0]&&e[s].setAttribute("href","//www.alaskaair.com"+l)}}}(),function(){var e=window.location.hostname.toLowerCase(),t=window.location.pathname.toLowerCase(),r=window.location.href,n={ESPANOL_ITEM:"espanol",ENGLISH_ITEM:"english",ESPANOL_ITEM_MOBILE:"espanolMobile",ENGLISH_ITEM_MOBILE:"englishMobile",ESPANOL_LINK:"navLocaleES",ENGLISH_LINK:"navLocaleEN",ESPANOL_LINK_MOBILE:"navMobileLocaleES",ENGLISH_LINK_MOBILE:"navMobileLocaleEN"},i={};for(var o in n)i[o]=document.getElementById(n[o]);var a="localhost"===e,s="alaskaair.convertlanguage.com"===e,l=e.includes("alaskaair.com"),u=0===t.indexOf("/travel-agent");if(["ESPANOL_ITEM","ENGLISH_ITEM","ESPANOL_ITEM_MOBILE","ENGLISH_ITEM_MOBILE"].forEach(function(e){tf(i[e])}),(a||l||s)&&!u){var c=document.getElementsByTagName("html")[0];s?(c.lang="es",["ENGLISH_ITEM","ENGLISH_ITEM_MOBILE"].forEach(function(e){tp(i[e])}),["ENGLISH_LINK","ENGLISH_LINK_MOBILE"].forEach(function(e){i[e]&&(i[e].href=r?r.replace("//alaskaair.convertlanguage.com/alaskaair/enes","//www.alaskaair.com"):"https://www.alaskaair.com")})):(c.lang="en",["ESPANOL_ITEM","ESPANOL_ITEM_MOBILE"].forEach(function(e){tp(i[e])}),["ESPANOL_LINK","ESPANOL_LINK_MOBILE"].forEach(function(t){i[t]&&(i[t].href=r?r.replace(e,"alaskaair.convertlanguage.com/alaskaair/enes"):"https://alaskaair.convertlanguage.com/alaskaair/enes")}))}}(),function(){for(var e=document.getElementsByName("JumpToSelection"),t=0;t<e.length;t++)!function(){var r="nav : account - my trips";("navbar-signin-overview"==e[t].id||"navbar-signin-overview-mobile"==e[t].id)&&(r="nav : account - profile and tier status"),e[t].addEventListener("click",function(){"undefined"!=typeof utag&&"function"==typeof window.utag.link&&window.utag.link({event_name:"link_click",link_tracking:r})})}()}(),y=document.getElementById("txtSearch"),(E=document.getElementById("btnSearch"))&&y&&E.addEventListener("click",function(){y.dispatchEvent(new KeyboardEvent("keydown",{keyCode:13}))}),m=document.getElementById("search-box-li"),_=document.getElementById("mobile-search-box-li"),(void 0!==window.as&&"undefined"!==window.as.IsSiteSearchDown?!window.as.IsSiteSearchDown:eN()?1:0)?(m&&m.classList.remove("hidden"),_&&_.classList.remove("hidden")):(m&&m.classList.add("hidden"),_&&_.classList.add("hidden")),"complete"===document.readyState?tU():document.addEventListener("DOMContentLoaded",tU,!1),function(){for(var e=document.querySelectorAll(tY),t=0;t<e.length;t++){var r=e[t];tQ(r),"header"==r.getAttribute("location")&&r.getElementsByClassName("submitPNR")[0].addEventListener("click",function(e){e.preventDefault();var t=e.target.closest(tY);tJ(t)&&t.submit()},!1)}}(),function(){for(var e=document.getElementsByClassName("checkinForm"),t=0;t<e.length;t++){var r=e[t];ri(r),t4(r),rr(r)}}(),function(){for(var e=document.querySelectorAll(".pure-menu-has-children"),t=0;t<e.length;t++)tD.push(new tG(e[t]));window.addEventListener("resize",function(){N&&N.refreshBackground()},!0)}(),(n=document.createElement("script")).src="//resource.alaskaair.net/v3/assets/blt2cefe12c88e9dd91/blte4ab959370d87427/cookie-consent.js",n.type="text/javascript",n.charSet="UTF-8",n.async=!0,window.addEventListener("load",function(){document.body.appendChild(n)}),rE()}();