//tealium universal tag - utag.486 ut4.0.202410102122, Copyright 2024 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;u.ev={"view":1,"link":1};u.map={"ga4_pagename:passenger_info":"passenger_info","ga4_pagename:seat_selection":"seat_selection","ga4_pagename:status_match_submission":"status_match_submission","ga4_pagename:status_match_pageview":"status_match_pageview","payment_methods":"purchase.payment_method","purchaser_city":"purchase.purchaser_city","cp.cityPair":"purchase.city_pair","cp.departureDate":"purchase.departure_date","cp.destinationCity":"purchase.destination_city","cp.fareInformation":"purchase.fare_information","cp.numAdults":"purchase.of_adults","cp.numChild":"purchase.of_children","cp.originCity":"purchase.origin_city","cp.returnDate":"purchase.return_date","tealium_event:click_to_call":"click_to_call","tealium_event:cc_referral":"cc_referral","tealium_event:add_to_cart":"add_to_cart","tealium_event:view_cart":"view_cart","tealium_event:purchase":"purchase","tealium_event:flight_search":"flight_search","tealium_event:mp_signup_submit":"mp_signup_submit","tealium_event:mp_signup_start":"mp_signup_start","tealium_event:mp_login":"mp_login","tealium_event:mp_login_failure":"mp_login_failure","tealium_event:mp_logout":"mp_logout","tealium_event:view_search_results":"view_search_results","tealium_event:app_download_referral":"app_download_referral","tealium_event:view_item_list":"view_item_list","tealium_event:check_in":"check_in","tealium_event:advisory_click":"travel_advisory_click","tealium_event:select_item":"select_item","tealium_event:begin_checkout":"begin_checkout","tealium_event:blog_click":"blog_click","phone_number":"click_to_call.phone_number","currency":"order_currency","fare_class":"purchase.fare_class","fare_seasonality":"purchase.fare_seasonality","fare_days_advance":"purchase.fare_days_advance","fare_weekday":"purchase.fare_weekday","fare_internal_use":"purchase.fare_internal_use","fare_type":"purchase.fare_type","link_url":"event.link_url","cp.utag_main_v_id":"set.user_properties.tealium_id","cp.stq":"view_search_results.search_term","ga4_measurement":"measurement_id","ut.profile":"event.tealium_profile","cp.kayakclickid":"set.user_properties.kayak_id","sell_result_status":"item.sell_status","events:purchase":"purchase","order_affiliation":"event.order_affiliation","order_method":"event.order_method","order_platform":"event.order_platform","order_segments":"event.order_segments","tax":"order_tax","refundable":"purchase.refundable","order_coupon":"purchase.order_coupon","order_coupon_amount":"purchase.order_coupon_amount","payment_type":"purchase.payment_type","payment_category":"purchase.payment_category","item_status":"item.item_status","item_trip_protection":"purchase.trip_protection","checkout_step_name":"view_cart.checkout_step_name,begin_checkout.checkout_step_name,add_payment_info.checkout_step_name","checkout_step_number":"view_cart.checkout_step_number,begin_checkout.checkout_step_number,add_payment_info.checkout_step_number","item_id":"product_id","item_name":"product_name","item_category":"product_category","item_category2":"product_subcategory","item_quantity":"product_quantity","item_price":"product_unit_price","value":"order_total","trip_type":"flight_search.trip_type","of_adults":"flight_search.of_adults","of_children":"flight_search.of_children","of_passengers":"flight_search.of_passengers","origin_city":"flight_search.origin_city","destination_city":"flight_search.destination_city","departure_date":"flight_search.departure_date","departure_time":"flight_search.departure_time","return_date":"flight_search.return_date","return_time":"flight_search.return_time","item_brand":"product_brand","card_type":"cc_referral.card_type","mp_number":"set.user_properties.user_id,set.user_properties.mp_number","reservation_number":"event.reservation_number","search_keyword":"event.search_keyword","app_store_name":"event.app_store_name","transaction_id":"order_id","click_url":"travel_advisory_click.click_url","click_text":"travel_advisory_click.click_text","item_list_name":"product_item_list_name","item_list_id":"product_item_list_id","item_index":"product_index"};u.extend=[function(a,b){try{if(b['ga4_pagename'].toString().toLowerCase()=='purchase'.toLowerCase()){var flightArr=[];if(b['flight_number']){var flightNumbers=b['flight_number'];if(flightNumbers.indexOf(", ")!==-1){flightNumbers=flightNumbers.split(", ");b['product_ids']=flightNumbers;}
else{flightArr.push(flightNumbers);b['product_ids']=flightArr;}}
var statusArr=[];if(b['sell_result_status']){var sellStatus=b['sell_result_status'];if(sellStatus.indexOf(", ")!==-1){sellStatus=sellStatus.split(", ");b['sell_result_status']=sellStatus;}
else{statusArr.push(sellStatus);b['sell_result_status']=statusArr;}}
var cabinDict={'F':'first','M':'main','X':'saver','P':'premium','B':'business'}
var cabinArr=[];if(b['cabin_type']){var cabinType=b['cabin_type'];if(cabinType.indexOf(", ")!==-1){cabinType=cabinType.split(", ");for(var i=0;i<cabinType.length;i++){cabinArr.push(cabinDict[cabinType[i]]);}}
else{cabinArr.push(cabinDict[cabinType]);}
b['ga4_cabin_type']=cabinArr;}
var brandArr=[];if(b['cp.operating_carrier']){var itemBrands=b['cp.operating_carrier'];if(itemBrands.indexOf(",")!==-1){itemBrands=itemBrands.split(",");brandArr=itemBrands;}
else{brandArr.push(itemBrands);}
b['product_brand']=brandArr;}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){b['ga4_measurement']='G-S6FNN1RWRJ'}}catch(e){utag.DB(e);}},function(a,b){try{if(b['events'].toString().toLowerCase()=='event2'.toLowerCase()){b['tealium_event']='mileage_plan_signup'}}catch(e){utag.DB(e);}},function(a,b){try{if(b['products'].toString().indexOf('Alaska Access')<0){if(b['price_matrix_selection']){var price_matrix_selection=b['price_matrix_selection'];}
else{var price_matrix_selection=b['cp.price_matrix_selection'];}
if(b['products']){var products=b['products'];}
else{var products=b['cp.products'];}
var numberProducts=price_matrix_selection.split(",").length;var splitProducts=products.split(";");var revenue=splitProducts[3];var pairs=splitProducts[1].split(":")[2];var priceProduct=revenue/numberProducts;var prices=[];var cityPairs=[];for(var i=0;i<numberProducts;i++){cityPairs.push(pairs);prices.push(priceProduct);}
try{b['cp.product_names']=cityPairs;b['product_names']=cityPairs;b['cp.product_prices']=prices;b['product_prices']=prices;}catch(e){};}}catch(e){utag.DB(e)}},function(a,b){try{if(b['ga4_pagename'].toString().toLowerCase()=='purchase'.toLowerCase()){try{b['revenues']=b['products'].split(";")[3]}catch(e){};b['currency']='USD'}}catch(e){utag.DB(e);}}];u.send=function(utag_event,data_layer){if(u.ev[utag_event]||u.ev.all!==undefined){utag.DB("send:486");utag.DB(data_layer);var a,b,c,d,i,j,has_purchase=false,prop;a=utag_event;b=data_layer;u.data={"base_url":"https://www.googletagmanager.com/gtag/js?id=##utag_measurement_id##","measurement_id":"","clear_global_vars":"false","data_layer_name":"","send_page_view":"true","order_id":"","order_total":"","order_subtotal":"","order_shipping":"","order_tax":"","order_store":"","order_currency":"","order_coupon_code":"","product_id":[],"product_name":[],"product_brand":[],"product_category":[],"product_subcategory":[],"product_addcategory3":[],"product_addcategory4":[],"product_addcategory5":[],"product_quantity":[],"product_unit_price":[],"product_discount":[],"product_coupon":[],"product_variant":[],"product_promotion_id":[],"product_promotion_name":[],"product_creative_name":[],"product_creative_slot":[],"product_location_id":[],"product_index":[],"product_item_list_name":[],"product_item_list_id":[],"product_affiliation":[],"event_queue":[],"config":{},"set":{"developer_id.dYmQxMT":true,"user_properties":{}},"dynamic_event_trigger":"","dynamic_event":{},"event":{},"items":[]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};utag.DB("send:486:EXTENSIONS");utag.DB(data_layer);for(var mapping_key in utag.loader.GV(u.map)){if(data_layer[mapping_key]!==undefined&&data_layer[mapping_key]!==""){var destinations=u.map[mapping_key].split(",");for(i=0;i<destinations.length;i++){mapFunc(destinations[i].split("."),u.data,data_layer[mapping_key]);}}else{var event_destinations=mapping_key.split(":");if(event_destinations.length===2&&data_layer[event_destinations[0]]===event_destinations[1]){if(u.map[mapping_key]){u.data.event_queue=u.data.event_queue.concat(u.map[mapping_key].split(","));}}}}
utag.DB("send:486:MAPPINGS");utag.DB(u.data);u.data.order_id=u.data.order_id||data_layer._corder||"";u.data.order_total=u.data.order_total||data_layer._ctotal||"";u.data.order_shipping=u.data.order_shipping||data_layer._cship||"";u.data.order_tax=u.data.order_tax||data_layer._ctax||"";u.data.order_store=u.data.order_store||data_layer._cstore||"";u.data.order_currency=u.data.order_currency||data_layer._ccurrency||"";u.data.order_coupon_code=u.data.order_coupon_code||data_layer._cpromo||"";u.data.customer_id=u.data.customer_id||data_layer._ccustid||"";u.data.customer_city=u.data.customer_city||data_layer._ccity||"";u.data.customer_state=u.data.customer_state||data_layer._cstate||"";u.data.customer_zip=u.data.customer_zip||data_layer._czip||"";u.data.customer_country=u.data.customer_country||data_layer._ccountry||"";if(u.data.product_id.length===0&&data_layer._cprod!==undefined){u.data.product_id=data_layer._cprod.slice(0);}
if(u.data.product_name.length===0&&data_layer._cprodname!==undefined){u.data.product_name=data_layer._cprodname.slice(0);}
if(u.data.product_brand.length===0&&data_layer._cbrand!==undefined){u.data.product_brand=data_layer._cbrand.slice(0);}
if(u.data.product_category.length===0&&data_layer._ccat!==undefined){u.data.product_category=data_layer._ccat.slice(0);}
if(u.data.product_subcategory.length===0&&data_layer._ccat2!==undefined){u.data.product_subcategory=data_layer._ccat2.slice(0);}
if(u.data.product_quantity.length===0&&data_layer._cquan!==undefined){u.data.product_quantity=data_layer._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&data_layer._cprice!==undefined){u.data.product_unit_price=data_layer._cprice.slice(0);}
if(u.data.product_discount.length===0&&data_layer._cpdisc!==undefined){u.data.product_discount=data_layer._cpdisc.slice(0);}
if(utag.ut.typeOf(u.data.measurement_id)==="string"&&u.data.measurement_id!==""){u.data.measurement_id=u.data.measurement_id.replace(/\s/g,"").split(",");}
if(u.data.data_layer_name){u.data.base_url=u.data.base_url+"&l="+u.data.data_layer_name;}
if(!u.data.measurement_id){utag.DB(u.id+": Tag not fired: Required attribute measurement_id not populated");return;}
if(u.data.gtag_enable_tcf_support){window["gtag_enable_tcf_support"]=toBoolean(u.data.gtag_enable_tcf_support);}
var utmParams=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];var utmPageLocation=u.data.config.page_location||data_layer["dom.url"];var utmQuery=[];utmParams.forEach(function(paramName){if(u.data[paramName]&&utmPageLocation.indexOf(paramName+"=")===-1){utmQuery.push(paramName+"="+u.data[paramName]);}});if(utmQuery.length){u.data.config.page_location=utmPageLocation.indexOf("?")===-1?utmPageLocation+"?"+utmQuery.join("&"):utmPageLocation+"&"+utmQuery.join("&");}
u.data.event.send_to=u.data.event.send_to||u.data.measurement_id;if(u.data.customer_id){u.data.config.user_id=u.data.customer_id;}
if(toBoolean(u.data.clear_global_vars)){setGlobalProperties(u.data.config,true);for(prop in utag.loader.GV(u.data.set)){if(prop!=="developer_id.dYmQxMT"){setGlobalProperties(u.data.set,true,prop);}}}
setGlobalProperties(u.data.config,false);setGlobalProperties(u.data.set,false);if(u.data.config.send_page_view!==undefined){u.data.send_page_view=toBoolean(u.data.config.send_page_view);}
if(toBoolean(u.data.send_page_view)&&(utag_event==='view'||!u.initialized)){u.data.event_queue.unshift("page_view");}
u.data.config.send_page_view=false;for(i=0;i<u.data.measurement_id.length;i++){if(!/^[a-zA-Z]{1}-|^[a-zA-Z]{2}-/.test(u.data.measurement_id[i])){u.data.measurement_id[i]="G-"+u.data.measurement_id[i];}
u.o("config",u.data.measurement_id[i],u.data.config);}
u.initialized=true;for(i=0;i<u.data.event_queue.length;i++){if(u.data.event_queue[i]==="purchase"||u.data.event_queue[i]==="refund"){has_purchase=true;}}
if(u.data.order_id&&!has_purchase){u.data.event_queue.push("purchase");}
if(u.data.dynamic_event_trigger){u.data.event_queue.push(u.data.dynamic_event_trigger);u.data[u.data.dynamic_event_trigger]=u.data.dynamic_event||{};}
for(i=0;i<u.data.event_queue.length;i++){var event_name=u.data.event_queue[i];var event_data={};event_data=JSON.parse(JSON.stringify(u.data.event));if(u.data.event.event_callback){event_data.event_callback=u.data.event.event_callback;}
if(u.data.event.non_interaction){u.data.event.non_interaction=true;}
if(u.event_map[event_name]){for(j=0;j<u.event_map[event_name].length;j++){var event_param=u.event_map[event_name][j];var event_param_value=u.std_params[event_param]?u.std_params[event_param](event_name):u.data[event_param]||"";if(event_param_value!==""){event_data[event_param]=event_param_value;}}}
Object.keys(u.map).forEach(function(mapping_from){if(u.map[mapping_from].match(new RegExp(event_name+'^'))&&typeof b[mapping_from]!=="undefined"){var mapDestination=u.map[mapping_from].split(',')[0];var mapping_to=mapDestination.substring(event_name.length+1);event_data[mapping_to]=b[mapping_from];}});utag.ut.merge(event_data,u.data[event_name],0);utag.ut.merge(event_data,u.data.all_events||{},0);u.o("event",event_name,event_data);}
if(!hasgtagjs()){u.scriptrequested=true;utag.ut.gtagScriptRequested=true;u.data.base_url=u.data.base_url.replace("##utag_measurement_id##",u.data.measurement_id[0]);utag.ut.loader({type:"script",src:u.data.base_url,cb:null,loc:"script",id:"utag_486",attrs:{}});}
utag.DB("send:486:COMPLETE");}};function mapFunc(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){mapFunc(arr,obj[i],item);}else{obj[i]=item;}}
function toBoolean(val){val=val||"";return val===true||val.toLowerCase()==="true"||val.toLowerCase()==="on";}
function hasgtagjs(){window.gtagRename=window.gtagRename||""||"gtag";if(utag.ut.gtagScriptRequested){return true;}
var i,s=document.getElementsByTagName("script");for(i=0;i<s.length;i++){if(s[i].src&&s[i].src.indexOf("gtag/js")>=0&&(s[i].id&&s[i].id.indexOf("utag")>-1)){return true;}}
var data_layer_name=""||"dataLayer";window[data_layer_name]=window[data_layer_name]||[];if(typeof window[window.gtagRename]!=="function"){window[window.gtagRename]=function(){window[data_layer_name].push(arguments);};var cross_track=toBoolean(""),cross_track_domains="";if(cross_track&&cross_track_domains!==""){window[window.gtagRename]("set","linker",{domains:cross_track_domains.split(","),accept_incoming:true});}
window[window.gtagRename]("js",new Date());}
return false;}
u.scriptrequested=hasgtagjs();u.initialized=false;u.o=window[window.gtagRename];function setGlobalProperties(data,reset,custom_property){var map={"user_id":{"name":"user_id","type":"exists","reset":true},"page_path":{"name":"page_path","type":"exists","reset":true},"page_title":{"name":"page_title","type":"exists","reset":true},"page_location":{"name":"page_location","type":"exists","reset":false},"developer_id.dYmQxMT":{"name":"developer_id.dYmQxMT","type":"exists","reset":false},"user_properties":{"name":"user_properties","type":"object","reset":true}},prop,subProp,g={};if(custom_property&&reset){g[custom_property]="";}
for(prop in utag.loader.GV(map)){if(reset&&map[prop].reset){if(map[prop].name==="user_properties"){for(subProp in data[prop]){if(!g[map[prop].name]){g[map[prop].name]={};}
g[map[prop].name][subProp]="";}}else{g[map[prop].name]="";}}else{if(map[prop].type==="bool"){if(data[prop]==true||data[prop]==="true"){g[map[prop].name]=true;}}
else if(map[prop].type==="exists"||map[prop].type==="object"){if(data[prop]){g[map[prop].name]=data[prop];}}}}
if(!utag.ut.isEmptyObject(g)){u.o("set",g);}}
function getItems(length){var g={},i,items=[];length=length||u.data.product_id.length||u.data.product_name.length;for(i=0;i<length;i++){g={};g.item_id=u.data.product_id[i];if(u.data.product_name[i]){g.item_name=u.data.product_name[i];}
if(u.data.product_coupon[i]){g.coupon=u.data.product_coupon[i];}
if(u.data.product_discount[i]){g.discount=u.data.product_discount[i];}
if(u.data.product_affiliation[i]){g.affiliation=u.data.product_affiliation[i];}
if(u.data.product_brand[i]){g.item_brand=u.data.product_brand[i];}
if(u.data.product_category[i]){g.item_category=u.data.product_category[i];}
if(u.data.product_subcategory[i]){g.item_category2=u.data.product_subcategory[i];}
if(u.data.product_addcategory3[i]){g.item_category3=u.data.product_addcategory3[i];}
if(u.data.product_addcategory4[i]){g.item_category4=u.data.product_addcategory4[i];}
if(u.data.product_addcategory5[i]){g.item_category5=u.data.product_addcategory5[i];}
if(u.data.product_variant[i]){g.item_variant=u.data.product_variant[i];}
if(u.data.product_unit_price[i]){g.price=u.data.product_unit_price[i];}
if(u.data.order_currency){g.currency=u.data.order_currency;}
if(u.data.product_quantity[i]){g.quantity=u.data.product_quantity[i];}
if(u.data.product_promotion_id[i]){g.promotion_id=u.data.product_promotion_id[i];}
if(u.data.product_promotion_name[i]){g.promotion_name=u.data.product_promotion_name[i];}
if(u.data.product_creative_name[i]){g.creative_name=u.data.product_creative_name[i];}
if(u.data.product_creative_slot[i]){g.creative_slot=u.data.product_creative_slot[i];}
if(u.data.product_location_id[i]){g.location_id=u.data.product_location_id[i];}
if(u.data.product_index[i]){g.index=u.data.product_index[i];}
if(u.data.product_item_list_name[i]){g.item_list_name=u.data.product_item_list_name[i];}
if(u.data.product_item_list_id[i]){g.item_list_id=u.data.product_item_list_id[i];}
items.push(g);}
return items;}
u.event_map={add_payment_info:["coupon","currency","items","payment_type","value"],add_shipping_info:["coupon","currency","items","shipping_tier","value"],add_to_cart:["currency","items","value"],add_to_wishlist:["currency","items","value"],begin_checkout:["coupon","currency","items","value"],earn_virtual_currency:["virtual_currency_name","value"],generate_lead:["currency","value"],join_group:["group_id"],level_end:["level_name","success"],level_start:["level_name"],level_up:["level","character"],login:["method"],post_score:["score","level","character"],purchase:["affiliation","coupon","currency","items","transaction_id","shipping","tax","value"],refund:["affiliation","coupon","currency","items","transaction_id","shipping","tax","value"],remove_from_cart:["currency","items","value"],search:["search_term"],select_content:["content_type","item_id"],select_item:["items","item_list_name","item_list_id"],select_promotion:["items","location_id"],share:["method","content_type","content_id"],sign_up:["method"],spend_virtual_currency:["item_name","virtual_currency_name","value"],tutorial_begin:[],tutorial_complete:[],unlock_achievement:["achievement_id"],view_cart:["currency","items","value"],view_item:["currency","items","value"],view_item_list:["items","item_list_name","item_list_id"],view_promotion:["items","location_id"],exception:["description","fatal"],screen_view:["screen_name"]};u.std_params={"transaction_id":function(){return u.data.order_id;},"affiliation":function(){return u.data.order_store;},"value":function(event){if(event.match(/timing_complete|virtual_currency/i)){return u.data.value;}
return u.data.order_total;},"currency":function(){return u.data.order_currency;},"tax":function(){return u.data.order_tax;},"shipping":function(){return u.data.order_shipping;},"coupon":function(){return u.data.order_coupon_code;},"fatal":function(){return toBoolean(u.data.fatal);},"items":function(event){if(event.match(/view_item$|select_content/)){return getItems(1);}
return getItems();},"item_id":function(){return u.data.product_id[0]?u.data.product_id[0]:"";}};utag.o[loader].loader.LOAD(id);}("486","alaska.main"));}catch(error){utag.DB(error);}
