function sessionStorageSet(e,t){try{sessionStorage.setItem(e,t)}catch(a){}}function sessionStorageGet(e){try{return sessionStorage.getItem(e)}catch(t){}}function getAriaLogDiv(){var e=$("#aria-log");return 0===e.length&&(e=$('<div id="aria-log" role="log" aria-atomic="true" class="hiddenInLink sr-only" aria-relevant="additions" aria-live="polite"></div>'),$("body").append(e)),e}function tabpanel(e,t,a,i){this.panel_id=e,this.accordian=i,this.$panel=$("#"+e),this.keys={tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40},this.init_executed=!1,this.$tabs=this.$panel.find(t),this.$panels=this.$panel.find(a),this.bindHandlers(),this.init()}function HotelsHomeletLoader(){var e=$("#hotel"),t=$("#mainHotel");this.load=function(a,i){void 0!==t&&t.length>0?"function"==typeof a&&a():$.ajax({type:"GET",url:i,success:function(t){e.html(t),a()}})}}function CarsHomeletLoader(){var e=$("#car"),t=$("#mainCar");this.load=function(a,i){void 0!==t&&t.length>0?"function"==typeof a&&a():$.ajax({type:"GET",url:i,success:function(t){e.html(t),a()}})}}function VacationsHomeletLoader(){var e=$("#vacation"),t=$("#mainVacation");this.load=function(a,i){void 0!==t&&t.length>0?"function"==typeof a&&a():$.ajax({type:"GET",url:i,success:function(t){e.html(t),a()}})}}function ShowInterstitial(){var e=homepage.cookieStore?homepage.cookieStore.getCookie("!INTERSTITIAL"):null;"DISABLE"!==(e||"").toUpperCase()&&window.hfApi&&window.hfApi.openLoadingInterstitial()}function HideInterstitial(){window.hfApi&&window.hfApi.closeLoadingInterstitial()}var serviceEndpoints=as&&"prod"!==as.Environment?{kineticsWebCheckInURL:"https://selfservice.test.alaskaair.com/checkinweb/default.aspx"}:{kineticsWebCheckInURL:"https://webselfservice.alaskaair.com/checkinweb/default.aspx"};Array.prototype.map||(Array.prototype.map=function(e){var t=this.length;if("function"!=typeof e)throw new TypeError;for(var a=new Array(t),i=arguments[1],n=0;n<t;n++)n in this&&(a[n]=e.call(i,this[n],n,this));return a}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var a=t||0,i=this.length;a<i;a++)if(this[a]===e)return a;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var homepage=window.homepage||{};homepage.cookieStore={getCookie:function(e){for(var t=e+"=",a=window.document.cookie.split(";"),i=0,n=a.length;i<n;i++){for(var r=a[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}return""},deleteCookie:function(e,t,a){var i=new Date("January 1, 1970");document.cookie=e+"="+(a?"; path="+a:"")+(t?"; domain="+t:"")+"; expires="+i.toGMTString()}};var homepage=window.homepage||{};homepage.sessionStorageManager={set:function(e,t){sessionStorageSet(e,t)},get:function(e){return sessionStorageGet(e)}};var KeyCodes={DownArrow:40,UpArrow:38,Enter:13,Tab:9,End:35,Home:36,Shift:16},GetRandomId=function(){var e=new Date,t=e.getHours(),a=e.getMinutes(),i=e.getSeconds();return t+"_"+a+"_"+i+Math.floor(1111*Math.random())};jQuery.fn.addAsDropdown=function(e){return makeDropdown($(this),e)};var makeDropdown=function(e,t){function a(e){var a=e.keyCode?e.keyCode:e.which?e.which:e.charCode;if(a!=KeyCodes.Enter||0!=$("li",$(f)).length){a>=96&&a<=105&&(a-=48);var r=String.fromCharCode(a),o=!1;if(!d.AcceptCharInput){for(S=y+1;S<d.List.length;S++)if(d.List[S].substring(0,1).toLowerCase()===r.toLowerCase()){y=S,o=!0;break}if(!o)for(S=0;S<=y;S++)if(d.List[S].substring(0,1).toLowerCase()===r.toLowerCase()){y=S,o=!0;break}}var m=!1;o||$("li",f).each(function(e){($(this).hasClass("selected_li")||s.val()===$(this).attr("title"))&&(y=e,m=!0)});var v=$(f).length>0&&"none"!==$(f).css("display").toLowerCase();if(v){var g="";$("li",$(f)).each(function(){$(this).hasClass("selected_li")&&(g=$(this).attr("title"))})}var C=d.List.length,b=$("li",$(f)).eq(y).attr("citycode");if(o||a==KeyCodes.DownArrow||a==KeyCodes.UpArrow){if(!o&&v)switch(a){case KeyCodes.DownArrow:y+1<d.List.length&&y++,p(t.$ariaLog,y+1+" of "+d.List.length,!0);break;case KeyCodes.UpArrow:y>=0&&(y--,y>=0&&p(t.$ariaLog,y+1+" of "+d.List.length,!0))}y>C?y=0:y<-1?y=C-1:y!=-1&&y!=C||(y=-1),i(),$("li",$(f)).css({"background-color":"white"}),$("li",$(f)).css({color:"#696969"}),$("li",$(f)).removeClass("selected_li"),y>-1?($("li",$(f)).eq(y).css({"background-color":"#696969"}),$("li",$(f)).eq(y).css({color:"white"}),$("li",$(f)).eq(y).addClass("selected_li"),u(d.List[y],b)):""!=s.param.searchText&&u(s.param.searchText,b),setTimeout(function(){$(s)[0].setSelectionRange(0,999999)},0),h=!1}else if(a>=48&&a<=48+d.List.length)y=a-49,u(d.List[y],b),n();else if(a==KeyCodes.Enter||a==KeyCodes.Tab){if(v){var g="",w="";s.param.defaultSelect>=0&&s.param.defaultSelect<=C?(g=$("li",$(f)).eq(s.param.defaultSelect).attr("title"),w=$("li",$(f)).eq(s.param.defaultSelect).attr("cityCode")):$("li",$(f)).length>=1&&(g=$("li",$(f)).eq(0).attr("title"),w=$("li",$(f)).eq(0).attr("citycode")),$("li",$(f)).each(function(e){$(this).hasClass("selected_li")&&(g=$(this).attr("title"),w=$(this).attr("cityCode"),s.removeClass(l))}),""!=g&&(u(g,w),s.removeClass(l),"checkInDestination"==$(s).attr("id")&&$("#"+c).val(w)),n()}h=!0}else h=d.AcceptCharInput;return h}}function i(){$(f).show()}function n(){$(document).unbind("click",r),makeDropdown.hide()}function r(){$(document).unbind("click",r);var e=$("li",$(f)).eq(0);if(e.is(":visible")){var t=e.attr("citycode"),a=e.attr("title");u(a,t)}makeDropdown.hide()}function o(e,t){var a=0;document.getElementById("__next")||(a=$("body").offset().top);var i=e.offset().top+e.height()-a,n=isNaN(parseInt(e.css("border-top"),10))?0:parseInt(e.css("border-top"),10),r=isNaN(parseInt(e.css("border-bottom"),10))?0:parseInt(e.css("border-bottom"),10),o=isNaN(parseInt(e.css("margin-top"),10))?0:parseInt(e.css("margin-top"),10),s=isNaN(parseInt(e.css("padding-top"),10))?0:parseInt(e.css("padding-top"),10);i+=n+r+o+s+3;var l=e.offset().left;$(t).css({top:i}),$(t).css({left:l})}var s=$(e),l="input-validation-error";s.attr("aria-invalid",!1);var d={Height:t.height,DivId:t.divId,SearchText:t.searchText,FormatText:t.formatText,List:t.list,ListAlt:[],AcceptCharInput:null!=t&&null!=t.acceptCharInput&&t.acceptCharInput,IdSuffix:GetRandomId(),UseBackgroundImage:!0,DefaultHtml:null!=t&&null!=t.defaultHtml?t.defaultHtml:"",CityCodeID:t.citycodeid},c=d.CityCodeID;$("#"+c).val("");var h=!1;d.DivId=null==d.DivId?"divAsDD"+d.IdSuffix:d.DivId,t.divId=d.DivId;var u=function(e,t){s.val(e),s.attr("data-city-code",t),$("#"+c).length&&$("#"+c).val(t)},p=function(e,t,a){var i=function(e,t,a){var i;return function(){var n=this,r=arguments,o=function(){i=null,a||e.apply(n,r)},s=a&&!i;clearTimeout(i),i=setTimeout(o,t),s&&e.apply(n,r)}};i(function(){e.text()!==t&&e.text(t)},500,a)()},f=$("#"+d.DivId);if(makeDropdown.divAsDD=f,0===f.length){var m="<div id='"+d.DivId+"' class='AsDD'></div>";if($(document.activeElement).attr("name")!==e.attr("name"))return!1;n(),$("body").append(m),f=$("#"+d.DivId);var v=19;$(f).css({"z-index":9999,"text-align":"left",display:"none",position:"absolute","background-color":"white",border:"solid 1px #BBB",left:0,top:v}),null!=d.Height&&$(f).css({height:d.Height,overflow:"auto"}),$(f).scroll(function(){})}else $(f).empty();if(m="",!(null!=d.List&&d.List.length>0)){setTimeout(function(){s.attr("aria-invalid",!0)},0),p(t.$ariaLog,$(d.DefaultHtml).text(),!1),m=d.DefaultHtml,$(f).css({background:"#dedede"}),s.addClass(l),f.append(m).show(),o(s,f);var g="keydown";$(s).unbind(g);var y=-1;return $(s).bind(g,function(e){var t=e.keyCode?e.keyCode:e.which?e.which:e.charCode;t!=KeyCodes.Enter&&t!=KeyCodes.Tab||n()}),this}var C="ul"+d.IdSuffix,b=0,w=-1,k=!1;f.append("<ul id='"+C+"'></ul>");for(var S=0;S<d.List.length;S++){var D="li"+d.IdSuffix+"-"+b,x="li"+d.IdSuffix+"-",I=new RegExp(d.SearchText,"gi"),T=new RegExp(d.SearchText.toUpperCase()+"-","g"),A=new RegExp("("+d.SearchText+")","gi"),E=d.FormatText?d.List[S].N.replace(A,"<b>$1</b>"):d.List[S].N,L=d.List[S].S.length;if(d.List[S].I?itemStyle="background-color: #fff;color: #696969;padding-left: 15px;":itemStyle="background-color: #fff;color: #696969;",d.ListAlt.push(d.List[S].N),(w<0&&I.test(d.List[S].N)||!k&&3===d.SearchText.length&&T.test(d.List[S].N))&&(!k&&3===d.SearchText.length&&T.test(d.List[S].N)&&(k=!0),w=b),L>0){$("#"+C).append("<li id='"+D+"' style='border-top:1px solid #BBB; padding:0 3px;white-space:nowrap;"+itemStyle+"' title='"+d.List[S].N+"' citycode='"+d.List[S].C+"'>"+E+"</li>");for(var N=0;N<L;N++)x+=++b,itemStyle="background-color: #fff;color: #696969;",(w<0&&I.test(d.List[S].S[N].N)||!k&&3===d.SearchText.length&&T.test(d.List[S].S[N].N))&&(!k&&3===d.SearchText.length&&T.test(d.List[S].S[N].N)&&(k=!0),w=b),E=d.FormatText?d.List[S].S[N].N.replace(A,"<b>$1</b>"):d.List[S].S[N].N,d.ListAlt.push(d.List[S].S[N].N),N===L-1?$("#"+C).append("<li id='"+x+"' style='border-bottom:1px solid #BBB;padding:0 3px 0 25px;white-space:nowrap;"+itemStyle+"' title='"+d.List[S].S[N].N+"' citycode='"+d.List[S].S[N].C+"'>"+E+"</li>"):$("#"+C).append("<li id='"+x+"' style='padding:0 3px 0 25px;white-space:nowrap;"+itemStyle+"' title='"+d.List[S].S[N].N+"' citycode='"+d.List[S].S[N].C+"'>"+E+"</li>")}else $("#"+C).append("<li id='"+D+"' style='padding:0 3px;white-space:nowrap;"+itemStyle+"' title='"+d.List[S].N+"' citycode='"+d.List[S].C+"'>"+E+"</li>");b++}var V=d.List.slice();d.List=d.ListAlt.slice(),d.ListAlt=V,d.List.length>0&&($("#"+C+" li").eq(w>-1?w:0).addClass("selected_li").css({"background-color":"#696969",color:"#fff"}),p(t.$ariaLog,$("#"+C+" li").eq(w>-1?w:0).text()+" One of "+d.List.length,!0),t.defaultSelect=w),s.removeClass(l),$(f).css({background:"#ffffff"}),$("ul",$(f)).css({padding:"0px",color:"#696969",margin:"0px",cursor:"pointer","padding-left":"0px","margin-left":"0px","list-style-type":"none"}),$("li",$(f)).mouseover(function(){$("li",$(f)).css({"background-color":"#ffffff",color:"#696969"}),$(this).css({"background-color":"#696969",color:"white"})}),$("li",$(f)).click(function(){n();var e=$(this).attr("title"),t=$(this).attr("citycode");u(e,t),s.removeClass(l)}),$(f).keypress(function(){$(".selected_li",this).click()});var g="keydown";$(s).unbind(g);var y=-1;return $(s).bind(g,function(e){a(e)}),"true"!=$(s).attr("blurbound")&&($(s).bind("blur",function(e){"none"!=$(f).css("display")&&1==$("li",$(f)).length&&u($("li",$(f)).eq(0).attr("title"),$("li",$(f)).eq(0).attr("citycode"))}),$(s).attr("blurbound","true")),$(s).attr("autocomplete","off"),s.param=t,o(s,f),$(document.activeElement).attr("id")===s.attr("id")?i():n(),$(document).bind("click",r),this.unbindDropdown=function(){$(document).unbind("click",r)},this};makeDropdown.hide=function(){$(".AsDD").hide()};var isImageRes=!1,as=as||{};as.dropDown=null;var getCities=function(e,t,a,i,n,r){r=r||$("#"+this[0].id+"-log");var o=t,s=$(this);if(e===$(this).val()){var l="www.alaskaair.com";try{null!=asglobal&&null!=asglobal.domainUrl&&""!=asglobal.domainUrl?l=asglobal.domainUrl:null!=parent.asglobal&&null!=parent.asglobal.domainUrl&&""!=parent.asglobal.domainUrl&&(l=asglobal.domainUrl)}catch(d){}$.ajax({type:"POST",url:"//"+l+"/HomeWidget/GetCities",dataType:"json",data:{prefixText:e,contextKey:a},complete:function(l){var d=$.parseJSON(l.responseText);if(e===$(s).val()){var c="<div style='padding:8px;'>Enter the first 3 characters of:<div>&bull;&nbsp;&nbsp;City name</div><div>&bull;&nbsp;&nbsp;Airport name or code</div>";null!=a&&"partner"===a.toLowerCase()?n&&d.length>0?(c="<div style='padding:8px;'>Select the Use Miles check box to search award destinations.</div>",d=[]):c+="</div>":c+="<div>&bull;&nbsp;&nbsp;U.S. state, province, or Mexico</div></div>",i&&0===d.length&&null!=a&&"partner"!==a.toLowerCase()?(a="partner","undefined"==typeof jQuery.fn.getCities&&(jQuery.fn.getCities=getCities),s.getCities(e,t,a,i,!0,r)):("function"==typeof unbindDropdown&&unbindDropdown(),as.dropDown=makeDropdown($(s),{formatText:!0,searchText:e,list:d,divId:o,acceptCharInput:!0,defaultHtml:c,selectTextOnClick:!0,$ariaLog:r,citycodeid:"checkinorigin"}),d.length>0&&$(document.activeElement).attr("id")===s.attr("id")&&$("#"+o).show())}}})}return this},getBEXLocations=function(e,t,a,i){a=a||$("#"+this[0].id+"-log");var n=t,r=$(this);return e===$(this).val()&&$.ajax({type:"GET",url:"https://suggest.expedia.com/api/v4/typeahead/"+e+"?&client="+i.clientType+"&siteid="+i.siteId+"&guid="+i.guid+"&lob="+i.lobType+"&locale="+i.localeType+"&regiontype="+i.regiontype+"&dest="+i.dest+"&maxresults="+i.maxResults+"&features="+i.featuresType+"&format="+i.formatType,dataType:i.formatType,success:function(t){var o=t.sr;if("undefined"==typeof o)return!1;var s=o.map(function(e){return{C:e.gaiaId,N:e.regionNames.fullName,I:"true"==e.hierarchyInfo.isChild,S:[]}});if(e===$(r).val()){var l="<div style='padding:8px;'>Enter the first 3 characters of:<div>&bull;&nbsp;&nbsp;City Name</div><div>&bull;&nbsp;&nbsp;Airport Name or Code</div><div>&bull;&nbsp;&nbsp;U.S. state, province, or Mexico</div></div>";makeDropdown($(r),{formatText:!0,searchText:e,list:s,divId:n,acceptCharInput:!0,defaultHtml:l,selectTextOnClick:!0,$ariaLog:a,citycodeid:i.cityCodeId}),o.length>0&&$(document.activeElement).attr("id")===r.attr("id")&&$("#"+n).show()}}}),this};jQuery.fn.getCities=getCities,jQuery.fn.getBEXLocations=getBEXLocations;var BEX_SMARTFILL_OPTIONS={clientType:{HOT:"Hotels.Search",CAR:"Cars.Search",PKG:"Packages.Search"},lobType:{HOT:"HOTELS",CAR:"CARS",PKG:"PACKAGES",FLI:"FLIGHTS",RAI:"RAILS"},localeType:{ENU:"en_US",ESM:"es_MX"},regiontype:{SRS:"95",SRA:"127",SRH:"223",SRM:"351"},featuresType:{NON:"",HIE:"contextual_ta%7Cta_hierarchy%7Cpostal_code"},formatType:{XML:"xml",JSO:"json",JSP:"jsonp"}};jQuery.fn.autoCompleteBEXCities=function(e){function t(e){return e.keyCode?e.keyCode:e.which?e.which:e.charCode}function a(e){return t(e)==KeyCodes.Enter}var i=getAriaLogDiv();$(this).keypress(function(e){return!a(e)}),$(this).each(function(a){var n=$(this);if(n.is("input:text")){var r="div"+a+GetRandomId();$(n).bind("keyup",function(a){var o=1;if($(this).val().length>=o){var s=$(this).val(),l=t(a),d=$.inArray(l,[KeyCodes.DownArrow,KeyCodes.UpArrow,KeyCodes.Enter,KeyCodes.Tab,KeyCodes.End,KeyCodes.Home,KeyCodes.Shift]);d===-1&&n.getBEXLocations(s,r,i,e)}}),$(n).attr({autocomplete:"off",maxlength:100})}})},jQuery.fn.autoCompleteCities=function(e,t){function a(e){return e.keyCode?e.keyCode:e.which?e.which:e.charCode}function i(e){return a(e)==KeyCodes.Enter}var n=e,r=getAriaLogDiv();$(this).keypress(function(e){if(isImageRes){var t=$(this),o=$(this).val()+String.fromCharCode(a(e)),s=1;o.length>=s&&$.ajax({type:"POST",url:"//www.alaskaair.com/HomeWidget/GetCities",dataType:"json",data:{prefixText:o,contextKey:n()},complete:function(e){var a=$.parseJSON(e.responseText);try{"function"==typeof unbindDropdown&&unbindDropdown(),as.dropDown=makeDropdown($(t),{formatText:!0,searchText:o,list:a,divId:"div0",acceptCharInput:!0,selectTextOnClick:!0,defaultHtml:"<div style='padding:8px;'>Enter the first 3 characters of:<div>&bull;&nbsp;&nbsp;City name</div><div>&bull;&nbsp;&nbsp;Airport name or code</div><div>&bull;&nbsp;&nbsp;U.S. state, province, or Mexico</div></div>",$ariaLog:r,citycodeid:"checkinorigin"})}catch(i){}}})}return!i(e)}),$(this).each(function(e){var i=$(this);if(i.is("input:text")){var o="div"+e+GetRandomId();$(i).bind("keyup",function(e){var s=1;if($(this).val().length>=s){var l=$(this).val(),d=a(e),c=$.inArray(d,[KeyCodes.DownArrow,KeyCodes.UpArrow,KeyCodes.Enter,KeyCodes.Tab,KeyCodes.End,KeyCodes.Home,KeyCodes.Shift]);if(c===-1){var h="codeshare";null!=n&&(h="function"==typeof n?n():n),i.getCities(l,o,h,t,!1,r)}}}),$(i).attr({autocomplete:"off",maxlength:60})}})},jQuery.fn.GetCitiesASQXNotAllAirports=function(e,t,a){var i=t,n=$(this),r=getAriaLogDiv();if(e==$(this).val()){var o="www.alaskaair.com";try{null!=asglobal&&null!=asglobal.domainUrl&&""!==asglobal.domainUrl?o=asglobal.domainUrl:null!=parent.asglobal&&null!=parent.asglobal.domainUrl&&""!==parent.asglobal.domainUrl&&(o=asglobal.domainUrl)}catch(s){}$.ajax({type:"POST",url:"//"+o+"/HomeWidget/GetCitiesASQXNotAllAirports",dataType:"json",data:{prefixText:e,contextKey:a},complete:function(t){var a=$.parseJSON(t.responseText);e==$(n).val()&&("function"==typeof unbindDropdown&&unbindDropdown(),as.dropDown=makeDropdown($(n),{formatText:!0,searchText:e,list:a,divId:i,acceptCharInput:!0,selectTextOnClick:!0,defaultHtml:"<div style='padding:8px;'>Enter the first 3 characters of:<div>&bull;&nbsp;&nbsp;City name</div><div>&bull;&nbsp;&nbsp;Airport name or code</div><div>&bull;&nbsp;&nbsp;U.S. state, province, or Mexico</div></div>",citycodeid:"checkinorigin",$ariaLog:r}),a.length>0&&$(document.activeElement).attr("id")==n.attr("id")&&$("#"+i).show())}})}return this},jQuery.fn.autoCompleteCitiesASQXNotAllAirports=function(e){var t=e;$(this).each(function(e){var a=$(this);if(a.is("input:text")){var i="div"+e+GetRandomId();$(a).bind("keyup",function(e){var n=1;if($(this).val().length>=n){var r=$(this).val(),o=e.keyCode?e.keyCode:e.which?e.which:e.charCode,s=$.inArray(o,[KeyCodes.DownArrow,KeyCodes.UpArrow,KeyCodes.Enter,KeyCodes.Tab,KeyCodes.End,KeyCodes.Home,KeyCodes.Shift]);if(s==-1){var l="none";null!=t&&(l="function"==typeof t?t():t),a.GetCitiesASQXNotAllAirports(r,i,l)}}}),$(a).attr({autocomplete:"off",maxlength:60})}})},tabpanel.prototype.init=function(){var e;this.$panels.attr("aria-hidden","true"),this.$panels.hide(),e=this.$tabs.filter(".selected"),0===e.length&&(e=this.$tabs.first(),e.addClass("selected")),e.click(),this.$panel.find(this.getPanelSelector(e)).show().attr("aria-hidden","false").addClass("active")},tabpanel.prototype.setSwitchTabCallback=function(e){this.switchTabCb=e},tabpanel.prototype.getPanelSelector=function(e){var t=e.find("a").attr("aria-controls");return t?"#"+t:""},tabpanel.prototype.switchTabs=function(e,t){$(".AsDD").hide();var a=function(e,t){t.find("a[aria-disabled]").length||(e.removeClass("selected focus active"),e.find("a").attr("tabindex","-1").attr("aria-selected","false"),t.addClass("selected").find("a").removeAttr("tabindex").attr("aria-selected","true").click(),this.accordian||(this.$panel.find(this.getPanelSelector(e)).hide().attr("aria-hidden","true").removeClass("active"),this.$panel.find(this.getPanelSelector(t)).show().attr("aria-hidden","false").addClass("active")),this.switchTabCb&&this.switchTabCb(this.$tabs.index(t)),t.addClass("active"),t.find("a").focus())},i=this;t.length>0&&t[0].loadTabContentCb?t[0].loadTabContentCb(a.bind(i,e,t)):a.call(i,e,t)},tabpanel.prototype.togglePanel=function(e){var t=this.$panel.find(this.getPanelSelector(e));"true"===t.attr("aria-hidden")?(t.slideDown(100),t.attr("aria-hidden","false").removeClass("active")):(t.slideUp(100),t.attr("aria-hidden","true").addClass("active"))},tabpanel.prototype.bindHandlers=function(){var e=this;this.$tabs.keydown(function(t){return e.handleTabKeyDown($(this),t)}),this.$tabs.keypress(function(t){return e.handleTabKeyPress($(this),t)}),this.$tabs.click(function(t){return e.handleTabClick($(this),t)}),this.$tabs.focus(function(t){return e.handleTabFocus($(this),t)}),this.$tabs.blur(function(t){return e.handleTabBlur($(this),t)}),this.$panels.keydown(function(t){return e.handlePanelKeyDown($(this),t)}),this.$panels.keypress(function(t){return e.handlePanelKeyPress($(this),t)})},tabpanel.prototype.handleTabKeyDown=function(e,t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.enter:case this.keys.space:return!this.accordian||(this.togglePanel(e),t.stopPropagation(),!1);case this.keys.left:case this.keys.up:var a;if(t.ctrlKey);else{var i=this.$tabs.index(e);a=0===i?this.$tabs.last():this.$tabs.eq(i-1),this.switchTabs(e,a)}return t.stopPropagation(),!1;case this.keys.right:case this.keys.down:return i=this.$tabs.index(e),a=i===this.$tabs.length-1?this.$tabs.first():this.$tabs.eq(i+1),this.switchTabs(e,a),t.stopPropagation(),!1;case this.keys.home:return this.switchTabs(e,this.$tabs.first()),t.stopPropagation(),!1;case this.keys.end:return this.switchTabs(e,this.$tabs.last()),t.stopPropagation(),!1}},tabpanel.prototype.handleTabKeyPress=function(e,t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.enter:case this.keys.space:case this.keys.left:case this.keys.up:case this.keys.right:case this.keys.down:case this.keys.home:case this.keys.end:return t.stopPropagation(),!1;case this.keys.pageup:case this.keys.pagedown:return!t.ctrlKey||(t.stopPropagation(),!1)}return!0},tabpanel.prototype.handleTabClick=function(e,t){var a=this;$(".AsDD").hide();var i=function(e,t){e.$tabs.removeClass("selected active"),e.$tabs.find("a").attr("tabindex","-1").attr("aria-selected","false"),e.$panels.hide().removeClass("active"),t.addClass("selected active").find("a").attr("aria-selected","true").removeAttr("tabindex"),e.$panel.find(e.getPanelSelector(t)).show().addClass("active"),e.init_executed&&t.find("a").focus(),e.switchTabCb&&e.switchTabCb(e.$tabs.index(t)),e.init_executed=!0};return e.length>0&&e[0].loadTabContentCb?e[0].loadTabContentCb(i.bind(void 0,a,e)):i(a,e),!1},tabpanel.prototype.handleTabFocus=function(e,t){return e.addClass("focus"),!0},tabpanel.prototype.handleTabBlur=function(e,t){return e.removeClass("focus"),!0},tabpanel.prototype.handlePanelKeyDown=function(e,t){if(t.altKey)return!0;var a,i,n;switch(t.keyCode){case this.keys.esc:return t.stopPropagation(),!1;case this.keys.left:case this.keys.up:return!t.ctrlKey||(i=$("#"+e.attr("aria-labelledby")),i.focus(),t.stopPropagation(),!1);case this.keys.pageup:return!t.ctrlKey||(i=this.$tabs.filter(".selected"),n=this.$tabs.index(i),a=0===n?this.$tabs.last():this.$tabs.eq(n-1),this.switchTabs(i,a),t.stopPropagation(),t.preventDefault(),!1);case this.keys.pagedown:return!t.ctrlKey||(i=$("#"+e.attr("aria-labelledby")),n=this.$tabs.index(i),a=n===this.$tabs.length-1?this.$tabs.first():this.$tabs.eq(n+1),this.switchTabs(i,a),t.stopPropagation(),t.preventDefault(),!1)}return!0},tabpanel.prototype.handlePanelKeyPress=function(e,t){return!!t.altKey||(!t.ctrlKey||t.keyCode!==this.keys.pageup&&t.keyCode!==this.keys.pagedown?t.keyCode!==this.keys.esc||(t.stopPropagation(),t.preventDefault(),!1):(t.stopPropagation(),t.preventDefault(),!1))},$.extend($.expr[":"],{focusable:function(e){var t=e.nodeName.toLowerCase(),a=$(e).attr("tabindex");return $(e)["area"===t?"parents":"closest"](":hidden").length!==!0&&(!(!isNaN(a)&&a<0)&&(/input|select|textarea|button|object/.test(t)===!0?!e.disabled:("a"===t||"area"===t)==!0&&e.href.length>0))}});var homepage=window.homepage||{};homepage.setupCityPreferences=function(e,t,a,i,n){for(var r=function(e,t,a,i){if(e){var n=document.createElement("a");n.innerHTML=e,n.href="#",n.setAttribute("aria-label","Press enter to set "+i+" city to "+e),n.onclick=function(){return a.value=this.innerHTML,a.focus(),!1},t.appendChild(n)}},o=a("REZQUERY2%2E0AS"),s=o.split("&"),l=!1,d=!1,c=0,h=s.length;c<h;c++)if(s[c].indexOf("=")!==-1){var u=s[c].split("=")[0];"O1"!==u&&"O2"!==u&&"O3"!==u||(r(s[c].split("=")[1],e,i,"From"),l=!0),"D1"!==u&&"D2"!==u&&"D3"!==u||(r(s[c].split("=")[1],t,n,"To"),d=!0)}var p=document.createElement("span");p.innerHTML="&nbsp;",!l&&d?e.appendChild(p):!d&&l&&t.appendChild(p)},window.Cookies||(window.Cookies={get:function(e){for(var t=e+"=",a=document.cookie.split(";"),i=0,n=a.length;i<n;i++){for(var r=a[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}return""}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var a=t||0,i=this.length;a<i;a++)if(this[a]===e)return a;return-1}),$(window).bind("pageshow",function(){HideInterstitial()}),function(e){function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),a=t.exec(location.search.toLocaleLowerCase());return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function a(e,t){for(var a=e.split("&"),i=0;i<a.length;i++){var n=a[i].split("=");if(decodeURIComponent(n[0])===t)return decodeURIComponent(n[1])}return null}function i(e){var t=e.find("[name=ContractFareTypeKey]"),a=e.find("label.restrict-contract-fares span"),i=e.find(".discount-group"),n=e.find(".contract-fare-filters"),r=t.val();if(e.hasClass("ContractFares")&&"NONE"!==r){var o=e.find("[name=ContractFareTypeKey] :selected").text();a.html("Show only "+o),i.hide(),n.show()}else n.hide(),i.css("display","")}function n(e){var t=e.find("[name=IsAwardReservation]"),a=e.find("[name=AwardOption]");t.is(":checked")&&"MilesOnly"!==a.val()?e.addClass("AS50"):e.removeClass("AS50")}var r=function(t){var a=-1,i=this.find("input[type=radio][name=flightType]:checked");if(i.length>0)a=parseInt(i.val(),10);else{var n=this.find("input[type=checkbox][name=IsOneWay]"),r=this.find("[name=IsRoundTrip]");n.is(":checked")?(a=2,r.val("false")):(a=1,r.val("true")),this.find("[name=flightType]").val(a)}for(var o=["","IsRoundTrip","IsOneWay","IsMultiCity"],s=1;s<o.length;s+=1)this.removeClass(o[s]),this.find("[name="+o[s]+"]").val("false");this.addClass(o[a]),this.find("[name="+o[a]+"]").val("true");var l=null;l=3===a?[["Coach","Lowest coach"],["UNRESTRICTED","Refundable coach"],["First","Lowest first"],["First|UNRESTRICTED","Refundable first"]]:[["NoUpgradePreference","Upgrades"]],l.push(["MILEAGEUPG","Mileage upgrade"]),l.push(["MVPUPG","MVP&reg; upgrade"]),l.push(["GOLDUPG","MVP&reg; Gold upgrade"]),l.push(["GUESTUPG","MVP&reg; Gold guest upgrade"]);var d=this.find("[name=FareType]"),c="";e.each(l,function(e,t){c+='<option value="'+t[0]+'">'+t[1]+"</option>"}),d.html(e(c))},o=function(e){var t=this.find("[name=IsAwardReservation]"),a=t.is(":checked"),i="AwardTravel";a?this.addClass(i):this.removeClass(i)},s=function(t){function a(){for(var e=2;e<5;e+=1)t.find("[name=DepartureCity"+e+"]").val(""),t.find("[name=ArrivalCity"+e+"]").val(""),t.find("[name=DepartureDate"+e+"]").val(""),t.find("[name=DepartureTime"+e+"]").val("Anytime")}var i=t.find("[name=IsRoundTrip]"),n=t.find("[name=IsOneWay]"),r=t.find("[name=IsMultiCity]"),o=t.find("[name=IsAwardReservation]"),s=o.is(":checked"),l=t.find("[name=flightType]:checked"),d=parseInt(l.val(),10),c=e("[name=ShopLowFareCalendar]"),h=e("[name=IsShopLowFareCalendar]"),u=e("[name=ShopAwardCalendar]"),p=e("[name=IsShopAwardCalendar]");(s||r.is(":checked"))&&h.attr("checked",!1),c.val(h.is(":checked")?"true":"false"),s&&!r.is(":checked")||p.attr("checked",!1),u.val(p.is(":checked")?"true":"false"),s?(t.find("[name=ShopLowFareCalendar]").removeAttr("checked"),t.find("[name=DiscountCode]").val(""),3===d?t.find("[name=FareType]").val("Coach"):t.find("[name=FareType]").val("NoUpgradePreference")):(t.find("[name=ShopAwardCalendar]").removeAttr("checked"),t.find("[name=AwardOption]").val("MilesOnly")),1===d?(i.val("true"),n.val("false"),r.val("false"),a()):2===d?(i.val("false"),n.val("true"),r.val("false"),t.find("[name=ReturnDate]").val(""),t.find("[name=ReturnTime]").val("Anytime"),a()):3===d&&(i.val("false"),n.val("false"),r.val("true"),t.find("[name=ReturnDate]").val(""),t.find("[name=ReturnTime]").val("Anytime"),t.find("[name=FareType]").val("NoUpgradePreference"),t.find("[name=IncludeNearbyArrivalAirports]").removeAttr("checked"),t.find("[name=IncludeNearbyDepartureAirports]").removeAttr("checked"),t.find("[name=ShopLowFareCalendar]").removeAttr("checked"));var f=t.find("[name=ContractFareTypeKey]"),m=t.find("[name=ShowOnlyContractFares]"),v=t.find("[name=ShowContractAndAllFares]"),g=t.find("[name=ContractFaresOption]"),y=t.hasClass("ContractFares");if(y)if(s)f.val("NONE"),m.val("false"),v.val("false"),g.val("");else{var C=e("[name=FaresToShow]:checked").val(),b="ShowOnlyContractFares"===C;m.val(b),v.val(!b),g.val("on")}else f.val(""),m.val("false"),v.val("false"),g.val("");var $=t.find("[name=adultCount]");"0 Adults"!==$.val&&t.find("[name=RequiresUmnrService]").val("")},l=function(t,a){var i=e("#UMNRModal");i.removeClass("hidden");var n=parseInt(e("#adultCount").val()),r=parseInt(e("#childrenCount").val());if(0==n&&r>0){var o="#divChildrenQ";r>1?e(o).html("Are these children traveling alone?"):e(o).html("Is your child traveling alone?")}i.showLightBox({width:460,setParentZIndex:!1,parentElement:e("body"),onClose:function(){t.find("[type=submit]").removeAttr("disabled")}});var s=i.find(".continue-btn"),l=i.find("[name=umnrOption]"),d=i.find(".divUmnrNote");l.attr("checked",!1),d.addClass("hidden"),s.addClass("disabled"),l.bind("change",function(){"Yes"===i.find("[id=umnrYes]:checked").val()?(d.addClass("hidden"),e("#umnrNo").removeAttr("aria-describedby")):(d.removeClass("hidden"),e("#umnrNo").attr("aria-describedby","divUmnrNote")),s.removeClass("disabled"),s.attr("aria-disabled",!1)}),s.bind("click",function(){s.hasClass("disabled")||(e("input[name=RequiresUmnrService]").val(e("#umnrYes").get(0).checked?"True":"False"),e.hideLightBoxes(),a())})},d=function(t,a){var i=e("#InfantModal");i.removeClass("hidden"),i.showLightBox({width:460,setParentZIndex:!1,parentElement:e("body"),onClose:function(){t.find("[type=submit]").removeAttr("disabled")}});var n=i.find(".continue-btn");n.bind("click",function(){e.hideLightBoxes(),ShowInterstitial(),window.isImageRes&&window.Cookies.set("res-load-pb","true"),m(a),t.addClass("isValid"),t.submit()})},c=function(t){for(var a=t.serialize().split("&"),i={},n=0;n<a.length;n+=1){var r=a[n].split("="),o=decodeURIComponent(r[1]);o=o.replace(/\+/g," "),"true"===o?o=!0:"false"===o&&(o=!1),i[r[0]]=o}return i.originCityCode=e("#fromCity1").data("city-code"),i.destinationCityCode=e("#toCity1").data("city-code"),i},h=function(t){var a=c(t),i=(new Date).getTime();e.ajax({type:"POST",url:"//www.alaskaair.com/Shopping/Flights/ValidateShoppingRequest?t="+i,dataType:"json",data:a,complete:function(i,n){var r=i.responseText;if(null!=r&&""!=r){var o=e.parseJSON(i.responseText);if(null!=o){if(o.HasIntlLapInfant)return void d(t,a);if(o.IsValidRequest){var s=t.find("[name=AdultCount]").val(),c=function(){var e=homepage.sessionStorageManager.get("stateCode");if(!e){var t=homepage.cookieStore.getCookie("geo");if(t)return JSON.parse(t).StateCode}return e},h=function(){t.append('<input id="clientStateCode" type="hidden" name="ClientStateCode" value="'+c()+'" />'),ShowInterstitial(),window.isImageRes&&window.Cookies.set("res-load-pb","true"),m(a),t.addClass("isValid"),t.submit()};"0 adults"===s?l(t,h):h()}else{t.find("input, select").removeClass("input-error"),t.find("input, select").removeAttr("aria-invalid"),t.find("input, select").removeAttr("aria-describedby");for(var u=0;u<o.ErrorFields.length;u+=1)t.find("[name="+o.ErrorFields[u]+"]").addClass("input-error");for(var p=e("<ul></ul>"),f=[],u=0;u<o.ErrorMessages.length;u+=1){var v=e('<li id="shopping_err_'+u+'">'+o.ErrorMessages[u]+"</li>");p.append(v),f.push(v)}for(var u=0;u<o.ErrorFieldsWithErrorID.length;u+=1){var g=o.ErrorFieldsWithErrorID[u],y=g.substr(0,g.indexOf(":")),C=g[g.length-1],b=e("[name="+y+"]");b.attr("aria-describedby","shopping_err_"+C),b.attr("aria-invalid",!0)}o.ErrorFieldsWithErrorID.length>0&&e(".input-error").length>0&&e(".input-error")[0].focus(),t.find(".error-container").html(p),t.find("[type=submit]").removeAttr("disabled")}}}}})},u=function(){var e=location.search,t=null;if(e&&e.length>1){"?"===e[0]&&(e=e.substr(1)),e=e.split("&"),t={};for(var a=0;a<e.length;a+=1){var i=e[a].split("=");t[i[0]]=decodeURIComponent(i[1]||"")}}return t},p=!1,f=function(t,a){t.find("[name=DepartureCity1]").val(a.O),t.find("[name=ArrivalCity1]").val(a.D),t.find("[name=DepartureDate1]").val(a.OD);var i="true"!==a.RT;i?(t.find("[name=flightType][value=2]").attr("checked",!0),t.find("#oneWay").prop("checked",!0)):t.find("[name=ReturnDate]").val(a.DD);for(var n=a.A,r=t.find("[name=AdultCount]"),o=r.find("option"),s=0;s<o.length;s+=1){var l=e(o[s]);if(l.val()[0]===n){r.val(l.val());break}}t.find("[name=ChildrenCount]").val(a.C),t.find("[name=InfantCount]").val(a.L);var d=a.ShoppingMethod,h=d&&"onlineaward"===d.toLowerCase();
if(t.find("[name=IsAwardReservation]").attr("checked",h),t.find("[name=IncludeNearbyDepartureAirports]").attr("checked","true"===a.ONBA),t.find("[name=IncludeNearbyArrivalAirports]").attr("checked","true"===a.DNBA),t.find("[name=DiscountCode]").val(a.E),!p){var u=c(t);m(u),p=!0}"Calendar"===a.RequestType&&(h?t.find("[name=IsShopAwardCalendar]").attr("checked",!0):t.find("[name=IsShopLowFareCalendar]").attr("checked",!0))},m=function(e){try{localStorage.setItem("shoppingParams",JSON.stringify(e))}catch(t){window.console}},v=function(t){var a=u(),i=a&&a.O&&a.D&&a.OD;if(i)return void f(t,a);var n=localStorage.getItem("shoppingParams");if(n){if(window.isImageRes){var r=window.Cookies.get("res-load-pb");if("yes"!==r)return}var o=e.parseJSON(n);o.IsMultiCity===!0&&o.IsOneWay===!1&&o.IsRoundTrip===!1&&(o.IsRoundTrip=!0,o.IsMultiCity=!1);var s=new Date;for(var l in o){var d=o[l],c=t.find("[name="+l+"]"),h=(c.attr("type")||"").toLowerCase();if("string"==typeof d&&(d=d.replace("Adult","adult")),d&&d.indexOf&&d.indexOf("GOVTFARES")>=0)for(var p=d.substr(0,d.lastIndexOf("|")),m=c.find("option"),v=0;v<m.length;v++){var g=e(m[v]);if(g.attr("value").indexOf(p)>=0){c.val(g.val());break}}else if("checkbox"===h)c.attr("checked",d);else if("radio"===h)c=t.find("[name="+l+"][value="+d+"]"),c.attr("checked",!0);else{if(l.indexOf("Date")>=0&&d&&d.length>0){var y=/\d+\/\d+\/\d\d$/;y.exec(d)&&(d=d.substr(0,d.length-2)+"20"+d.substr(d.length-2));var C=new Date(d),b=C.getFullYear()-2e3;b>0&&(C<s&&(C=s),d=C.getMonth()+1+"/"+C.getDate()+"/"+b)}c.val(d)}null!=o.originCityCode&&o.originCityCode.length>0&&t.find("#fromCity1").attr("data-city-code",o.originCityCode),null!=o.destinationCityCode&&o.destinationCityCode.length>0&&t.find("#toCity1").attr("data-city-code",o.destinationCityCode)}}};e.fn.restoreSearchFromUrl=f,e.fn.shoppingForm=function(){v(this);var l=this.find("[name=flightType], input[type=checkbox][name=IsOneWay]"),d=e.proxy(r,this);l.change(d),d();var u=this.find("[name=IsAwardReservation]"),p=e.proxy(o,this);u.change(p),p(),v(this);var f=this,g=function(e){return f.find("[type=submit]").attr("disabled","disabled"),f.hasClass("isValid")?void f.removeClass("isValid"):(s(f),h(f),e.preventDefault(),!1)};this.removeClass("isValid"),this.submit(g),this.find("[type=submit]").click(g),this.find("[name=DepartureCity1], [name=ArrivalCity1], [name=DepartureCity2], [name=ArrivalCity2], [name=DepartureCity3], [name=ArrivalCity3], [name=DepartureCity4], [name=ArrivalCity4]").click(function(t){e(t.target).select()}).autoCompleteCities(function(){var e=u.is(":checked");return e?"partner":"codeshare"},!0);var y=t("ecert")||t("discountcode")||this.attr("data-discount"),C=this.find("[name=DiscountCode]");y?C.val(y):"Discount code"===C.val()&&C.val(""),this.hasClass("TwoAdults")&&this.find("[name=AdultCount]").val("2 Adults");var b=this.find("[name=DepartureDate1]").val();if(!b){var $=new Date;b=$.getMonth()+1+"/"+$.getDate()+"/"+($.getFullYear()-2e3)}var w=this.find("[name=ReturnDate]");w.val()||w.val(b);for(var k=1;k<5;k+=1){var S=this.find("[name=DepartureDate"+k+"]");S.val()||S.val(b)}var D=this.find("[name=ContractFareTypeKey]"),x=this.find(".discount-group");D.change(function(){i(f)});var I=function(){u.is(":checked")?x.css("display",""):i(f)};u.change(I),i(this),I(),e("[name=AwardOption]").change(function(){n(f)}),n(this);for(var T=[],A=[],E=window.Cookies.get("REZQUERY2%2E0AS"),L=1,N=a(E,"O"+L);N;)T.push(N),L+=1,N=a(E,"O"+L);for(var V=f.find(".from-group .preferredCities"),k=0;k<T.length;k+=1){var O=e("<a></a>").html(T[k]);O.click(function(t){f.find("[name=DepartureCity1]").val(e(t.srcElement).html())}),V.append(O)}L=1;for(var F=a(E,"D"+L);F||L<4;)F&&F.length>0&&A.push(F),L+=1,F=a(E,"D"+L);for(var R=f.find(".to-group .preferredCities"),k=0;k<A.length;k+=1){var O=e("<a></a>").html(A[k]);O.click(function(t){f.find("[name=ArrivalCity1]").val(e(t.srcElement).html())}),R.append(O)}var P=f.find(".link-to-advanced");return P.click(function(t){function a(e){var t=new Date(e),a=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return a+"-"+i+"-"+n}t.preventDefault();var i=f.find("#fromCity1").attr("data-city-code"),n=f.find("#toCity1").attr("data-city-code"),r=f.find("[name=DepartureDate1]").val(),o=f.find("[name=ReturnDate]").val(),s=a(r),l=a(o),d=f.find("[name=AdultCount]").val()[0],h=f.find("[name=ChildrenCount]").val();null!=h&&(h=h[0]);var u=f.find("[name=InfantCount]").val();null!=u&&(u=u[0]);var p=f.find("[name=IsOneWay]").is(":checked")?"false":"true",v=f.find("[name=IsAwardReservation]").is(":checked")?"OnlineAward":null,g=e(this).attr("href").indexOf("?")>0?"&":"?";g+="O="+i+"&D="+n+"&OD="+s+"&DD="+l+"&OT=&DT=&A="+d+"&C="+h+"&L="+u+"&F=&RT="+p+"&RC=false",null!==v&&(g+="&RequestType="+v);var y=c(f);return m(y),window.location=e(this).attr("href")+g,!1}),this}}(jQuery),$("#advanced-search-form").length&&$("#advanced-search-form").shoppingForm(),$("#checkInDestination").length&&$("#checkInDestination").autoCompleteCitiesASQXNotAllAirports("codeshare",!0),$("#flightStatusForm #Origin").length&&$("#flightStatusForm #Origin").autoCompleteCitiesASQXNotAllAirports("codeshare",!0),$("#flightStatusForm #Destination").length&&$("#flightStatusForm #Destination").autoCompleteCitiesASQXNotAllAirports("codeshare",!0);var shoppingWidget={SelectCity:function(e){for(var t=$(e),a=t.parents(".DC_ThisCity").prev(),i=a.find(".DC_EnteredCity"),n=25;0===i.length&&n>0;)a=a.prev(),i=a.find(".DC_EnteredCity"),n-=1;var r=i.text();$("#advanced-search-form").find("input[type=text]").each(function(e,a){var i=$(a);i.val()===r&&i.val(t.text())})}},ChangeAvailSearch=function(){$("#advanced-search-form").toggleClass("expanded")},homepage=window.homepage||{};homepage.cookieStore=homepage.cookieStore||{getCookie:function(e){return""}},window.homepage.setupCityPreferences(document.getElementById("preferredOrigin"),document.getElementById("preferredDestinations"),homepage.cookieStore.getCookie,document.getElementById("fromCity1"),document.getElementById("toCity1"));var homepage=window.homepage||{};homepage.sessionStorageManager=homepage.sessionStorageManager||{get:function(e){return""},set:function(e,t){}},$(document).ready(function(){var e=(new tabpanel("formletTabPanel","#primaryTab [role=presentation]","#booking, #checkin, #status, #manage",(!1)),"neat");$("#formletTabPanel #findFlights").click(function(){$(".AsDD").hide(),$("#advanced-search-form").find("input[type=text]").attr("aria-describedby",null)}),"undefined"!=typeof as&&as.IsBexDown===!1&&(e="bex"),$("#tab-hotels").parent().length>0&&($("#tab-hotels").parent().get(0).loadTabContentCb=function(t){(new HotelsHomeletLoader).load(t,"//"+asglobal.domainUrl+"/"+e+"/hotelformlet/"+as.Version)}),$("#tab-cars").parent().length>0&&($("#tab-cars").parent().get(0).loadTabContentCb=function(t){(new CarsHomeletLoader).load(t,"//"+asglobal.domainUrl+"/"+e+"/carformlet/"+as.Version)}),$("#tab-vacations").parent().length>0&&($("#tab-vacations").parent().get(0).loadTabContentCb=function(t){(new VacationsHomeletLoader).load(t,"//"+asglobal.domainUrl+"/"+e+"/vacationformlet/"+as.Version)});new tabpanel("booking","#secondaryTab [role=presentation]","#flights, #hotels, #cars, #vacations",(!1))});var inputErrorCSS="input-error",today=new Date,yesterday=new Date(today);yesterday.setDate(today.getDate()-1);var tomorrow=new Date(today);tomorrow.setDate(today.getDate()+1);var getFormattedDate=function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},yesterdayDate=getFormattedDate(yesterday),todayDate=getFormattedDate(today),tomorrowDate=getFormattedDate(tomorrow),homeletValidators={};homeletValidators.isValueEqualsPlaceholder=function(e){return e.val()===e.attr("placeholder")},homeletValidators.setValidationError=function(e,t,a){if(a&&"undefined"!=typeof a&&null!==a){var i=$("."+t,a).eq(0);i.show(),i.attr("id",t)}else $("#"+t).show();e.attr("aria-describedby",t),e.attr("aria-invalid",!0),e.addClass(inputErrorCSS)},homeletValidators.removeValidationError=function(e,t,a){if(a&&"undefined"!=typeof a&&null!==a){var i=$("."+t,a).eq(0);i.hide(),i.attr("id","")}else $("#"+t).hide();e.removeAttr("aria-describedby"),e.removeAttr("aria-invalid"),e.removeClass(t)},function(e){e.fn.checkinForm=function(){var t=this,a=["","","confirmcode-option","eticket-option"],i=["","","checkInConfirmationCode","checkInETicketNumber"],n=[null,null,/^[A-Za-z]{6}$/,/^[0-9]{10}$|^[0-9]{13}$/],r=this.find("form");r.attr("action",serviceEndpoints.kineticsWebCheckInURL);var o=function(e){for(var i=parseInt(s.val()||"0",10),n=0;n<a.length;n+=1)t.removeClass(a[n]);t.addClass(a[i])},s=e("#checkinOption");s.keyup(o),s.change(o);var l=function(){t.submit()},d=function(){e("#checkinForm").submit()},c=e("#submitCheckin");c.click(l);var h=!1,u=!1;return this.submit(function(o){if(h||u)return utag&&utag.link({event_name:"link_click",link_tracking:"home-page:formlet::checkinbutton"}),!0;var l,c=[];e(this).find("."+inputErrorCSS).removeClass(inputErrorCSS);for(var p,f=parseInt(s.val()||"0",10),m=2;m<a.length;m+=1)e("#checkin-error-"+m).hide(),m!==f?t.find("input."+a[m]).val(""):p=t.find("input."+a[m]).val();var v=e("#checkInDestination");if(v.val().length<3||homeletValidators.isValueEqualsPlaceholder(v))o.preventDefault(),homeletValidators.setValidationError(v,"checkin-error-departure"),c.push(v),homeletValidators.removeValidationError(v,"checkin-error-departure-notsupported");else if(v.val().indexOf("(HAV-Havana)")>0){var g=e("#checkin-heading");g.hide(),o.preventDefault(),homeletValidators.removeValidationError(v,"checkin-error-departure"),homeletValidators.setValidationError(v,"checkin-error-departure-notsupported"),c.push(v)}else l=v.data("city-code"),l||(l=v.val().toUpperCase()),e("#checkinorigin").val(l),homeletValidators.removeValidationError(v,"checkin-error-departure"),homeletValidators.removeValidationError(v,"checkin-error-departure-notsupported");""===a[f]?(o.preventDefault(),homeletValidators.setValidationError(s,"checkin-error-option"),c.push(s)):(homeletValidators.removeValidationError(s,"checkin-error-option"),n[f].test(p)?homeletValidators.removeValidationError(e("#"+i[f]),"checkin-error-"+f):(o.preventDefault(),homeletValidators.setValidationError(e("#"+i[f]),"checkin-error-"+f),c.push(e("#"+i[f])))),c.length>0&&c[0].focus();var y;if(e.ajax({url:"/planbook/expresscheckinstatus?locator="+p+"&airport="+l,success:function(e){y=e.Result},async:!1}),y.IsInternational){var C=document.createElement("form");C.action=y.ReservationUrl,C.method="POST";var b=document.createElement("input");b.type="hidden",b.name="confirmationCode",b.value=y.ConfirmationCode;var $=document.createElement("input");return $.type="hidden",$.name="lastName",$.value=y.LastName,C.appendChild(b),C.appendChild($),document.body.appendChild(C),C.submit(),!1}if(y.CanUseExpressCheckIn&&y.IsOneCheckin&&!y.HasBoardingDocs){h=!0;var w=y.FirstName?" "+y.FirstName+",":"!",k="alaskaair.convertlanguage.com"===window.location.hostname.toLowerCase()?"&locale=es":"&locale=en",S='<section id="express-check-in-option"> <p> Hi'+w+"<br />Check in for your trip. Confirmation code: <strong>"+y.ConfirmationCode+"</strong> </p><div> <auro-button fluid onclick=\"window.location.assign('"+y.ExpressCheckInUrl+"&cid=ascom-home-widget-t2:checkin&int=AS_HomePage_WT2||EG_EXPRESS_CI||-profID:CheckIn"+k+"')\">Check in </auro-button> </div> </section>";return r.after(S),r.hide(),e("#express-check-in-option").closest(".homelet").addClass("no-padding"),!1}if(y.HasBoardingDocs&&y.IsOneCheckin){h=!0;var D="https://www.alaskaair.com/booking/reservation-lookup?RECLOC="+y.ConfirmationCode+"&LNAME="+y.LastName,w=y.FirstName?" "+y.FirstName+",":"!",k="alaskaair.convertlanguage.com"===window.location.hostname.toLowerCase()?"&locale=es":"&locale=en",S='<section id="express-check-in-option"> <p> Hi'+w+"<br />Check in for your trip. Confirmation code: <strong>"+y.ConfirmationCode+"</strong> </p><div> <auro-button fluid onclick=\"window.location.assign('"+D+'\')">View boarding pass </auro-button><div><span>Upgrading seats?</span></div><auro-button id="ncr-checkin-button" fluid secondary> Check in </auro-button></div> </section>';return r.after(S),r.hide(),e("#express-check-in-option").closest(".homelet").addClass("no-padding"),e("#ncr-checkin-button").click(d),!1}if(y.HasBoardingDocs&&!y.IsOneCheckin){var D="https://www.alaskaair.com/booking/reservation-lookup?RECLOC="+y.ConfirmationCode+"&LNAME="+y.LastName;return window.location.assign(D),!1}return u=!0,d(),!0}),this},e.fn.flightStatusForm=function(){for(var t=this,a=[yesterdayDate,todayDate,tomorrowDate],i=1,n=this.find("[name=FlightDate]"),r=0;r<a.length;r+=1)e(e("#flightStatusDepart").children()[r]).val(a[r]);n.val(a[i]),this.find("[name=DepartureDate]").val(todayDate);var o=e("[name=FlightNumber]");return this.submit(function(a){var i=[],n=o.val().trim();if(o.val(n),""===n||isNaN(n)){e(this).find("."+inputErrorCSS).removeClass(inputErrorCSS);var r=e("#Origin"),s=r.val().trim(),l=e("#Destination"),d=l.val().trim();s.length<3&&d.length<3?(homeletValidators.setValidationError(o,"flightStatus-error-either"),i.push(o)):homeletValidators.removeValidationError(o,"flightStatus-error-either"),s.length<3||homeletValidators.isValueEqualsPlaceholder(r)?(homeletValidators.setValidationError(r,"flightStatus-error-from"),i.push(r)):homeletValidators.removeValidationError(r,"flightStatus-error-from"),d.length<3||homeletValidators.isValueEqualsPlaceholder(l)?(homeletValidators.setValidationError(l,"flightStatus-error-to"),i.push(l)):homeletValidators.removeValidationError(l,"flightStatus-error-to"),""!==s&&s===d?(homeletValidators.setValidationError(l,"flightStatus-error-sameFromTo"),i.push(l)):(""!==s&&homeletValidators.removeValidationError(r,"flightStatus-error-sameFromTo"),""!==d&&homeletValidators.removeValidationError(l,"flightStatus-error-sameFromTo"));var c=new Date(e("#DepartureDate").val().trim());"Invalid Date"!=c&&c.getFullYear()<1970&&c.setFullYear(c.getFullYear()+100),"Invalid Date"==c||c<today.setHours(0,0,0,0)?(homeletValidators.setValidationError(e("#DepartureDate"),"flightStatus-error-departureDate"),i.push(e("#DepartureDate"))):homeletValidators.removeValidationError(e("#DepartureDate"),"flightStatus-error-departureDate")}else t.find("[name=DepartureDate]").attr("name","old1"),t.find("[name=Origin]").attr("name","old2"),t.find("[name=Destination]").attr("name","old3");if(0===i.length&&""===n){var h=t.attr("action");h=h.replace("/flightstatus/","/schedule/"),t.attr("action",h)}return i.length>0&&i[0].focus(),0===i.length}),this},e.fn.manageForm=function(t){return this.submit(function(a){var i=[];t.find("."+inputErrorCSS).removeClass(inputErrorCSS);var n=e("input[name*='TravelerLastName']",t);n.val().trim().length<1||homeletValidators.isValueEqualsPlaceholder(n)?(homeletValidators.setValidationError(n,"manage-error-tlastname",t),i.push(n)):homeletValidators.removeValidationError(n,"manage-error-tlastname",t);var r=e("input[name*='CodeOrNumber']",t),o=r.val().trim();r.val(o);var s=[/^[A-Za-z]{6}$|^[0-9]{10}$|^[0-9]{13}$/];return s[0].test(o)?homeletValidators.removeValidationError(r,"manage-error-confirmationcode",t):(homeletValidators.setValidationError(r,"manage-error-confirmationcode",t),i.push(r)),0===i.length?ShowInterstitial():i[0].focus(),0===i.length}),t};var t=e("#manage"),a=t.find("form"),i=e(a[0]);i.manageForm(i)}(jQuery),$("#checkin").checkinForm(),$("#flightStatusForm").flightStatusForm(),function(e){e("body").delegate(".transition-slide-up","click",function(t){var a=e(t.target);return!(!a.is("a")||!a.hasClass("alert-link"))||(t.preventDefault(),e(this).slideUp(),!1)})}(jQuery);